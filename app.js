var Xi=zi;function zi(e){if(typeof e!="function")throw new Error("Could not parse function signature for injection dependencies: Object is not a function");if(!e.length)return[];var t=/^()\(?([^)=]*)\)? *=>/.exec(e+"")||/^[^(]+([^ \(]*) *\(([^\)]*)\)/.exec(e+"");if(!t)throw new Error("Could not parse function signature for injection dependencies: "+e+"");var n=t[2].replace(/\/\*[\S\s]*?\*\//g," ").replace(/\/\/.*/g," ");function a(o,u,l){return u+l.split(",").map(function(f){return f&&f.trim()}).filter(Boolean).join("@")}return n=n.replace(/(\{)([^}]*)\}/g,a),n=n.replace(/(\[)([^}]*)\]/g,a),n.split(",").map(function(o){return o&&o.trim()}).map(function(o){return o[0]==="{"?o.substring(1).split("@"):o[0]==="["?{items:o.substring(1).split("@")}:o}).filter(Boolean)}var te=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ki(e,t,n){return n={path:t,exports:{},require:function(a,o){return Yi(a,o==null?n.path:o)}},e(n,n.exports),n.exports}function Qi(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")&&Object.keys(e).length===1?e.default:e}function Yi(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var $=Zi;function Zi(e,t){if(dt("noDeprecation"))return e;var n=!1;function a(){if(!n){if(dt("throwDeprecation"))throw new Error(t);dt("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}return a}function dt(e){try{if(!te.localStorage)return!1}catch(n){return!1}var t=te.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}function Wt(){throw new Error("setTimeout has not been defined")}function zt(){throw new Error("clearTimeout has not been defined")}var ne=Wt,re=zt,me;typeof window!="undefined"?me=window:typeof self!="undefined"?me=self:me={};typeof me.setTimeout=="function"&&(ne=setTimeout);typeof me.clearTimeout=="function"&&(re=clearTimeout);function Xt(e){if(ne===setTimeout)return setTimeout(e,0);if((ne===Wt||!ne)&&setTimeout)return ne=setTimeout,setTimeout(e,0);try{return ne(e,0)}catch(t){try{return ne.call(null,e,0)}catch(n){return ne.call(this,e,0)}}}function es(e){if(re===clearTimeout)return clearTimeout(e);if((re===zt||!re)&&clearTimeout)return re=clearTimeout,clearTimeout(e);try{return re(e)}catch(t){try{return re.call(null,e)}catch(n){return re.call(this,e)}}}var W=[],he=!1,ce,Fe=-1;function ts(){!he||!ce||(he=!1,ce.length?W=ce.concat(W):Fe=-1,W.length&&Yt())}function Yt(){if(!he){var e=Xt(ts);he=!0;for(var t=W.length;t;){for(ce=W,W=[];++Fe<t;)ce&&ce[Fe].run();Fe=-1,t=W.length}ce=null,he=!1,es(e)}}function ns(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];W.push(new Kt(e,t)),W.length===1&&!he&&Xt(Yt)}function Kt(e,t){this.fun=e,this.array=t}Kt.prototype.run=function(){this.fun.apply(null,this.array)};var rs="browser",as="browser",os=!0,is=[],ss="",us={},cs={},ls={};function le(){}var fs=le,ds=le,ms=le,hs=le,ps=le,gs=le,ys=le;function ws(e){throw new Error("process.binding is not supported")}function vs(){return"/"}function bs(e){throw new Error("process.chdir is not supported")}function Ts(){return 0}var pe=me.performance||{},Es=pe.now||pe.mozNow||pe.msNow||pe.oNow||pe.webkitNow||function(){return new Date().getTime()};function _s(e){var t=Es.call(pe)*.001,n=Math.floor(t),a=Math.floor(t%1*1e9);return e&&(n=n-e[0],a=a-e[1],a<0&&(n--,a+=1e9)),[n,a]}var xs=new Date;function Ss(){var e=new Date,t=e-xs;return t/1e3}var L={nextTick:ns,title:rs,browser:os,env:{NODE_ENV:"production"},argv:is,version:ss,versions:us,on:fs,addListener:ds,once:ms,off:hs,removeListener:ps,removeAllListeners:gs,emit:ys,binding:ws,cwd:vs,chdir:bs,umask:Ts,hrtime:_s,platform:as,release:cs,config:ls,uptime:Ss};function As(e,t){if(e==null)throw new TypeError('The constructor to "inherits" must not be null or undefined');if(t==null)throw new TypeError('The super constructor to "inherits" must not be null or undefined');if(t.prototype===void 0)throw new TypeError('The super constructor to "inherits" must have a prototype');e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Cs(){return typeof window=="undefined"&&typeof L!="undefined"&&L.versions!=null&&L.versions.node!=null}function Ls(e,t){return e===void 0?t:e}function Os(e,t){var n={};for(var a in e){if(!(a in t))throw new Error("No such option "+a);n[a]=e[a]}for(var o in t)o in n||(n[o]=t[o]);return n}function Is(e){var t={};for(var n in e){var a=e[n];a!=null&&(t[n]=a)}return t}function Ds(e){var t={};for(var n in e){var a=e[n];a!==void 0&&(t[n]=a)}return t}function Qt(e,t){return typeof e=="object"&&e!==null&&Boolean(e[t])}function ks(e,t,n){return n=typeof n=="object"?Zt(n):n,[e,t?t.charAt(0)==="/"?"":"/"+t:"",n?n.charAt(0)==="?"?"":"?"+n:""].join("")}function Zt(e,t){t=t||"";var n=[],a,o;typeof t!="string"&&(t="?");for(o in e)if(Qt(e,o)){if(a=e[o],!a&&(a==null||isNaN(a))&&(a=""),o=en(o),a=en(a),o===null||a===null)continue;n.push(o+"="+a)}return n.length?t+n.join("&"):""}function en(e){try{return encodeURIComponent(e)}catch(t){return null}}function Ns(e,t){var n={};for(var a in e)n[a]=e[a];for(var a in t)n[a]=t[a];return n}var h={mergeObjects:Ns,formatUrl:ks,querystringify:Zt,inherits:As,isNodeEnv:Cs,defaults:Ls,applyDefaults:Os,removeNullAndUndefinedValues:Is,removeUndefinedValues:Ds,checkInstanceHasProperty:Qt};function ge(e){this.raw=e}ge.prototype._isFaunaExpr=!0;ge.prototype.toJSON=function(){return this.raw};ge.prototype.toFQL=function(){return S(this.raw)};var Ps=["Do","Call","Union","Intersection","Difference","Equals","Add","BitAnd","BitOr","BitXor","Divide","Max","Min","Modulo","Multiply","Subtract","LT","LTE","GT","GTE","And","Or"],tn={containsstrregex:"ContainsStrRegex",endswith:"EndsWith",findstr:"FindStr",findstrregex:"FindStrRegex",gt:"GT",gte:"GTE",is_nonempty:"is_non_empty",lowercase:"LowerCase",lt:"LT",lte:"LTE",ltrim:"LTrim",rtrim:"RTrim",regexescape:"RegexEscape",replacestr:"ReplaceStr",replacestrregex:"ReplaceStrRegex",startswith:"StartsWith",substring:"SubString",titlecase:"TitleCase",uppercase:"UpperCase"};function nn(e){return e instanceof ge||h.checkInstanceHasProperty(e,"_isFaunaExpr")}function Be(e){return"{"+Object.keys(e).map(function(t){return t+": "+S(e[t])}).join(", ")+"}"}function mt(e,t){return e.map(function(n){return t(n)}).join(", ")}function Rs(e){return e in tn&&(e=tn[e]),e.split("_").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join("")}var S=function(e,t){if(nn(e)){if("value"in e)return e.toString();e=e.raw}if(e===null)return"null";switch(typeof e){case"string":return JSON.stringify(e);case"symbol":case"number":case"boolean":return e.toString();case"undefined":return"undefined"}if(Array.isArray(e)){var n=mt(e,S);return Ps.indexOf(t)!=-1?n:"["+n+"]"}if("match"in e){var a=S(e.match),o=e.terms||[];return nn(o)&&(o=o.raw),Array.isArray(o)&&o.length==0?"Match("+a+")":Array.isArray(o)?"Match("+a+", ["+mt(o,S)+"])":"Match("+a+", "+S(o)+")"}if("paginate"in e){var u=Object.keys(e);if(u.length===1)return"Paginate("+S(e.paginate)+")";var l=Object.assign({},e);return delete l.paginate,"Paginate("+S(e.paginate)+", "+Be(l)+")"}if("let"in e&&"in"in e){var f="";return Array.isArray(e.let)?f="["+mt(e.let,Be)+"]":f=Be(e.let),"Let("+f+", "+S(e.in)+")"}if("object"in e)return Be(e.object);if("lambda"in e)return"Lambda("+S(e.lambda)+", "+S(e.expr)+")";if("filter"in e)return"Filter("+S(e.collection)+", "+S(e.filter)+")";if("call"in e)return"Call("+S(e.call)+", "+S(e.arguments)+")";if("map"in e)return"Map("+S(e.collection)+", "+S(e.map)+")";if("foreach"in e)return"Foreach("+S(e.collection)+", "+S(e.foreach)+")";var m=Object.keys(e),p=m[0];p=Rs(p);var v=m.filter(E=>e[E]!==null||m.length>1).map(E=>S(e[E],p)).join(", ");return p+"("+v+")"};ge.toString=S;var i=ge;function j(e,t,n){Error.call(this),this.name=e,this.message=t,this.description=n}h.inherits(j,Error);function rn(e){j.call(this,"InvalidValue",e)}h.inherits(rn,j);function an(e,t,n,a){var o=`${a} function requires ${l(e,t)} argument(s) but ${n} were given`,u=f(a);j.call(this,"InvalidArity",`${o}
${u}`),this.min=e,this.max=t,this.actual=n;function l(m,p){return p===null?"at least "+m:m===null?"up to "+p:m===p?m:"from "+m+" to "+p}function f(m){var p="https://docs.fauna.com/fauna/current/api/fql/functions/";return`For more info, see the docs: ${p}${m.toLowerCase()}`}}h.inherits(an,j);function C(e,t){var n=t.responseContent,a=n.errors,o=a.length===0?'(empty "errors")':a[0].code,u=a.length===0?'(empty "errors")':a[0].description;j.call(this,e,o,u),this.requestResult=t}h.inherits(C,j);C.prototype.errors=function(){return this.requestResult.responseContent.errors};C.raiseForStatusCode=function(e){var t=e.statusCode;if(t<200||t>=300)switch(t){case 400:throw new ht(e);case 401:throw new pt(e);case 403:throw new gt(e);case 404:throw new yt(e);case 405:throw new wt(e);case 500:throw new vt(e);case 503:throw new bt(e);default:throw new C("UnknownError",e)}};function ht(e){C.call(this,"BadRequest",e)}h.inherits(ht,C);function pt(e){C.call(this,"Unauthorized",e)}h.inherits(pt,C);function gt(e){C.call(this,"PermissionDenied",e)}h.inherits(gt,C);function yt(e){C.call(this,"NotFound",e)}h.inherits(yt,C);function wt(e){C.call(this,"MethodNotAllowed",e)}h.inherits(wt,C);function vt(e){C.call(this,"InternalError",e)}h.inherits(vt,C);function bt(e){C.call(this,"UnavailableError",e)}h.inherits(bt,C);function Ue(e,t,n){j.call(this,e,t,n)}h.inherits(Ue,j);function on(e){j.call(this,"StreamsNotSupported","streams not supported",e)}h.inherits(on,Ue);function sn(e){var t=e.data||{};j.call(this,"StreamErrorEvent",t.code,t.description),this.event=e}h.inherits(sn,Ue);var H={FaunaError:j,FaunaHTTPError:C,InvalidValue:rn,InvalidArity:an,BadRequest:ht,Unauthorized:pt,PermissionDenied:gt,NotFound:yt,MethodNotAllowed:wt,InternalError:vt,UnavailableError:bt,StreamError:Ue,StreamsNotSupported:on,StreamErrorEvent:sn},Fs=js,Us=Bs,qs=Ms,J=[],F=[],Hs=typeof Uint8Array!="undefined"?Uint8Array:Array,Tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ye=0,Js=Tt.length;ye<Js;++ye)J[ye]=Tt[ye],F[Tt.charCodeAt(ye)]=ye;F["-".charCodeAt(0)]=62;F["_".charCodeAt(0)]=63;function un(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var a=n===t?0:4-n%4;return[n,a]}function js(e){var t=un(e),n=t[0],a=t[1];return(n+a)*3/4-a}function Vs(e,t,n){return(t+n)*3/4-n}function Bs(e){var t,n=un(e),a=n[0],o=n[1],u=new Hs(Vs(e,a,o)),l=0,f=o>0?a-4:a,m;for(m=0;m<f;m+=4)t=F[e.charCodeAt(m)]<<18|F[e.charCodeAt(m+1)]<<12|F[e.charCodeAt(m+2)]<<6|F[e.charCodeAt(m+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=t&255;return o===2&&(t=F[e.charCodeAt(m)]<<2|F[e.charCodeAt(m+1)]>>4,u[l++]=t&255),o===1&&(t=F[e.charCodeAt(m)]<<10|F[e.charCodeAt(m+1)]<<4|F[e.charCodeAt(m+2)]>>2,u[l++]=t>>8&255,u[l++]=t&255),u}function Gs(e){return J[e>>18&63]+J[e>>12&63]+J[e>>6&63]+J[e&63]}function $s(e,t,n){for(var a,o=[],u=t;u<n;u+=3)a=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(e[u+2]&255),o.push(Gs(a));return o.join("")}function Ms(e){for(var t,n=e.length,a=n%3,o=[],u=16383,l=0,f=n-a;l<f;l+=u)o.push($s(e,l,l+u>f?f:l+u));return a===1?(t=e[n-1],o.push(J[t>>2]+J[t<<4&63]+"==")):a===2&&(t=(e[n-2]<<8)+e[n-1],o.push(J[t>>10]+J[t>>4&63]+J[t<<2&63]+"=")),o.join("")}var Et={byteLength:Fs,toByteArray:Us,fromByteArray:qs},Ws={},zs=Object.freeze({__proto__:null,default:Ws}),V=Qi(zs),Me=h.isNodeEnv()?V:null,cn=Me&&Me.inspect.custom,Xs=Me?Me.inspect:JSON.stringify;function z(){}z.prototype._isFaunaValue=!0;h.inherits(z,i);function A(e,t,n){if(!e)throw new H.InvalidValue("id cannot be null or undefined");this.value={id:e},t&&(this.value.collection=t),n&&(this.value.database=n)}A.prototype._isFaunaRef=!0;h.inherits(A,z);Object.defineProperty(A.prototype,"collection",{get:function(){return this.value.collection}});Object.defineProperty(A.prototype,"class",{get:$(function(){return this.value.collection},"class is deprecated, use collection instead")});Object.defineProperty(A.prototype,"database",{get:function(){return this.value.database}});Object.defineProperty(A.prototype,"id",{get:function(){return this.value.id}});A.prototype.toJSON=function(){return{"@ref":this.value}};we(A,function(){var e={collections:"Collection",databases:"Database",indexes:"Index",functions:"Function",roles:"Role",access_providers:"AccessProvider"},t=function(a){return a.collection===void 0},n=function(a){if(t(a)){var o=a.database!==void 0?a.database.toString():"";return a.id==="access_providers"?"AccessProviders("+o+")":a.id.charAt(0).toUpperCase()+a.id.slice(1)+"("+o+")"}if(t(a.collection)){var u=e[a.collection.id];if(u!==void 0){var o=a.database!==void 0?", "+a.database.toString():"";return u+'("'+a.id+'"'+o+")"}}return"Ref("+n(a.collection)+', "'+a.id+'")'};return n(this)});A.prototype.valueOf=function(){return this.value};A.prototype.equals=function(e){return(e instanceof A||h.checkInstanceHasProperty(e,"_isFaunaRef"))&&this.id===e.id&&(this.collection===void 0&&e.collection===void 0||this.collection.equals(e.collection))&&(this.database===void 0&&e.database===void 0||this.database.equals(e.database))};var X={COLLECTIONS:new A("collections"),INDEXES:new A("indexes"),DATABASES:new A("databases"),FUNCTIONS:new A("functions"),ROLES:new A("roles"),KEYS:new A("keys"),ACCESS_PROVIDERS:new A("access_providers")};X.fromName=function(e){switch(e){case"collections":return X.COLLECTIONS;case"indexes":return X.INDEXES;case"databases":return X.DATABASES;case"functions":return X.FUNCTIONS;case"roles":return X.ROLES;case"keys":return X.KEYS;case"access_providers":return X.ACCESS_PROVIDERS}return new A(e)};function qe(e){this.value=e}h.inherits(qe,z);we(qe,function(){return i.toString(this.value)});qe.prototype.toJSON=function(){return{"@set":this.value}};function Ce(e){if(e instanceof Date)e=e.toISOString();else if(e.charAt(e.length-1)!=="Z")throw new H.InvalidValue("Only allowed timezone is 'Z', got: "+e);this.value=e}h.inherits(Ce,z);Object.defineProperty(Ce.prototype,"date",{get:function(){return new Date(this.value)}});we(Ce,function(){return'Time("'+this.value+'")'});Ce.prototype.toJSON=function(){return{"@ts":this.value}};function Le(e){e instanceof Date&&(e=e.toISOString().slice(0,10)),this.value=e}h.inherits(Le,z);Object.defineProperty(Le.prototype,"date",{get:function(){return new Date(this.value)}});we(Le,function(){return'Date("'+this.value+'")'});Le.prototype.toJSON=function(){return{"@date":this.value}};function He(e){if(e instanceof ArrayBuffer)this.value=new Uint8Array(e);else if(typeof e=="string")this.value=Et.toByteArray(e);else if(e instanceof Uint8Array)this.value=e;else throw new H.InvalidValue("Bytes type expect argument to be either Uint8Array|ArrayBuffer|string, got: "+Xs(e))}h.inherits(He,z);we(He,function(){return'Bytes("'+Et.fromByteArray(this.value)+'")'});He.prototype.toJSON=function(){return{"@bytes":Et.fromByteArray(this.value)}};function Je(e){this.value=e}h.inherits(Je,z);we(Je,function(){return"Query("+i.toString(this.value)+")"});Je.prototype.toJSON=function(){return{"@query":this.value}};function we(e,t){e.prototype.toString=t,e.prototype.inspect=t,cn&&(e.prototype[cn]=t)}var M={Value:z,Ref:A,Native:X,SetRef:qe,FaunaTime:Ce,FaunaDate:Le,Bytes:He,Query:Je};var ln=Object.getOwnPropertySymbols,Ys=Object.prototype.hasOwnProperty,Ks=Object.prototype.propertyIsEnumerable;function Qs(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Zs(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var a=Object.getOwnPropertyNames(t).map(function(u){return t[u]});if(a.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(u){o[u]=u}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch(u){return!1}}var Ve=Zs()?Object.assign:function(e,t){for(var n,a=Qs(e),o,u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var l in n)Ys.call(n,l)&&(a[l]=n[l]);if(ln){o=ln(n);for(var f=0;f<o.length;f++)Ks.call(n,o[f])&&(a[o[f]]=n[o[f]])}}return a};function fn(){switch(s.between(1,2,arguments,fn.name),arguments.length){case 1:return new i({"@ref":r(arguments[0])});case 2:return new i({ref:r(arguments[0]),id:r(arguments[1])})}}function dn(e){return s.exact(1,arguments,dn.name),new M.Bytes(e)}function mn(e){return s.exact(1,arguments,mn.name),new i({abort:r(e)})}function hn(e,t){return s.exact(2,arguments,hn.name),new i({at:r(e),expr:r(t)})}function pn(e,t){s.exact(2,arguments,pn.name);var n=[];if(Array.isArray(e)?n=e.map(function(o){return Ge(o)}):n=Object.keys(e).map(function(o){var u={};return u[o]=r(e[o]),u}),typeof t=="function")if(Array.isArray(e)){var a=[];e.forEach(function(o){Object.keys(o).forEach(function(u){a.push(ve(u))})}),t=t.apply(null,a)}else t=t.apply(null,Object.keys(e).map(function(o){return ve(o)}));return new i({let:n,in:r(t)})}function ve(e){return s.exact(1,arguments,ve.name),new i({var:r(e)})}function gn(e,t,n){return s.exact(3,arguments,gn.name),new i({if:r(e),then:r(t),else:r(n)})}function yn(){s.min(1,arguments,yn.name);var e=$e(arguments);return new i({do:r(e)})}var wn=function(e){return s.exact(1,arguments,wn.name),new i({object:Ge(e)})};function _t(){switch(s.between(1,2,arguments,_t.name),arguments.length){case 1:var e=arguments[0];if(typeof e=="function")return eu(e);if(e instanceof i||h.checkInstanceHasProperty(e,"_isFaunaExpr"))return e;throw new H.InvalidValue("Lambda function takes either a Function or an Expr.");case 2:var t=arguments[0],n=arguments[1];return xt(t,n)}}function eu(e){var t=Xi(e);switch(t.length){case 0:throw new H.InvalidValue("Provided Function must take at least 1 argument.");case 1:return xt(t[0],e(ve(t[0])));default:return xt(t,e.apply(null,t.map(function(n){return ve(n)})))}}function xt(e,t){return new i({lambda:r(e),expr:r(t)})}function vn(e){s.min(1,arguments,vn.name);var t=$e(arguments);return t.shift(),new i({call:r(e),arguments:r(x(t))})}function bn(e){return s.exact(1,arguments,bn.name),new i({query:r(e)})}function Tn(e,t){return s.exact(2,arguments,Tn.name),new i({map:r(t),collection:r(e)})}function En(e,t){return s.exact(2,arguments,En.name),new i({foreach:r(t),collection:r(e)})}function _n(e,t){return s.exact(2,arguments,_n.name),new i({filter:r(t),collection:r(e)})}function xn(e,t){return s.exact(2,arguments,xn.name),new i({take:r(e),collection:r(t)})}function Sn(e,t){return s.exact(2,arguments,Sn.name),new i({drop:r(e),collection:r(t)})}function An(e,t){return s.exact(2,arguments,An.name),new i({prepend:r(e),collection:r(t)})}function Cn(e,t){return s.exact(2,arguments,Cn.name),new i({append:r(e),collection:r(t)})}function Ln(e){return s.exact(1,arguments,Ln.name),new i({is_empty:r(e)})}function On(e){return s.exact(1,arguments,On.name),new i({is_nonempty:r(e)})}function In(e){return s.exact(1,arguments,In.name),new i({is_number:r(e)})}function Dn(e){return s.exact(1,arguments,Dn.name),new i({is_double:r(e)})}function kn(e){return s.exact(1,arguments,kn.name),new i({is_integer:r(e)})}function Nn(e){return s.exact(1,arguments,Nn.name),new i({is_boolean:r(e)})}function Pn(e){return s.exact(1,arguments,Pn.name),new i({is_null:r(e)})}function Rn(e){return s.exact(1,arguments,Rn.name),new i({is_bytes:r(e)})}function jn(e){return s.exact(1,arguments,jn.name),new i({is_timestamp:r(e)})}function Fn(e){return s.exact(1,arguments,Fn.name),new i({is_date:r(e)})}function Bn(e){return s.exact(1,arguments,Bn.name),new i({is_string:r(e)})}function Un(e){return s.exact(1,arguments,Un.name),new i({is_array:r(e)})}function Mn(e){return s.exact(1,arguments,Mn.name),new i({is_object:r(e)})}function qn(e){return s.exact(1,arguments,qn.name),new i({is_ref:r(e)})}function Hn(e){return s.exact(1,arguments,Hn.name),new i({is_set:r(e)})}function Jn(e){return s.exact(1,arguments,Jn.name),new i({is_doc:r(e)})}function Vn(e){return s.exact(1,arguments,Vn.name),new i({is_lambda:r(e)})}function Gn(e){return s.exact(1,arguments,Gn.name),new i({is_collection:r(e)})}function $n(e){return s.exact(1,arguments,$n.name),new i({is_database:r(e)})}function Wn(e){return s.exact(1,arguments,Wn.name),new i({is_index:r(e)})}function zn(e){return s.exact(1,arguments,zn.name),new i({is_function:r(e)})}function Xn(e){return s.exact(1,arguments,Xn.name),new i({is_key:r(e)})}function Yn(e){return s.exact(1,arguments,Yn.name),new i({is_token:r(e)})}function Kn(e){return s.exact(1,arguments,Kn.name),new i({is_credentials:r(e)})}function Qn(e){return s.exact(1,arguments,Qn.name),new i({is_role:r(e)})}function Zn(e,t){return s.between(1,2,arguments,Zn.name),t=h.defaults(t,null),new i(k({get:r(e)},{ts:r(t)}))}function er(e){return s.exact(1,arguments,er.name),new i({key_from_secret:r(e)})}function tr(e,t,n){return s.exact(3,arguments,tr.name),new i({reduce:r(e),initial:r(t),collection:r(n)})}function nr(e,t){return s.between(1,2,arguments,nr.name),t=h.defaults(t,{}),new i(Ve({paginate:r(e)},Ge(t)))}function rr(e,t){return s.between(1,2,arguments,rr.name),t=h.defaults(t,null),new i(k({exists:r(e)},{ts:r(t)}))}function ar(e,t){return s.between(1,2,arguments,ar.name),new i({create:r(e),params:r(t)})}function or(e,t){return s.exact(2,arguments,or.name),new i({update:r(e),params:r(t)})}function ir(e,t){return s.exact(2,arguments,ir.name),new i({replace:r(e),params:r(t)})}function sr(e){return s.exact(1,arguments,sr.name),new i({delete:r(e)})}function ur(e,t,n,a){return s.exact(4,arguments,ur.name),new i({insert:r(e),ts:r(t),action:r(n),params:r(a)})}function cr(e,t,n){return s.exact(3,arguments,cr.name),new i({remove:r(e),ts:r(t),action:r(n)})}function lr(e){return s.exact(1,arguments,lr.name),new i({create_class:r(e)})}function fr(e){return s.exact(1,arguments,fr.name),new i({create_collection:r(e)})}function dr(e){return s.exact(1,arguments,dr.name),new i({create_database:r(e)})}function mr(e){return s.exact(1,arguments,mr.name),new i({create_index:r(e)})}function hr(e){return s.exact(1,arguments,hr.name),new i({create_key:r(e)})}function pr(e){return s.exact(1,arguments,pr.name),new i({create_function:r(e)})}function gr(e){return s.exact(1,arguments,gr.name),new i({create_role:r(e)})}function yr(e){return s.exact(1,arguments,yr.name),new i({create_access_provider:r(e)})}function wr(e){return s.exact(1,arguments,wr.name),new i({singleton:r(e)})}function vr(e){return s.exact(1,arguments,vr.name),new i({events:r(e)})}function br(e){s.min(1,arguments,br.name);var t=$e(arguments);return t.shift(),new i({match:r(e),terms:r(x(t))})}function Tr(){return s.min(1,arguments,Tr.name),new i({union:r(x(arguments))})}function Er(e,t,n){return s.between(2,3,arguments,Er.name),new i(k({merge:r(e),with:r(t)},{lambda:r(n)}))}function _r(){return s.min(1,arguments,_r.name),new i({intersection:r(x(arguments))})}function xr(){return s.min(1,arguments,xr.name),new i({difference:r(x(arguments))})}function Sr(e){return s.exact(1,arguments,Sr.name),new i({distinct:r(e)})}function Ar(e,t){return s.exact(2,arguments,Ar.name),new i({join:r(e),with:r(t)})}function Cr(e,t,n){return s.exact(3,arguments,Cr.name),new i({range:r(e),from:r(t),to:r(n)})}function Lr(e,t){return s.exact(2,arguments,Lr.name),new i({login:r(e),params:r(t)})}function Or(e){return s.exact(1,arguments,Or.name),new i({logout:r(e)})}function Ir(e,t){return s.exact(2,arguments,Ir.name),new i({identify:r(e),password:r(t)})}function Dr(){return s.exact(0,arguments,Dr.name),new i({identity:null})}function kr(){return s.exact(0,arguments,kr.name),new i({current_identity:null})}function Nr(){return s.exact(0,arguments,Nr.name),new i({has_identity:null})}function Pr(){return s.exact(0,arguments,Pr.name),new i({has_current_identity:null})}function Rr(){return s.exact(0,arguments,Rr.name),new i({current_token:null})}function jr(){return s.exact(0,arguments,jr.name),new i({has_current_token:null})}function Fr(e,t){return s.min(1,arguments,Fr.name),t=h.defaults(t,null),new i(k({concat:r(e)},{separator:r(t)}))}function Br(e,t){return s.min(1,arguments,Br.name),new i(k({casefold:r(e)},{normalizer:r(t)}))}function Ur(e,t){return s.exact(2,arguments,Ur.name),new i({containsstr:r(e),search:r(t)})}function Mr(e,t){return s.exact(2,arguments,Mr.name),new i({containsstrregex:r(e),pattern:r(t)})}function qr(e,t){return s.exact(2,arguments,qr.name),new i({startswith:r(e),search:r(t)})}function Hr(e,t){return s.exact(2,arguments,Hr.name),new i({endswith:r(e),search:r(t)})}function Jr(e){return s.exact(1,arguments,Jr.name),new i({regexescape:r(e)})}function Vr(e,t,n){return s.between(2,3,arguments,Vr.name),n=h.defaults(n,null),new i(k({findstr:r(e),find:r(t)},{start:r(n)}))}function Gr(e,t,n,a){return s.between(2,4,arguments,Gr.name),n=h.defaults(n,null),new i(k({findstrregex:r(e),pattern:r(t)},{start:r(n),num_results:r(a)}))}function $r(e){return s.exact(1,arguments,$r.name),new i({length:r(e)})}function Wr(e){return s.exact(1,arguments,Wr.name),new i({lowercase:r(e)})}function zr(e){return s.exact(1,arguments,zr.name),new i({ltrim:r(e)})}function Xr(e,t,n){return s.between(1,3,arguments,Xr.name),t=h.defaults(t,null),n=h.defaults(n,null),new i(k({ngram:r(e)},{min:r(t),max:r(n)}))}function Yr(e,t){return s.between(1,2,arguments,Yr.name),t=h.defaults(t,null),new i(k({repeat:r(e)},{number:r(t)}))}function Kr(e,t,n){return s.exact(3,arguments,Kr.name),new i({replacestr:r(e),find:r(t),replace:r(n)})}function Qr(e,t,n,a){return s.between(3,4,arguments,Qr.name),a=h.defaults(a,null),new i(k({replacestrregex:r(e),pattern:r(t),replace:r(n)},{first:r(a)}))}function Zr(e){return s.exact(1,arguments,Zr.name),new i({rtrim:r(e)})}function ea(e){return s.exact(1,arguments,ea.name),new i({space:r(e)})}function ta(e,t,n){return s.between(1,3,arguments,ta.name),t=h.defaults(t,null),n=h.defaults(n,null),new i(k({substring:r(e)},{start:r(t),length:r(n)}))}function na(e){return s.exact(1,arguments,na.name),new i({titlecase:r(e)})}function ra(e){return s.exact(1,arguments,ra.name),new i({trim:r(e)})}function aa(e){return s.exact(1,arguments,aa.name),new i({uppercase:r(e)})}function oa(e){s.min(1,arguments,oa.name);var t=$e(arguments);return t.shift(),new i({format:r(e),values:r(x(t))})}function ia(e){return s.exact(1,arguments,ia.name),new i({time:r(e)})}function sa(e,t){return s.exact(2,arguments,sa.name),new i({epoch:r(e),unit:r(t)})}function ua(e,t,n){return s.exact(3,arguments,ua.name),new i({time_add:r(e),offset:r(t),unit:r(n)})}function ca(e,t,n){return s.exact(3,arguments,ca.name),new i({time_subtract:r(e),offset:r(t),unit:r(n)})}function la(e,t,n){return s.exact(3,arguments,la.name),new i({time_diff:r(e),other:r(t),unit:r(n)})}function fa(e){return s.exact(1,arguments,fa.name),new i({date:r(e)})}function da(){return s.exact(0,arguments,da.name),new i({now:r(null)})}function ma(){return s.exact(0,arguments,ma.name),new i({next_id:null})}function ha(){return s.exact(0,arguments,ha.name),new i({new_id:null})}function pa(e,t){switch(s.between(1,2,arguments,pa.name),arguments.length){case 1:return new i({database:r(e)});case 2:return new i({database:r(e),scope:r(t)})}}function ga(e,t){switch(s.between(1,2,arguments,ga.name),arguments.length){case 1:return new i({index:r(e)});case 2:return new i({index:r(e),scope:r(t)})}}function ya(e,t){switch(s.between(1,2,arguments,ya.name),arguments.length){case 1:return new i({class:r(e)});case 2:return new i({class:r(e),scope:r(t)})}}function wa(e,t){switch(s.between(1,2,arguments,wa.name),arguments.length){case 1:return new i({collection:r(e)});case 2:return new i({collection:r(e),scope:r(t)})}}function va(e,t){switch(s.between(1,2,arguments,va.name),arguments.length){case 1:return new i({function:r(e)});case 2:return new i({function:r(e),scope:r(t)})}}function ba(e,t){return s.between(1,2,arguments,ba.name),t=h.defaults(t,null),new i(k({role:r(e)},{scope:r(t)}))}function Ta(e){return s.max(1,arguments,Ta.name),e=h.defaults(e,null),new i({access_providers:r(e)})}function Ea(e){return s.max(1,arguments,Ea.name),e=h.defaults(e,null),new i({classes:r(e)})}function _a(e){return s.max(1,arguments,_a.name),e=h.defaults(e,null),new i({collections:r(e)})}function xa(e){return s.max(1,arguments,xa.name),e=h.defaults(e,null),new i({databases:r(e)})}function Sa(e){return s.max(1,arguments,Sa.name),e=h.defaults(e,null),new i({indexes:r(e)})}function Aa(e){return s.max(1,arguments,Aa.name),e=h.defaults(e,null),new i({functions:r(e)})}function Ca(e){return s.max(1,arguments,Ca.name),e=h.defaults(e,null),new i({roles:r(e)})}function La(e){return s.max(1,arguments,La.name),e=h.defaults(e,null),new i({keys:r(e)})}function Oa(e){return s.max(1,arguments,Oa.name),e=h.defaults(e,null),new i({tokens:r(e)})}function Ia(e){return s.max(1,arguments,Ia.name),e=h.defaults(e,null),new i({credentials:r(e)})}function Da(){return s.min(1,arguments,Da.name),new i({equals:r(x(arguments))})}function ka(e,t){return s.exact(2,arguments,ka.name),new i({contains:r(e),in:r(t)})}function Na(e,t){return s.exact(2,arguments,Na.name),new i({contains_value:r(e),in:r(t)})}function Pa(e,t){return s.exact(2,arguments,Pa.name),new i({contains_field:r(e),in:r(t)})}function Ra(e,t){return s.exact(2,arguments,Ra.name),new i({contains_path:r(e),in:r(t)})}function ja(e,t,n){s.between(2,3,arguments,ja.name);var a={select:r(e),from:r(t)};return n!==void 0&&(a.default=r(n)),new i(a)}function Fa(e,t){return s.exact(2,arguments,Fa.name),new i({select_all:r(e),from:r(t)})}function Ba(e){return s.exact(1,arguments,Ba.name),new i({abs:r(e)})}function Ua(){return s.min(1,arguments,Ua.name),new i({add:r(x(arguments))})}function Ma(){return s.min(1,arguments,Ma.name),new i({bitand:r(x(arguments))})}function qa(e){return s.exact(1,arguments,qa.name),new i({bitnot:r(e)})}function Ha(){return s.min(1,arguments,Ha.name),new i({bitor:r(x(arguments))})}function Ja(){return s.min(1,arguments,Ja.name),new i({bitxor:r(x(arguments))})}function Va(e){return s.exact(1,arguments,Va.name),new i({ceil:r(e)})}function Ga(){return s.min(1,arguments,Ga.name),new i({divide:r(x(arguments))})}function $a(e){return s.exact(1,arguments,$a.name),new i({floor:r(e)})}function Wa(){return s.min(1,arguments,Wa.name),new i({max:r(x(arguments))})}function za(){return s.min(1,arguments,za.name),new i({min:r(x(arguments))})}function Xa(){return s.min(1,arguments,Xa.name),new i({modulo:r(x(arguments))})}function Ya(){return s.min(1,arguments,Ya.name),new i({multiply:r(x(arguments))})}function Ka(e,t){return s.min(1,arguments,Ka.name),t=h.defaults(t,null),new i(k({round:r(e)},{precision:r(t)}))}function Qa(){return s.min(1,arguments,Qa.name),new i({subtract:r(x(arguments))})}function Za(e){return s.exact(1,arguments,Za.name),new i({sign:r(e)})}function eo(e){return s.exact(1,arguments,eo.name),new i({sqrt:r(e)})}function to(e,t){return s.min(1,arguments,to.name),t=h.defaults(t,null),new i(k({trunc:r(e)},{precision:r(t)}))}function no(e){return s.exact(1,arguments,no.name),new i({count:r(e)})}function ro(e){return s.exact(1,arguments,ro.name),new i({sum:r(e)})}function ao(e){return s.exact(1,arguments,ao.name),new i({mean:r(e)})}function oo(e){return s.exact(1,arguments,oo.name),new i({any:r(e)})}function io(e){return s.exact(1,arguments,io.name),new i({all:r(e)})}function so(e){return s.exact(1,arguments,so.name),new i({acos:r(e)})}function uo(e){return s.exact(1,arguments,uo.name),new i({asin:r(e)})}function co(e){return s.exact(1,arguments,co.name),new i({atan:r(e)})}function lo(e){return s.exact(1,arguments,lo.name),new i({cos:r(e)})}function fo(e){return s.exact(1,arguments,fo.name),new i({cosh:r(e)})}function mo(e){return s.exact(1,arguments,mo.name),new i({degrees:r(e)})}function ho(e){return s.exact(1,arguments,ho.name),new i({exp:r(e)})}function po(e,t){return s.min(1,arguments,po.name),t=h.defaults(t,null),new i(k({hypot:r(e)},{b:r(t)}))}function go(e){return s.exact(1,arguments,go.name),new i({ln:r(e)})}function yo(e){return s.exact(1,arguments,yo.name),new i({log:r(e)})}function wo(e,t){return s.min(1,arguments,wo.name),t=h.defaults(t,null),new i(k({pow:r(e)},{exp:r(t)}))}function vo(e){return s.exact(1,arguments,vo.name),new i({radians:r(e)})}function bo(e){return s.exact(1,arguments,bo.name),new i({sin:r(e)})}function To(e){return s.exact(1,arguments,To.name),new i({sinh:r(e)})}function Eo(e){return s.exact(1,arguments,Eo.name),new i({tan:r(e)})}function _o(e){return s.exact(1,arguments,_o.name),new i({tanh:r(e)})}function xo(){return s.min(1,arguments,xo.name),new i({lt:r(x(arguments))})}function So(){return s.min(1,arguments,So.name),new i({lte:r(x(arguments))})}function Ao(){return s.min(1,arguments,Ao.name),new i({gt:r(x(arguments))})}function Co(){return s.min(1,arguments,Co.name),new i({gte:r(x(arguments))})}function Lo(){return s.min(1,arguments,Lo.name),new i({and:r(x(arguments))})}function Oo(){return s.min(1,arguments,Oo.name),new i({or:r(x(arguments))})}function Io(e){return s.exact(1,arguments,Io.name),new i({not:r(e)})}function Do(e){return s.exact(1,arguments,Do.name),new i({to_string:r(e)})}function ko(e){return s.exact(1,arguments,ko.name),new i({to_number:r(e)})}function No(e){return s.exact(1,arguments,No.name),new i({to_object:r(e)})}function Po(e){return s.exact(1,arguments,Po.name),new i({to_array:r(e)})}function Ro(e){return s.exact(1,arguments,Ro.name),new i({to_double:r(e)})}function jo(e){return s.exact(1,arguments,jo.name),new i({to_integer:r(e)})}function Fo(e){return s.exact(1,arguments,Fo.name),new i({to_time:r(e)})}function Bo(e){return s.exact(1,arguments,Bo.name),new i({to_seconds:r(e)})}function Uo(e){return s.exact(1,arguments,Uo.name),new i({to_millis:r(e)})}function Mo(e){return s.exact(1,arguments,Mo.name),new i({to_micros:r(e)})}function qo(e){return s.exact(1,arguments,qo.name),new i({day_of_week:r(e)})}function Ho(e){return s.exact(1,arguments,Ho.name),new i({day_of_year:r(e)})}function Jo(e){return s.exact(1,arguments,Jo.name),new i({day_of_month:r(e)})}function Vo(e){return s.exact(1,arguments,Vo.name),new i({hour:r(e)})}function Go(e){return s.exact(1,arguments,Go.name),new i({minute:r(e)})}function $o(e){return s.exact(1,arguments,$o.name),new i({second:r(e)})}function Wo(e){return s.exact(1,arguments,Wo.name),new i({month:r(e)})}function zo(e){return s.exact(1,arguments,zo.name),new i({year:r(e)})}function Xo(e){return s.exact(1,arguments,Xo.name),new i({to_date:r(e)})}function Yo(e,t){return s.exact(2,arguments,Yo.name),new i({move_database:r(e),to:r(t)})}function Ko(e){return s.exact(1,arguments,Ko.name),new i({documents:r(e)})}function Qo(e){return s.exact(1,arguments,Qo.name),new i({reverse:r(e)})}function Zo(e){return s.exact(1,arguments,Zo.name),new i({access_provider:r(e)})}function s(e,t,n,a){if(e!==null&&n.length<e||t!==null&&n.length>t)throw new H.InvalidArity(e,t,n.length,a)}s.exact=function(e,t,n){s(e,e,t,n)};s.max=function(e,t,n){s(null,e,t,n)};s.min=function(e,t,n){s(e,null,t,n)};s.between=function(e,t,n,a){s(e,t,n,a)};function k(e,t){for(var n in t){var a=t[n];a!==null&&(e[n]=a)}return e}function x(e){var t=Array.isArray(e)?e:Array.prototype.slice.call(e);return e.length===1?e[0]:t}function $e(e){var t=[];return t.push.apply(t,e),t}function r(e){return s.exact(1,arguments,r.name),e===null?null:e instanceof i||h.checkInstanceHasProperty(e,"_isFaunaExpr")?e:typeof e=="symbol"?e.toString().replace(/Symbol\((.*)\)/,function(t,n){return n}):typeof e=="function"?_t(e):Array.isArray(e)?new i(e.map(function(t){return r(t)})):e instanceof Uint8Array||e instanceof ArrayBuffer?new M.Bytes(e):typeof e=="object"?new i({object:Ge(e)}):e}function Ge(e){if(e!==null){var t={};return Object.keys(e).forEach(function(n){t[n]=r(e[n])}),t}else return null}var ae={Ref:fn,Bytes:dn,Abort:mn,At:hn,Let:pn,Var:ve,If:gn,Do:yn,Object:wn,Lambda:_t,Call:vn,Query:bn,Map:Tn,Foreach:En,Filter:_n,Take:xn,Drop:Sn,Prepend:An,Append:Cn,IsEmpty:Ln,IsNonEmpty:On,IsNumber:In,IsDouble:Dn,IsInteger:kn,IsBoolean:Nn,IsNull:Pn,IsBytes:Rn,IsTimestamp:jn,IsDate:Fn,IsString:Bn,IsArray:Un,IsObject:Mn,IsRef:qn,IsSet:Hn,IsDoc:Jn,IsLambda:Vn,IsCollection:Gn,IsDatabase:$n,IsIndex:Wn,IsFunction:zn,IsKey:Xn,IsToken:Yn,IsCredentials:Kn,IsRole:Qn,Get:Zn,KeyFromSecret:er,Reduce:tr,Paginate:nr,Exists:rr,Create:ar,Update:or,Replace:ir,Delete:sr,Insert:ur,Remove:cr,CreateClass:$(lr,"CreateClass() is deprecated, use CreateCollection() instead"),CreateCollection:fr,CreateDatabase:dr,CreateIndex:mr,CreateKey:hr,CreateFunction:pr,CreateRole:gr,CreateAccessProvider:yr,Singleton:wr,Events:vr,Match:br,Union:Tr,Merge:Er,Intersection:_r,Difference:xr,Distinct:Sr,Join:Ar,Range:Cr,Login:Lr,Logout:Or,Identify:Ir,Identity:$(Dr,"Identity() is deprecated, use CurrentIdentity() instead"),CurrentIdentity:kr,HasIdentity:$(Nr,"HasIdentity() is deprecated, use HasCurrentIdentity() instead"),HasCurrentIdentity:Pr,CurrentToken:Rr,HasCurrentToken:jr,Concat:Fr,Casefold:Br,ContainsStr:Ur,ContainsStrRegex:Mr,StartsWith:qr,EndsWith:Hr,FindStr:Vr,FindStrRegex:Gr,Length:$r,LowerCase:Wr,LTrim:zr,NGram:Xr,Repeat:Yr,ReplaceStr:Kr,ReplaceStrRegex:Qr,RegexEscape:Jr,RTrim:Zr,Space:ea,SubString:ta,TitleCase:na,Trim:ra,UpperCase:aa,Format:oa,Time:ia,TimeAdd:ua,TimeSubtract:ca,TimeDiff:la,Epoch:sa,Date:fa,Now:da,NextId:$(ma,"NextId() is deprecated, use NewId() instead"),NewId:ha,Database:pa,Index:ga,Class:$(ya,"Class() is deprecated, use Collection() instead"),Collection:wa,Function:va,Role:ba,AccessProviders:Ta,Classes:$(Ea,"Classes() is deprecated, use Collections() instead"),Collections:_a,Databases:xa,Indexes:Sa,Functions:Aa,Roles:Ca,Keys:La,Tokens:Oa,Credentials:Ia,Equals:Da,Contains:$(ka,"Contains() is deprecated, use ContainsPath() instead"),ContainsPath:Ra,ContainsField:Pa,ContainsValue:Na,Select:ja,SelectAll:$(Fa,"SelectAll() is deprecated. Avoid use."),Abs:Ba,Add:Ua,BitAnd:Ma,BitNot:qa,BitOr:Ha,BitXor:Ja,Ceil:Va,Divide:Ga,Floor:$a,Max:Wa,Min:za,Modulo:Xa,Multiply:Ya,Round:Ka,Subtract:Qa,Sign:Za,Sqrt:eo,Trunc:to,Count:no,Sum:ro,Mean:ao,Any:oo,All:io,Acos:so,Asin:uo,Atan:co,Cos:lo,Cosh:fo,Degrees:mo,Exp:ho,Hypot:po,Ln:go,Log:yo,Pow:wo,Radians:vo,Sin:bo,Sinh:To,Tan:Eo,Tanh:_o,LT:xo,LTE:So,GT:Ao,GTE:Co,And:Lo,Or:Oo,Not:Io,ToString:Do,ToNumber:ko,ToObject:No,ToArray:Po,ToDouble:Ro,ToInteger:jo,ToTime:Fo,ToSeconds:Bo,ToMicros:Mo,ToMillis:Uo,DayOfMonth:Jo,DayOfWeek:qo,DayOfYear:Ho,Second:$o,Minute:Go,Hour:Vo,Month:Wo,Year:zo,ToDate:Xo,MoveDatabase:Yo,Documents:Ko,Reverse:Qo,AccessProvider:Zo,wrap:r};function B(e,t,n,a){n===void 0&&(n={}),a===void 0&&(a={}),this.reverse=!1,this.params={},this.before=void 0,this.after=void 0,Ve(this.params,n);var o=this.params.cursor||this.params;"before"in o?(this.before=o.before,delete o.before):"after"in o&&(this.after=o.after,delete o.after),this.options={},Ve(this.options,a),this.client=e,this.set=t,this._faunaFunctions=[]}B.prototype.map=function(e){var t=this._clone();return t._faunaFunctions.push(function(n){return ae.Map(n,e)}),t};B.prototype.filter=function(e){var t=this._clone();return t._faunaFunctions.push(function(n){return ae.Filter(n,e)}),t};B.prototype.each=function(e){return this._retrieveNextPage(this.after,!1).then(this._consumePages(e,!1))};B.prototype.eachReverse=function(e){return this._retrieveNextPage(this.before,!0).then(this._consumePages(e,!0))};B.prototype.previousPage=function(){var e=this;return this._retrieveNextPage(this.before,!0).then(this._adjustCursors.bind(e))};B.prototype.nextPage=function(){var e=this;return this._retrieveNextPage(this.after,!1).then(this._adjustCursors.bind(e))};B.prototype._adjustCursors=function(e){return e.after!==void 0&&(this.after=e.after),e.before!==void 0&&(this.before=e.before),e.data};B.prototype._consumePages=function(e,t){var n=this;return function(a){var o=[];a.data.forEach(function(l){l.document&&(l.instance=l.document),l.value&&l.value.document&&(l.value.instance=l.value.document),o.push(l)}),e(o);var u;return t?u=a.before:u=a.after,u!==void 0?n._retrieveNextPage(u,t).then(n._consumePages(e,t)):Promise.resolve()}};B.prototype._retrieveNextPage=function(e,t){var n={};Ve(n,this.params);var a=n.cursor||n;e!==void 0?t?a.before=e:a.after=e:t&&(a.before=null);var o=ae.Paginate(this.set,n);return this._faunaFunctions.length>0&&this._faunaFunctions.forEach(function(u){o=u(o)}),this.client.query(o,this.options)};B.prototype._clone=function(){return Object.create(B.prototype,{client:{value:this.client},set:{value:this.set},_faunaFunctions:{value:this._faunaFunctions},before:{value:this.before},after:{value:this.after}})};var ei=B;function ti(e,t,n,a,o,u,l,f,m,p,v){this.method=e,this.path=t,this.query=n,this.requestRaw=a,this.requestContent=o,this.responseRaw=u,this.responseContent=l,this.statusCode=f,this.responseHeaders=m,this.startTime=p,this.endTime=v}Object.defineProperty(ti.prototype,"timeTaken",{get:function(){return this.endTime-this.startTime}});var St=ti,tu=[["faunadb@4.1.1","D:\\WebDev\\GitHub\\todos-js-snowpack-tailwind"]],nu="faunadb@4.1.1",ru="faunadb@4.1.1",au=!1,ou="sha512-ekHtUgt+heYbaZXMWMB00Q7+DCiPKAubs2zbpNc4oMKamRxbL39MyzdNQNnCcSGOAJcLHPJbgOlDHK4y0Rkwrw==",iu="/faunadb",su={},uu={type:"version",registry:!0,raw:"faunadb@4.1.1",name:"faunadb",escapedName:"faunadb",rawSpec:"4.1.1",saveSpec:null,fetchSpec:"4.1.1"},cu=["/"],lu="https://registry.npmjs.org/faunadb/-/faunadb-4.1.1.tgz",fu="4.1.1",du="D:\\WebDev\\GitHub\\todos-js-snowpack-tailwind",mu="4",hu={http2:!1,http:!1,https:!1,os:!1,util:!1},pu={url:"https://github.com/fauna/faunadb-js/issues"},gu={"abort-controller":"^3.0.0","base64-js":"^1.2.0","browser-detect":"^0.2.28","btoa-lite":"^1.0.0","cross-fetch":"^3.0.6",dotenv:"^8.2.0","fn-annotate":"^1.1.3","object-assign":"^4.1.0","util-deprecate":"^1.0.2"},yu="FaunaDB Javascript driver for Node.JS and Browsers",wu={browserify:"^16.2.2",eslint:"^5.3.0","eslint-config-prettier":"^6.5.0","eslint-plugin-prettier":"^3.1.1",husky:">=1","ink-docstrap":"^1.2.1",jest:"^24.9.0",jsdoc:"^3.6.3","lint-staged":">=8",prettier:"1.18.2","semantic-release":"^17.1.2",terser:"^4.3.9",webpack:"^5.23.0","webpack-cli":"^4.5.0"},vu=["index.d.ts","src/","dist/"],bu="https://fauna.com",Tu={hooks:{"pre-commit":"lint-staged"}},Eu=["database","fauna","official","driver"],_u="MPL-2.0",xu="index.js",Su="faunadb",Au={branches:["master"]},Cu={type:"git",url:"git+https://github.com/fauna/faunadb-js.git"},Lu={browserify:"browserify index.js --standalone faunadb -o dist/faunadb.js","browserify-min":"browserify index.js --standalone faunadb | terser -c -m --keep-fnames --keep-classnames -o dist/faunadb-min.js",doc:"jsdoc -c ./jsdoc.json",prettify:'prettier --write "{src,test}/**/*.{js,ts}"',"semantic-release":"semantic-release",test:"jest --env=node --verbose=false ./test",wp:"webpack"},Ou="index.d.ts",Iu="4.1.1",ni={_args:tu,_from:nu,_id:ru,_inBundle:au,_integrity:ou,_location:iu,_phantomChildren:su,_requested:uu,_requiredBy:cu,_resolved:lu,_spec:fu,_where:du,apiVersion:mu,browser:hu,bugs:pu,dependencies:gu,description:yu,devDependencies:wu,files:vu,homepage:bu,husky:Tu,keywords:Eu,license:_u,"lint-staged":{"*.{js,css,json,md}":["prettier --write","git add"],"*.js":["eslint --fix","git add"]},main:xu,name:Su,release:Au,repository:Cu,scripts:Lu,types:Ou,version:Iu};function ri(e){Error.call(this),this.message=e||"Request aborted due to timeout",this.isTimeoutError=!0}h.inherits(ri,Error);function ai(e){Error.call(this),this.message=e||"Request aborted",this.isAbortError=!0}h.inherits(ai,Error);var be={TimeoutError:ri,AbortError:ai},Du=1e3*60,oi="stream::";function We(){this.type="http2",this._sessionMap={}}We.prototype._resolveSessionFor=function(e,t){var n=t?oi+e:e;if(!this._sessionMap[n]){var a=this,o=function(){a._cleanupSessionFor(e,t)};this._sessionMap[n]=V.connect(e).once("error",o).once("goaway",o).setTimeout(Du,o)}return this._sessionMap[n]};We.prototype._cleanupSessionFor=function(e,t){var n=t?oi+e:e;this._sessionMap[n]&&(this._sessionMap[n].close(),delete this._sessionMap[n])};We.prototype.execute=function(e){var t=this,n=e.streamConsumer!=null;return new Promise(function(a,o){var u=!1,l=!1,f=function(N){u=!0,a(N)},m=function(N){if(u&&n)return e.streamConsumer.onError(N);u=!0,o(N)},p=function(){e.signal&&e.signal.removeEventListener("abort",E)},v=function(N){p(),m(N)},E=function(){l=!0,p(),ee.close(V.constants.NGHTTP2_CANCEL),m(new be.AbortError)},b=function(){l=!0,p(),ee.close(V.constants.NGHTTP2_CANCEL),m(new be.TimeoutError)},Z=function(N){var ue=N[V.constants.HTTP2_HEADER_STATUS],st=ue>=200&&ue<400,Se=st&&n,q="",ut=function(R){if(Se)return e.streamConsumer.onData(R);q+=R},ct=function(){if(p(),!Se)return f({body:q,headers:N,status:ue});l||e.streamConsumer.onError(new TypeError("network error"))};Se&&f({body:"[stream]",headers:N,status:ue}),ee.on("data",ut).on("end",ct)};try{var Re=(e.path[0]==="/"?e.path:"/"+e.path)+h.querystringify(e.query,"?"),ot=Object.assign({},e.headers,{[V.constants.HTTP2_HEADER_PATH]:Re,[V.constants.HTTP2_HEADER_METHOD]:e.method}),it=t._resolveSessionFor(e.origin,n),ee=it.request(ot).setEncoding("utf8").on("error",v).on("response",Z);!e.signal&&e.timeout&&ee.setTimeout(e.timeout,b),e.signal&&e.signal.addEventListener("abort",E),e.body!=null&&ee.write(e.body),ee.end()}catch(N){t._cleanupSessionFor(e.origin,n),m(N)}})};var ku=We,ii=new WeakMap,At=new WeakMap;function _(e){let t=ii.get(e);return console.assert(t!=null,"'this' is expected an Event object, but got",e),t}function si(e){if(e.passiveListener!=null){typeof console!="undefined"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",e.passiveListener);return}!e.event.cancelable||(e.canceled=!0,typeof e.event.preventDefault=="function"&&e.event.preventDefault())}function Te(e,t){ii.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let n=Object.keys(t);for(let a=0;a<n.length;++a){let o=n[a];o in this||Object.defineProperty(this,o,ui(o))}}Te.prototype={get type(){return _(this).event.type},get target(){return _(this).eventTarget},get currentTarget(){return _(this).currentTarget},composedPath(){let e=_(this).currentTarget;return e==null?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return _(this).eventPhase},stopPropagation(){let e=_(this);e.stopped=!0,typeof e.event.stopPropagation=="function"&&e.event.stopPropagation()},stopImmediatePropagation(){let e=_(this);e.stopped=!0,e.immediateStopped=!0,typeof e.event.stopImmediatePropagation=="function"&&e.event.stopImmediatePropagation()},get bubbles(){return Boolean(_(this).event.bubbles)},get cancelable(){return Boolean(_(this).event.cancelable)},preventDefault(){si(_(this))},get defaultPrevented(){return _(this).canceled},get composed(){return Boolean(_(this).event.composed)},get timeStamp(){return _(this).timeStamp},get srcElement(){return _(this).eventTarget},get cancelBubble(){return _(this).stopped},set cancelBubble(e){if(!e)return;let t=_(this);t.stopped=!0,typeof t.event.cancelBubble=="boolean"&&(t.event.cancelBubble=!0)},get returnValue(){return!_(this).canceled},set returnValue(e){e||si(_(this))},initEvent(){}};Object.defineProperty(Te.prototype,"constructor",{value:Te,configurable:!0,writable:!0});typeof window!="undefined"&&typeof window.Event!="undefined"&&(Object.setPrototypeOf(Te.prototype,window.Event.prototype),At.set(window.Event.prototype,Te));function ui(e){return{get(){return _(this).event[e]},set(t){_(this).event[e]=t},configurable:!0,enumerable:!0}}function Nu(e){return{value(){let t=_(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}function Pu(e,t){let n=Object.keys(t);if(n.length===0)return e;function a(o,u){e.call(this,o,u)}a.prototype=Object.create(e.prototype,{constructor:{value:a,configurable:!0,writable:!0}});for(let o=0;o<n.length;++o){let u=n[o];if(!(u in e.prototype)){let f=typeof Object.getOwnPropertyDescriptor(t,u).value=="function";Object.defineProperty(a.prototype,u,f?Nu(u):ui(u))}}return a}function ci(e){if(e==null||e===Object.prototype)return Te;let t=At.get(e);return t==null&&(t=Pu(ci(Object.getPrototypeOf(e)),e),At.set(e,t)),t}function Ru(e,t){let n=ci(Object.getPrototypeOf(t));return new n(e,t)}function ju(e){return _(e).immediateStopped}function Fu(e,t){_(e).eventPhase=t}function Bu(e,t){_(e).currentTarget=t}function li(e,t){_(e).passiveListener=t}var fi=new WeakMap,di=1,mi=2,ze=3;function Xe(e){return e!==null&&typeof e=="object"}function Oe(e){let t=fi.get(e);if(t==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}function Uu(e){return{get(){let n=Oe(this).get(e);for(;n!=null;){if(n.listenerType===ze)return n.listener;n=n.next}return null},set(t){typeof t!="function"&&!Xe(t)&&(t=null);let n=Oe(this),a=null,o=n.get(e);for(;o!=null;)o.listenerType===ze?a!==null?a.next=o.next:o.next!==null?n.set(e,o.next):n.delete(e):a=o,o=o.next;if(t!==null){let u={listener:t,listenerType:ze,passive:!1,once:!1,next:null};a===null?n.set(e,u):a.next=u}},configurable:!0,enumerable:!0}}function hi(e,t){Object.defineProperty(e,`on${t}`,Uu(t))}function pi(e){function t(){Y.call(this)}t.prototype=Object.create(Y.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let n=0;n<e.length;++n)hi(t.prototype,e[n]);return t}function Y(){if(this instanceof Y){fi.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return pi(arguments[0]);if(arguments.length>0){let e=new Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return pi(e)}throw new TypeError("Cannot call a class as a function")}Y.prototype={addEventListener(e,t,n){if(t==null)return;if(typeof t!="function"&&!Xe(t))throw new TypeError("'listener' should be a function or an object.");let a=Oe(this),o=Xe(n),l=Boolean(o?n.capture:n)?di:mi,f={listener:t,listenerType:l,passive:o&&Boolean(n.passive),once:o&&Boolean(n.once),next:null},m=a.get(e);if(m===void 0){a.set(e,f);return}let p=null;for(;m!=null;){if(m.listener===t&&m.listenerType===l)return;p=m,m=m.next}p.next=f},removeEventListener(e,t,n){if(t==null)return;let a=Oe(this),u=(Xe(n)?Boolean(n.capture):Boolean(n))?di:mi,l=null,f=a.get(e);for(;f!=null;){if(f.listener===t&&f.listenerType===u){l!==null?l.next=f.next:f.next!==null?a.set(e,f.next):a.delete(e);return}l=f,f=f.next}},dispatchEvent(e){if(e==null||typeof e.type!="string")throw new TypeError('"event.type" should be a string.');let t=Oe(this),n=e.type,a=t.get(n);if(a==null)return!0;let o=Ru(this,e),u=null;for(;a!=null;){if(a.once?u!==null?u.next=a.next:a.next!==null?t.set(n,a.next):t.delete(n):u=a,li(o,a.passive?a.listener:null),typeof a.listener=="function")try{a.listener.call(this,o)}catch(l){typeof console!="undefined"&&typeof console.error=="function"&&console.error(l)}else a.listenerType!==ze&&typeof a.listener.handleEvent=="function"&&a.listener.handleEvent(o);if(ju(o))break;a=a.next}return li(o,null),Fu(o,0),Bu(o,null),!o.defaultPrevented}};Object.defineProperty(Y.prototype,"constructor",{value:Y,configurable:!0,writable:!0});typeof window!="undefined"&&typeof window.EventTarget!="undefined"&&Object.setPrototypeOf(Y.prototype,window.EventTarget.prototype);var Ee=class extends Y{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let t=Ye.get(this);if(typeof t!="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return t}};hi(Ee.prototype,"abort");function Mu(){let e=Object.create(Ee.prototype);return Y.call(e),Ye.set(e,!1),e}function qu(e){Ye.get(e)===!1&&(Ye.set(e,!0),e.dispatchEvent({type:"abort"}))}var Ye=new WeakMap;Object.defineProperties(Ee.prototype,{aborted:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ee.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var Ke=class{constructor(){gi.set(this,Mu())}get signal(){return yi(this)}abort(){qu(yi(this))}},gi=new WeakMap;function yi(e){let t=gi.get(e);if(t==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${e===null?"null":typeof e}`);return t}Object.defineProperties(Ke.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ke.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});var Ie=typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:void 0;Ie&&(typeof Ie.AbortController=="undefined"&&(Ie.AbortController=Ke),typeof Ie.AbortSignal=="undefined"&&(Ie.AbortSignal=Ee));var Hu=Ki(function(e,t){var n=function(a){function o(){this.fetch=!1,this.DOMException=a.DOMException}return o.prototype=a,new o}(typeof self!="undefined"?self:te);(function(a){(function(o){var u={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch(c){return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(c){return c&&DataView.prototype.isPrototypeOf(c)}if(u.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=ArrayBuffer.isView||function(c){return c&&f.indexOf(Object.prototype.toString.call(c))>-1};function p(c){if(typeof c!="string"&&(c=String(c)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(c))throw new TypeError("Invalid character in header field name");return c.toLowerCase()}function v(c){return typeof c!="string"&&(c=String(c)),c}function E(c){var d={next:function(){var w=c.shift();return{done:w===void 0,value:w}}};return u.iterable&&(d[Symbol.iterator]=function(){return d}),d}function b(c){this.map={},c instanceof b?c.forEach(function(d,w){this.append(w,d)},this):Array.isArray(c)?c.forEach(function(d){this.append(d[0],d[1])},this):c&&Object.getOwnPropertyNames(c).forEach(function(d){this.append(d,c[d])},this)}b.prototype.append=function(c,d){c=p(c),d=v(d);var w=this.map[c];this.map[c]=w?w+", "+d:d},b.prototype.delete=function(c){delete this.map[p(c)]},b.prototype.get=function(c){return c=p(c),this.has(c)?this.map[c]:null},b.prototype.has=function(c){return this.map.hasOwnProperty(p(c))},b.prototype.set=function(c,d){this.map[p(c)]=v(d)},b.prototype.forEach=function(c,d){for(var w in this.map)this.map.hasOwnProperty(w)&&c.call(d,this.map[w],w,this)},b.prototype.keys=function(){var c=[];return this.forEach(function(d,w){c.push(w)}),E(c)},b.prototype.values=function(){var c=[];return this.forEach(function(d){c.push(d)}),E(c)},b.prototype.entries=function(){var c=[];return this.forEach(function(d,w){c.push([w,d])}),E(c)},u.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function Z(c){if(c.bodyUsed)return Promise.reject(new TypeError("Already read"));c.bodyUsed=!0}function Re(c){return new Promise(function(d,w){c.onload=function(){d(c.result)},c.onerror=function(){w(c.error)}})}function ot(c){var d=new FileReader,w=Re(d);return d.readAsArrayBuffer(c),w}function it(c){var d=new FileReader,w=Re(d);return d.readAsText(c),w}function ee(c){for(var d=new Uint8Array(c),w=new Array(d.length),D=0;D<d.length;D++)w[D]=String.fromCharCode(d[D]);return w.join("")}function N(c){if(c.slice)return c.slice(0);var d=new Uint8Array(c.byteLength);return d.set(new Uint8Array(c)),d.buffer}function ue(){return this.bodyUsed=!1,this._initBody=function(c){this._bodyInit=c,c?typeof c=="string"?this._bodyText=c:u.blob&&Blob.prototype.isPrototypeOf(c)?this._bodyBlob=c:u.formData&&FormData.prototype.isPrototypeOf(c)?this._bodyFormData=c:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)?this._bodyText=c.toString():u.arrayBuffer&&u.blob&&l(c)?(this._bodyArrayBuffer=N(c.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(c)||m(c))?this._bodyArrayBuffer=N(c):this._bodyText=c=Object.prototype.toString.call(c):this._bodyText="",this.headers.get("content-type")||(typeof c=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var c=Z(this);if(c)return c;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Z(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ot)}),this.text=function(){var c=Z(this);if(c)return c;if(this._bodyBlob)return it(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(ee(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(ut)}),this.json=function(){return this.text().then(JSON.parse)},this}var st=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Se(c){var d=c.toUpperCase();return st.indexOf(d)>-1?d:c}function q(c,d){d=d||{};var w=d.body;if(c instanceof q){if(c.bodyUsed)throw new TypeError("Already read");this.url=c.url,this.credentials=c.credentials,d.headers||(this.headers=new b(c.headers)),this.method=c.method,this.mode=c.mode,this.signal=c.signal,!w&&c._bodyInit!=null&&(w=c._bodyInit,c.bodyUsed=!0)}else this.url=String(c);if(this.credentials=d.credentials||this.credentials||"same-origin",(d.headers||!this.headers)&&(this.headers=new b(d.headers)),this.method=Se(d.method||this.method||"GET"),this.mode=d.mode||this.mode||null,this.signal=d.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&w)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(w)}q.prototype.clone=function(){return new q(this,{body:this._bodyInit})};function ut(c){var d=new FormData;return c.trim().split("&").forEach(function(w){if(w){var D=w.split("="),I=D.shift().replace(/\+/g," "),T=D.join("=").replace(/\+/g," ");d.append(decodeURIComponent(I),decodeURIComponent(T))}}),d}function ct(c){var d=new b,w=c.replace(/\r?\n[\t ]+/g," ");return w.split(/\r?\n/).forEach(function(D){var I=D.split(":"),T=I.shift().trim();if(T){var je=I.join(":").trim();d.append(T,je)}}),d}ue.call(q.prototype);function R(c,d){d||(d={}),this.type="default",this.status=d.status===void 0?200:d.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in d?d.statusText:"OK",this.headers=new b(d.headers),this.url=d.url||"",this._initBody(c)}ue.call(R.prototype),R.prototype.clone=function(){return new R(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},R.error=function(){var c=new R(null,{status:0,statusText:""});return c.type="error",c};var Wi=[301,302,303,307,308];R.redirect=function(c,d){if(Wi.indexOf(d)===-1)throw new RangeError("Invalid status code");return new R(null,{status:d,headers:{location:c}})},o.DOMException=a.DOMException;try{new o.DOMException}catch(c){o.DOMException=function(d,w){this.message=d,this.name=w;var D=Error(d);this.stack=D.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function lt(c,d){return new Promise(function(w,D){var I=new q(c,d);if(I.signal&&I.signal.aborted)return D(new o.DOMException("Aborted","AbortError"));var T=new XMLHttpRequest;function je(){T.abort()}T.onload=function(){var Ae={status:T.status,statusText:T.statusText,headers:ct(T.getAllResponseHeaders()||"")};Ae.url="responseURL"in T?T.responseURL:Ae.headers.get("X-Request-URL");var ft="response"in T?T.response:T.responseText;w(new R(ft,Ae))},T.onerror=function(){D(new TypeError("Network request failed"))},T.ontimeout=function(){D(new TypeError("Network request failed"))},T.onabort=function(){D(new o.DOMException("Aborted","AbortError"))},T.open(I.method,I.url,!0),I.credentials==="include"?T.withCredentials=!0:I.credentials==="omit"&&(T.withCredentials=!1),"responseType"in T&&u.blob&&(T.responseType="blob"),I.headers.forEach(function(Ae,ft){T.setRequestHeader(ft,Ae)}),I.signal&&(I.signal.addEventListener("abort",je),T.onreadystatechange=function(){T.readyState===4&&I.signal.removeEventListener("abort",je)}),T.send(typeof I._bodyInit=="undefined"?null:I._bodyInit)})}return lt.polyfill=!0,a.fetch||(a.fetch=lt,a.Headers=b,a.Request=q,a.Response=R),o.Headers=b,o.Request=q,o.Response=R,o.fetch=lt,o})({})})(n),delete n.fetch.polyfill,t=n.fetch,t.default=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,e.exports=t});function wi(e){e=e||{},this.type="fetch",this._fetch=Ju(e.fetch),h.isNodeEnv()&&e.keepAlive&&(this._keepAliveEnabledAgent=new(e.isHttps,V).Agent({keepAlive:!0}))}wi.prototype.execute=function(e){var t=e.signal,n=!e.signal&&!!e.timeout,a,o=function(){a&&clearTimeout(a)},u=function(m){o();var p=Gu(m.headers),v=m.ok&&e.streamConsumer!=null;return v?(Vu(m,e.streamConsumer),{body:"[stream]",headers:p,status:m.status}):m.text().then(function(E){return{body:E,headers:p,status:m.status}})},l=function(m){return o(),Promise.reject(vi(m,n))};if(n){var f=new AbortController;t=f.signal,a=setTimeout(f.abort.bind(f),e.timeout)}return this._fetch(h.formatUrl(e.origin,e.path,e.query),{method:e.method,headers:e.headers,body:e.body,agent:this._keepAliveEnabledAgent,signal:t}).then(u).catch(l)};function Vu(e,t){var n=function(u){t.onError(vi(u))};if(h.isNodeEnv()){e.body.on("error",n).on("data",t.onData).on("end",function(){t.onError(new TypeError("network error"))});return}try{let u=function(){return a.read().then(function(l){if(!l.done){var f=o.decode(l.value,{stream:!0});return t.onData(f),u()}t.onError(new TypeError("network error"))})};var a=e.body.getReader(),o=new TextDecoder("utf-8");u().catch(n)}catch(u){throw new H.StreamsNotSupported("Please, consider providing a Fetch API-compatible function with streamable response bodies. "+u)}}function vi(e,t){var n=e&&e.name==="AbortError";return n?t?new be.TimeoutError:new be.AbortError:e}function Ju(e){return typeof e=="function"?e:typeof te.fetch=="function"?te.fetch.bind(te):Hu}function Gu(e){var t={};for(var n of e.entries()){var a=n[0],o=n[1];t[a]=o}return t}var $u=wi;function Qe(e){var t=e.scheme==="https";e.port==null&&(e.port=t?443:80);var n=!e.fetch&&h.isNodeEnv()&&zu();this._adapter=n?new ku:new $u({isHttps:t,fetch:e.fetch,keepAlive:e.keepAlive}),this._baseUrl=e.scheme+"://"+e.domain+":"+e.port,this._secret=e.secret,this._headers=Object.assign({},e.headers,Wu()),this._queryTimeout=e.queryTimeout,this._lastSeen=null,this._timeout=Math.floor(e.timeout*1e3)}Qe.prototype.getLastTxnTime=function(){return this._lastSeen};Qe.prototype.syncLastTxnTime=function(e){(this._lastSeen==null||this._lastSeen<e)&&(this._lastSeen=e)};Qe.prototype.execute=function(e){e=e||{};var t=e.streamConsumer&&(typeof e.streamConsumer.onData!="function"||typeof e.streamConsumer.onError!="function");if(t)return Promise.reject(new TypeError('Invalid "streamConsumer" provided'));var n=e.secret||this._secret,a=e.queryTimeout||this._queryTimeout,o=this._headers;return o.Authorization=n&&Xu(n),o["X-Last-Seen-Txn"]=this._lastSeen,o["X-Query-Timeout"]=a,this._adapter.execute({origin:this._baseUrl,path:e.path||"/",query:e.query,method:e.method||"GET",headers:h.removeNullAndUndefinedValues(o),body:e.body,signal:e.signal,timeout:this._timeout,streamConsumer:e.streamConsumer})};function Xu(e){return"Bearer "+e}function Wu(){var e={"X-Fauna-Driver":"Javascript","X-FaunaDB-API-Version":ni.apiVersion};return h.isNodeEnv()&&(e["X-Fauna-Driver-Version"]=ni.version,e["X-Runtime-Environment"]=Yu(),e["X-Runtime-Environment-OS"]=V.platform(),e["X-NodeJS-Version"]=L.version),e}function zu(){try{return!0}catch(e){return!1}}function Yu(){var e=[{name:"Netlify",check:()=>L.env.hasOwnProperty("NETLIFY_IMAGES_CDN_DOMAIN")},{name:"Vercel",check:()=>L.env.hasOwnProperty("VERCEL")},{name:"Heroku",check:()=>L.env.hasOwnProperty("PATH")&&L.env.PATH.indexOf(".heroku")!==-1},{name:"AWS Lambda",check:()=>L.env.hasOwnProperty("AWS_LAMBDA_FUNCTION_VERSION")},{name:"GCP Cloud Functions",check:()=>L.env.hasOwnProperty("_")&&L.env._.indexOf("google")!==-1},{name:"GCP Compute Instances",check:()=>L.env.hasOwnProperty("GOOGLE_CLOUD_PROJECT")},{name:"Azure Cloud Functions",check:()=>L.env.hasOwnProperty("WEBSITE_FUNCTIONS_AZUREMONITOR_CATEGORIES")},{name:"Azure Compute",check:()=>L.env.hasOwnProperty("ORYX_ENV_TYPE")&&L.env.hasOwnProperty("WEBSITE_INSTANCE_ID")&&L.env.ORYX_ENV_TYPE==="AppService"},{name:"Worker",check:()=>{try{return te instanceof ServiceWorkerGlobalScope}catch(n){return!1}}},{name:"Mongo Stitch",check:()=>typeof te.StitchError=="function"},{name:"Render",check:()=>L.env.hasOwnProperty("RENDER_SERVICE_ID")},{name:"Begin",check:()=>L.env.hasOwnProperty("BEGIN_DATA_SCOPE_ID")}],t=e.find(n=>n.check());return t?t.name:"Unknown"}var bi={HttpClient:Qe,TimeoutError:be.TimeoutError,AbortError:be.AbortError};function Ku(e,t){return t=typeof t!="undefined"?t:!1,t?JSON.stringify(e,null,"  "):JSON.stringify(e)}function Lt(e){return JSON.parse(e,Ct)}function Qu(e){var t=[];try{t.push(Lt(e)),e=""}catch(o){for(;;){var n=e.indexOf(`
`)+1;if(n<=0)break;var a=e.slice(0,n).trim();a.length>0&&t.push(Lt(a)),e=e.slice(n)}}return{values:t,buffer:e}}function Ct(e,t){if(typeof t!="object"||t===null)return t;if("@ref"in t){var n=t["@ref"];if(!("collection"in n)&&!("database"in n))return M.Native.fromName(n.id);var a=Ct("collection",n.collection),o=Ct("database",n.database);return new M.Ref(n.id,a,o)}else return"@obj"in t?t["@obj"]:"@set"in t?new M.SetRef(t["@set"]):"@ts"in t?new M.FaunaTime(t["@ts"]):"@date"in t?new M.FaunaDate(t["@date"]):"@bytes"in t?new M.Bytes(t["@bytes"]):"@query"in t?new M.Query(t["@query"]):t}var Ze={toJSON:Ku,parseJSON:Lt,parseJSONStreaming:Qu},Ti=["start","error","version","history_rewrite"],Zu=Ti.concat(["snapshot"]);function De(e,t,n,a){n=h.applyDefaults(n,{fields:null}),this._client=e,this._onEvent=a,this._query=ae.wrap(t),this._urlParams=n.fields?{fields:n.fields.join(",")}:null,this._abort=new AbortController,this._state="idle"}De.prototype.snapshot=function(){var e=this;e._client.query(ae.Get(e._query)).then(function(t){e._onEvent({type:"snapshot",event:t})}).catch(function(t){e._onEvent({type:"error",event:t})})};De.prototype.subscribe=function(){var e=this;if(e._state==="idle")e._state="open";else throw new Error("Subscription#start should not be called several times, consider instantiating a new stream instead.");var t=JSON.stringify(e._query),n=Date.now(),a="";function o(f){var m=Date.now(),p;try{p=Ze.parseJSON(f.body)}catch(E){p=f.body}var v=new St("POST","stream",e._urlParams,t,e._query,f.body,p,f.status,f.headers,n,m);e._client._handleRequestResult(f,v)}function u(f){var m=Ze.parseJSONStreaming(a+f);a=m.buffer,m.values.forEach(function(p){p.txn!==void 0&&e._client.syncLastTxnTime(p.txn),p.event==="error"?l(new H.StreamErrorEvent(p)):e._onEvent(p)})}function l(f){f instanceof bi.AbortError||e._onEvent({type:"error",event:f})}e._client._http.execute({method:"POST",path:"stream",body:t,query:e._urlParams,signal:this._abort.signal,streamConsumer:{onError:l,onData:u}}).then(o).catch(l)};De.prototype.close=function(){this._state!=="closed"&&(this._state="closed",this._abort.abort())};function et(e){this._allowedEvents=e,this._listeners={}}et.prototype.on=function(e,t){if(this._allowedEvents.indexOf(e)===-1)throw new Error("Unknown event type: "+e);this._listeners[e]===void 0&&(this._listeners[e]=[]),this._listeners[e].push(t)};et.prototype.dispatch=function(e){var t=this._listeners[e.type];if(!!t)for(var n=0;n<t.length;n++)t[n].call(null,e.event,e)};function ke(e,t){this._client=e,this._dispatcher=t}ke.prototype.on=function(e,t){return this._dispatcher.on(e,t),this};ke.prototype.start=function(){return this._client.subscribe(),this};ke.prototype.close=function(){this._client.close()};function ec(e){var t=function(n,a){var o=new et(Ti),u=new De(e,n,a,function(l){o.dispatch(l)});return new ke(u,o)};return t.document=function(n,a){var o=[],u=!0,l=new et(Zu),f=new De(e,n,a,m);function m(v){switch(v.type){case"start":l.dispatch(v),f.snapshot();break;case"snapshot":p(v);break;case"error":l.dispatch(v);break;default:u?o.push(v):l.dispatch(v)}}function p(v){l.dispatch(v);for(var E=0;E<o.length;E++){var b=o[E];b.txn>v.event.ts&&l.dispatch(b)}u=!1,o=null}return new ke(f,l)},t}var tc={StreamAPI:ec},nc=ae;function oe(e){e=h.applyDefaults(e,{domain:"db.fauna.com",scheme:"https",port:null,secret:null,timeout:60,observer:null,keepAlive:!0,headers:{},fetch:void 0,queryTimeout:null}),this._observer=e.observer,this._http=new bi.HttpClient(e),this.stream=tc.StreamAPI(this)}oe.prototype.query=function(e,t){return this._execute("POST","",nc.wrap(e),null,t)};oe.prototype.paginate=function(e,t,n){return t=h.defaults(t,{}),n=h.defaults(n,{}),new ei(this,e,t,n)};oe.prototype.ping=function(e,t){return this._execute("GET","ping",null,{scope:e,timeout:t})};oe.prototype.getLastTxnTime=function(){return this._http.getLastTxnTime()};oe.prototype.syncLastTxnTime=function(e){this._http.syncLastTxnTime(e)};oe.prototype._execute=function(e,t,n,a,o){a=h.defaults(a,null),(t instanceof M.Ref||h.checkInstanceHasProperty(t,"_isFaunaRef"))&&(t=t.value),a!==null&&(a=h.removeUndefinedValues(a));var u=Date.now(),l=this,f=["GET","HEAD"].indexOf(e)>=0?void 0:JSON.stringify(n);return this._http.execute(Object.assign({},o,{path:t,query:a,method:e,body:f})).then(function(m){var p=Date.now(),v=Ze.parseJSON(m.body),E=new St(e,t,a,f,n,m.body,v,m.status,m.headers,u,p);return l._handleRequestResult(m,E,o),v.resource})};oe.prototype._handleRequestResult=function(e,t,n){var a="x-txn-time";e.headers[a]!=null&&this.syncLastTxnTime(parseInt(e.headers[a],10));var o=[this._observer,n&&n.observer];o.forEach(u=>{typeof u=="function"&&u(t,this)}),H.FaunaHTTPError.raiseForStatusCode(t)};var rc=oe;function ac(e){return function(t,n){return e(Ei(t),n)}}function Ei(e){var t=e.query,n=e.method,a=e.path,o=e.requestContent,u=e.responseHeaders,l=e.responseContent,f=e.statusCode,m=e.timeTaken,p="";function v(E){p=p+E}return v("Fauna "+n+" /"+a+oc(t)+`
`),o!=null&&v("  Request JSON: "+Ot(o)+`
`),v("  Response headers: "+Ot(u)+`
`),v("  Response JSON: "+Ot(l)+`
`),v("  Response ("+f+"): Network latency "+m+`ms
`),p}function ic(e){var t="  ";return e.split(`
`).join(`
`+t)}function Ot(e){return ic(Ze.toJSON(e,!0))}function oc(e){if(e==null)return"";var t=Object.keys(e);if(t.length===0)return"";var n=t.map(function(a){return a+"="+e[a]});return"?"+n.join("&")}var sc={logger:ac,showRequestResult:Ei},uc=h.mergeObjects({Client:rc,Expr:i,PageHelper:ei,RequestResult:St,clientLogger:sc,errors:H,values:M,query:ae},ae),K=uc;var{Call:cc,Collection:Ne,Create:lc,Delete:fc,Function:dc,Get:Nc,Index:mc,Login:hc,Logout:pc,Match:gc,Ref:tt,Update:It}=K.query,_i=new K.Client({secret:"fnAEEEVInUACAnRkzzCAo-kg10IUtJUPYCXJs-Jw"}),xi=async(e,t,n,a,o=!1)=>{let{data:u}=await _i.query(lc(Ne("users"),{credentials:{password:a},data:{email:e,firstName:t,lastName:n,passUpdateTs:0,selectedListId:"",todoLists:[],tosAgreement:o}}));return delete u.passUpdateTs,delete u.tosAgreement,u},Dt=async(e,t)=>{let n=await _i.query(hc(gc(mc("users_by_email"),e),{password:t}));return{userRef:n.instance.id,secret:n.secret}},Si=async e=>await new K.Client({secret:e}).query(pc(!0)),Ai=async(e,t,n,{userRef:a,secret:o})=>{let{data:u}=await new K.Client({secret:o}).query(It(tt(Ne("users"),a),{data:{email:e,firstName:t,lastName:n}}));return{email:u.email,firstName:u.firstName,lastName:u.lastName}},Ci=async(e,{userRef:t,secret:n})=>{let a=await new K.Client({secret:n}).query(It(tt(Ne("users"),t),{credentials:{password:e},data:{passUpdateTs:Date.now()*1e3}}));return"data"in a},kt=async({userRef:e,secret:t})=>{let{data:n}=await new K.Client({secret:t}).query(cc(dc("getUserDoc"),e));return delete n.tosAgreement,delete n.passUpdateTs,n},Li=async({userRef:e,secret:t})=>{let{data:n}=await new K.Client({secret:t}).query(fc(tt(Ne("users"),e)));return n},Oi=async(e,t,{userRef:n,secret:a})=>{if(typeof e!="object"&&!(e instanceof Array))throw Error("Invalid type of data");let{data:o}=await new K.Client({secret:a}).query(It(tt(Ne("users"),n),{data:{todoLists:e,selectedListId:t}}));return{todoLists:o.todoLists,selectedListId:o.selectedListId}};var Nt="todos.session.tokens",y=null,Ii=null,Pt=!1,g=e=>document.querySelector(e),G=e=>document.querySelectorAll(e),fe=g("#mobile-menu"),Rt=g("#mobile-menu-open"),nt=g("#sidebar"),Di=g("#sidebar-overlay"),jt=g("#enable-notifications"),ki=g("#dropdown-tools"),Ft=G("[data-dashboard-button]"),Bt=G("[data-account-button]"),Ut=g("[data-todos]"),Mt=g("[data-new-todo-input]"),Ni=g("[data-todo-display-tasks]"),U=g("[data-todo-title]"),qt=g("[data-save-list-name]"),rt=g("[data-tasks]"),Pi=g("[data-new-task-input]");g("#home-link").addEventListener("click",e=>{e.preventDefault(),ie(),_e()?(Q("#dashboard-component"),xe("dashboard")):Q("#home-component")});G("[data-signup-button]").forEach(e=>e.addEventListener("click",t=>{t.preventDefault(),g("#signup-form").querySelector("[data-error-msg]").innerText="",ie(),Q("#signup-component"),fe.classList.contains("hidden")||de()}));G("[data-login-button]").forEach(e=>e.addEventListener("click",t=>{t.preventDefault(),g("#login-form").querySelector("[data-error-msg]").innerText="",ie(),Q("#login-component"),fe.classList.contains("hidden")||de()}));G("[data-logout-button]").forEach(e=>e.addEventListener("click",async t=>{if(t.preventDefault(),fe.classList.contains("hidden")||de(),_e()){O("Logging you out...");try{await Si(P().secret)&&(Ht(),O())}catch(n){console.error("fLogout >>>",n.message),O()}}}));Ft.forEach(e=>e.addEventListener("click",t=>{t.preventDefault(),ie(),Q("#dashboard-component"),xe("dashboard"),fe.classList.contains("hidden")||de()}));Bt.forEach(e=>e.addEventListener("click",t=>{t.preventDefault(),g("#account-form").querySelector("[data-error-msg]").innerText="",g("[data-acc-ref-id]").innerText=P().userRef,g("#account-form #email-address-account").value=y.email,g("#account-form #first-name-account").value=y.firstName,g("#account-form #last-name-account").value=y.lastName,ie(),Q("#account-component"),xe("account"),fe.classList.contains("hidden")||de()}));Rt.addEventListener("click",de);g("#mobile-menu-close").addEventListener("click",de);g("#sidebar-open").addEventListener("click",Pe);Di.addEventListener("click",Pe);g("#add-todo-sidebar").addEventListener("click",e=>{e.preventDefault(),nt.classList.contains("hidden")&&Pe(),Mt.focus()});jt.addEventListener("click",yc);g("#dropdown-toggle").addEventListener("click",at);G("form").forEach(e=>e.addEventListener("submit",wc));g("#delete-account").addEventListener("click",vc);function Ri(e){return typeof e=="object"&&"userRef"in e&&"secret"in e?(localStorage.setItem(Nt,JSON.stringify(e)),!0):!1}function ji(){y=null,localStorage.removeItem(Nt)}function P(){return JSON.parse(localStorage.getItem(Nt))||null}function _e(){return P()!==null&&typeof P()=="object"&&"userRef"in P()&&"secret"in P()&&y!==null&&typeof y=="object"&&"email"in y&&"firstName"in y&&"lastName"in y&&"selectedListId"in y&&"todoLists"in y}function O(e){e&&(g("[data-info-msg]").innerText=e),g("#show-loader").classList.toggle("hidden")}function Jt(e){g("[data-info-msg]").innerText=e}function de(e){fe.classList.toggle("hidden"),fe.classList.contains("hidden")?Rt.setAttribute("aria-expanded","false"):Rt.setAttribute("aria-expanded","true")}function Pe(e){nt.classList.toggle("hidden"),Di.classList.toggle("hidden")}function at(e){ki.classList.toggle("hidden")}async function wc(e){e.preventDefault();let t=e.target.id;if(t==="signup-form"||t==="login-form"||t==="account-form"){let n=e.target.querySelector("[data-error-msg]"),a=e.target.querySelector("[data-success-msg]"),o={},u=e.target.elements;for(let l=0;l<u.length;l++){let f=u[l];f.type!=="submit"&&(o[f.name]=f.type=="checkbox"?f.checked:f.value.trim())}if(!bc(o,t)){n.innerText="Missing or invalid field(s) supplied";return}if(t==="signup-form"){O("Signing you up...");try{y={...await xi(o.email,o.firstName,o.lastName,o.password,o.tosAgreement)},Jt("Loading your dashboard...");let f=await Dt(o.email,o.password);if(!Ri(f))throw Error("Cannot get user credentials");Vt(),e.target.reset(),O()}catch(l){console.error("fSignup/fLogin error >>>",l.message),n.innerText=`Sign Up error: ${l.message.replace("instance","email")}`,O()}}if(t==="login-form"){O("Logging you in...");try{let l=await Dt(o.email,o.password);if(Ri(l))Jt("Loading your dashboard..."),y={...await kt({...l})},Vt(),e.target.reset(),O();else throw Error("Cannot get user credentials")}catch(l){console.error("fLogin/fGetUserData >>>",l.message),n.innerText=`Log In error: ${l.message}`,O()}}if(t==="account-form"&&_e()){O("Updating your details...");try{let l=await Ai(o.email,o.firstName,o.lastName,{...P()});y={...y,...l},Fi(),o.password&&(Jt("Updating your password..."),await Ci(o.password,{...P()}),g("#account-form #password-account").value=""),a.innerText="Update successful",O(),setTimeout(()=>{a.innerText=""},3e3)}catch(l){console.error("fUpdateAccount/fUpdatePassword >>>",l.message),n.innerText=`Update error: ${l.message}`,O()}}}if(t==="new-todo-form"&&_e()){let n=Mt.value.trim();if(n===null||n===""||y.todoLists.some(o=>o.name==n))return;let a=Tc(n);Mt.value=null,y.todoLists.push(a),y.selectedListId=a.id,se(),nt.classList.contains("hidden")||Pe()}if(t==="new-task-form"&&_e()){let n=Pi.value;if(n===null||n==="")return;let a=Ec(n);Pi.value=null,y.todoLists.find(u=>u.id===y.selectedListId).tasks.push(a),se()}}function bc(e,t){e=typeof e=="object"&&e!==null?e:!1;let{email:n,firstName:a,lastName:o,password:u,tosAgreement:l}=e;return e&&t==="signup-form"?typeof a=="string"&&a.length>0&&typeof o=="string"&&o.length>0&&typeof n=="string"&&Gt(n)&&typeof u=="string"&&u.length>=4&&typeof l=="boolean"&&l!==!1:e&&t==="login-form"?typeof n=="string"&&Gt(n)&&typeof u=="string"&&u.length>=4:e&&t==="account-form"?typeof a=="string"&&a.length>0&&typeof o=="string"&&o.length>0&&typeof n=="string"&&Gt(n)&&typeof u=="string"&&(u===""||u.length>=4):!1}function Gt(e){e=typeof e=="string"&&e.length>=6?e:!1;let t=/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,4})(\]?)$/;return e?t.test(e):!1}function xe(e){Ft.forEach(t=>t.classList.remove("bg-indigo-200")),Bt.forEach(t=>t.classList.remove("bg-indigo-200")),!(e==null||e==null)&&(e==="dashboard"&&Ft.forEach(t=>t.classList.add("bg-indigo-200")),e==="account"&&Bt.forEach(t=>t.classList.add("bg-indigo-200")))}function Q(e){g(e).classList.remove("hidden")}function ie(){g("#home-component").classList.add("hidden"),g("#signup-component").classList.add("hidden"),g("#login-component").classList.add("hidden"),g("#dashboard-component").classList.add("hidden"),g("#account-component").classList.add("hidden"),g("#acc-deleted-component").classList.add("hidden")}function _c(){G("[data-logged-out]").forEach(e=>e.classList.add("hidden")),G("[data-logged-in]").forEach(e=>e.classList.remove("hidden"))}function Bi(){G("[data-logged-out]").forEach(e=>e.classList.remove("hidden")),G("[data-logged-in]").forEach(e=>e.classList.add("hidden"))}function Fi(){g("[data-user-name]").innerText=`${y.firstName.charAt(0).toUpperCase()}'s Todo Lists`}function Vt(){_c(),ie(),Q("#dashboard-component"),xe("dashboard"),Fi(),$t(),Ui(),Mi()}function Ht(){Bi(),ie(),Q("#home-component"),xe(void 0),ji(),qi()}async function vc(e){e.preventDefault(),O("Deleting your account...");try{let t=await Li({...P()});Bi(),xe(void 0),ie(),ji(),g("#acc-deleted-component").classList.remove("hidden"),g("#acc-deleted-component").querySelector("[data-acc-delteted-json]").value=JSON.stringify(t),O()}catch(t){console.error("fDeleteAccount >>>",t.message),O()}}Ut.addEventListener("click",e=>{e.preventDefault(),e.target.tagName.toLowerCase()==="a"&&(y.selectedListId=e.target.dataset.todoId,se(),nt.classList.contains("hidden")||Pe(),ki.classList.contains("hidden")||at())});rt.addEventListener("click",e=>{if(e.target.name==="task-checkbox"){let t=y.todoLists.find(a=>a.id===y.selectedListId),n=t.tasks.find(a=>a.id===e.target.id);n.completed=e.target.checked,Ji(),Hi(t)}"toggleAlarmForm"in e.target.dataset&&(e.preventDefault(),g(`[data-form-id-${e.target.dataset.targetformId}]`).classList.toggle("hidden"))});rt.addEventListener("submit",e=>{e.preventDefault();let t=e.target.dataset.taskId,n,a;if(Array.from(e.target.elements).forEach(u=>{u.name==="alarm-date"&&(n=u.value),u.name==="alarm-time"&&(a=u.value)}),!t||!n||!a)return;let o=y.todoLists.find(({id:u})=>u===y.selectedListId).tasks.find(({id:u})=>u===t);o.alarmDate=n,o.alarmTime=a,o.notified=!1,o.completed=!1,o.overdue=!1,se(),e.target.classList.toggle("hidden")});U.addEventListener("click",e=>{qt.classList.remove("hidden"),U.style.backgroundColor="white",U.style.padding="0 5px"});U.addEventListener("input",e=>{e.preventDefault();let t=U.dataset.todoId,n=U.textContent.replace(`
`,"").trim();n.length>=1&&!y.todoLists.some(a=>a.name==n)&&xc(t,n)});qt.addEventListener("click",e=>{U.style.backgroundColor="transparent",U.style.padding="0",U.blur(),qt.classList.add("hidden"),se()});g("[data-clear-complete-tasks]").addEventListener("click",e=>{e.preventDefault();let t=y.todoLists.find(n=>n.id===y.selectedListId);t.tasks=t.tasks.filter(n=>!n.completed),se(),at()});g("[data-delete-todo-list]").addEventListener("click",e=>{e.preventDefault(),y.todoLists=y.todoLists.filter(t=>t.id!==y.selectedListId),y.selectedListId="",se(),at()});function Tc(e){return{id:Date.now().toString(),name:e,tasks:[]}}function Ec(e){return{id:Date.now().toString(),name:e,completed:!1,alarmDate:"",alarmTime:"",notified:!1,overdue:!1}}function Ui(){Vi(Ut),Sc();let e=y.todoLists.find(t=>t.id===y.selectedListId);y.selectedListId===""||!y.todoLists.length?(g("[data-todo-display-empty]").classList.remove("hidden"),Ni.style.display="none"):(g("[data-todo-display-empty]").classList.add("hidden"),Ni.style.display="",U.innerText=e.name!==void 0?e.name:"",U.setAttribute("contenteditable","true"),U.dataset.todoId=e.id,Hi(e),Vi(rt),Ac(e))}function Sc(){y.todoLists.forEach(e=>{let t=`
            <svg class="h-6 w-6 pointer-events-none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" />
                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd" />
            </svg>
            <span class="ml-3 pointer-events-none">${e.name}</span>
        `,n=["flex","items-center","mb-2","p-2","text-base","text-indigo-700","bg-gray-200","rounded"],a=["flex","items-center","mb-2","p-2","text-base","text-gray-600","hover:text-gray-700","hover:bg-gray-200","rounded"],o=document.createElement("a");o.href="#",o.dataset.todoId=e.id,o.innerHTML=t,o.dataset.todoId===y.selectedListId?o.classList.add(...n):o.classList.add(...a),Ut.appendChild(o)})}function xc(e,t){let n=y.todoLists.find(a=>a.id==e);n.name=t}function Hi(e){let t=e.tasks.filter(a=>!a.completed).length,n=t===1?"task":"tasks";g("[data-todo-count]").innerText=`${t} ${n} remaining`}function Ac(e){e.tasks.forEach(t=>{let{id:n,name:a,alarmDate:o,alarmTime:u,completed:l,notified:f,overdue:m}=t,p=document.importNode(g("#task-template").content,!0);p.querySelector("form").setAttribute(`data-form-id-${n}`,""),p.querySelector("form").dataset.taskId=n,p.querySelector("input[name=alarm-date]").value=o,p.querySelector("input[name=alarm-time]").value=u,p.querySelector("[data-toggle-alarm-form]").dataset.targetformId=n;let v=p.querySelector("input[name=task-checkbox]");v.id=n,v.checked=l;let E=p.querySelector("label");E.htmlFor=n,E.append(a);let b=p.querySelector("[data-due-text]");b.innerText=!m&&o&&u?`Task due on ${new Date(`${o} ${u}`).toLocaleString()}`:m?"Task overdue, marked as complete.":"",m&&b.classList.add("text-pink-400");let Z=p.querySelector("[data-notified-text]");Z.innerText=m&&f?"Notified!":m&&!f?"Not notified!":"",f||Z.classList.add("text-indigo-500"),rt.appendChild(p)})}function Vi(e){for(;e.firstChild;)e.removeChild(e.firstChild)}async function Ji(){try{let e=await Oi(y.todoLists,y.selectedListId,{...P()});y={...y,...e},Pt===!1&&Gi()&&Mi()}catch(e){let n=function(){t>1?g("[data-db-error]").innerText=`Database connection error. To prevent data loss you'll be logged out in ${t-1}s.`:(g("#show-db-error").classList.add("hidden"),g("[data-db-error]").innerText="",Ht()),t--,t>0&&setTimeout(n,1e3)};console.error("fUpdateTodos >>>",e.message),g("#show-db-error").classList.remove("hidden");let t=6;n()}}function se(){Ji(),Ui()}function yc(){"Notification"in window?Cc()?Notification.requestPermission().then(()=>$t()):Notification.requestPermission(()=>$t()):console.log("This browser does not support notifications.")}function Cc(){try{Notification.requestPermission().then()}catch(e){return!1}return!0}function $t(){$i()?jt.classList.add("hidden"):jt.classList.remove("hidden")}function $i(){return!(Notification.permission==="denied"||Notification.permission==="default")}function Gi(){return y.todoLists.length&&y.todoLists.reduce((e,t)=>e+t.tasks.length,0)}function Lc(){if(_e()&&Gi()){let e=0,t=n=>{let{alarmDate:a,alarmTime:o,name:u,notified:l,overdue:f}=n;if(a&&o){let m=Date.parse(`${a} ${o}`),p=Date.now(),v="img/notifications-icon-128x128.png",E=`Hey ${y.firstName}! Your task "${u}" is now overdue and has been marked as complete.`;!f&&p>m&&(!l&&$i()&&(new Notification("ToDo's JS",{body:E,icon:v}),n.notified=!0),n.completed=!0,n.overdue=!0,e++)}return n};y.todoLists=y.todoLists.map(n=>(n.tasks.length&&n.tasks.map(t),n)),e&&se()}else qi()}function Mi(){Ii=setInterval(Lc,5e3),Pt=!0}function qi(){clearInterval(Ii),Pt=!1}async function Oc(){if(P()!==null&&"userRef"in P()&&"secret"in P()){O("Loading your dashboard...");try{y={...await kt({...P()})},Vt(),O()}catch(e){console.error("fGetUserData >>> ",e.message),Ht(),O()}}else Q("#home-component")}window.onload=()=>{Oc()};
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
