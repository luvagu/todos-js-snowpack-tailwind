var es=Zo;function Zo(e){if(typeof e!="function")throw new Error("Could not parse function signature for injection dependencies: Object is not a function");if(!e.length)return[];var t=/^()\(?([^)=]*)\)? *=>/.exec(e+"")||/^[^(]+([^ \(]*) *\(([^\)]*)\)/.exec(e+"");if(!t)throw new Error("Could not parse function signature for injection dependencies: "+e+"");var n=t[2].replace(/\/\*[\S\s]*?\*\//g," ").replace(/\/\/.*/g," ");function a(i,u,l){return u+l.split(",").map(function(f){return f&&f.trim()}).filter(Boolean).join("@")}return n=n.replace(/(\{)([^}]*)\}/g,a),n=n.replace(/(\[)([^}]*)\]/g,a),n.split(",").map(function(i){return i&&i.trim()}).map(function(i){return i[0]==="{"?i.substring(1).split("@"):i[0]==="["?{items:i.substring(1).split("@")}:i}).filter(Boolean)}var ne=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ns(e,t,n){return n={path:t,exports:{},require:function(a,i){return ts(a,i==null?n.path:i)}},e(n,n.exports),n.exports}function rs(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")&&Object.keys(e).length===1?e.default:e}function ts(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var z=as;function as(e,t){if(pt("noDeprecation"))return e;var n=!1;function a(){if(!n){if(pt("throwDeprecation"))throw new Error(t);pt("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}return a}function pt(e){try{if(!ne.localStorage)return!1}catch(n){return!1}var t=ne.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}function Kt(){throw new Error("setTimeout has not been defined")}function Zt(){throw new Error("clearTimeout has not been defined")}var re=Kt,ae=Zt,ge;typeof window!="undefined"?ge=window:typeof self!="undefined"?ge=self:ge={};typeof ge.setTimeout=="function"&&(re=setTimeout);typeof ge.clearTimeout=="function"&&(ae=clearTimeout);function en(e){if(re===setTimeout)return setTimeout(e,0);if((re===Kt||!re)&&setTimeout)return re=setTimeout,setTimeout(e,0);try{return re(e,0)}catch(t){try{return re.call(null,e,0)}catch(n){return re.call(this,e,0)}}}function is(e){if(ae===clearTimeout)return clearTimeout(e);if((ae===Zt||!ae)&&clearTimeout)return ae=clearTimeout,clearTimeout(e);try{return ae(e)}catch(t){try{return ae.call(null,e)}catch(n){return ae.call(this,e)}}}var Y=[],ye=!1,le,qe=-1;function os(){!ye||!le||(ye=!1,le.length?Y=le.concat(Y):qe=-1,Y.length&&tn())}function tn(){if(!ye){var e=en(os);ye=!0;for(var t=Y.length;t;){for(le=Y,Y=[];++qe<t;)le&&le[qe].run();qe=-1,t=Y.length}le=null,ye=!1,is(e)}}function ss(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Y.push(new nn(e,t)),Y.length===1&&!ye&&en(tn)}function nn(e,t){this.fun=e,this.array=t}nn.prototype.run=function(){this.fun.apply(null,this.array)};var us="browser",cs="browser",ls=!0,fs=[],ds="",ms={},hs={},ps={};function fe(){}var gs=fe,ys=fe,ws=fe,vs=fe,bs=fe,Ts=fe,Es=fe;function xs(e){throw new Error("process.binding is not supported")}function _s(){return"/"}function Ss(e){throw new Error("process.chdir is not supported")}function As(){return 0}var we=ge.performance||{},Cs=we.now||we.mozNow||we.msNow||we.oNow||we.webkitNow||function(){return new Date().getTime()};function Os(e){var t=Cs.call(we)*.001,n=Math.floor(t),a=Math.floor(t%1*1e9);return e&&(n=n-e[0],a=a-e[1],a<0&&(n--,a+=1e9)),[n,a]}var Is=new Date;function Ls(){var e=new Date,t=e-Is;return t/1e3}var _={nextTick:ss,title:us,browser:ls,env:{NODE_ENV:"production"},argv:fs,version:ds,versions:ms,on:gs,addListener:ys,once:ws,off:vs,removeListener:bs,removeAllListeners:Ts,emit:Es,binding:xs,cwd:_s,chdir:Ss,umask:As,hrtime:Os,platform:cs,release:hs,config:ps,uptime:Ls};function Ds(e,t){if(e==null)throw new TypeError('The constructor to "inherits" must not be null or undefined');if(t==null)throw new TypeError('The super constructor to "inherits" must not be null or undefined');if(t.prototype===void 0)throw new TypeError('The super constructor to "inherits" must have a prototype');e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Ns(){return typeof window=="undefined"&&typeof _!="undefined"&&_.versions!=null&&_.versions.node!=null}function ks(e){var t=!!(typeof _!="undefined"&&_&&_.env);if(t&&_.env[e]!=null)return _.env[e]}function Ps(){var e=navigator.appName,t=""+parseFloat(navigator.appVersion),n,a,i;return(a=navigator.userAgent.indexOf("Opera"))!=-1?(e="Opera",t=navigator.userAgent.substring(a+6),(a=navigator.userAgent.indexOf("Version"))!=-1&&(t=navigator.userAgent.substring(a+8))):(a=navigator.userAgent.indexOf("MSIE"))!=-1?(e="Microsoft Internet Explorer",t=navigator.userAgent.substring(a+5)):e=="Netscape"&&navigator.userAgent.indexOf("Trident/")!=-1?(e="Microsoft Internet Explorer",t=navigator.userAgent.substring(a+5),(a=navigator.userAgent.indexOf("rv:"))!=-1&&(t=navigator.userAgent.substring(a+3))):(a=navigator.userAgent.indexOf("Chrome"))!=-1?(e="Chrome",t=navigator.userAgent.substring(a+7)):(a=navigator.userAgent.indexOf("Safari"))!=-1?(e="Safari",t=navigator.userAgent.substring(a+7),(a=navigator.userAgent.indexOf("Version"))!=-1&&(t=navigator.userAgent.substring(a+8)),navigator.userAgent.indexOf("CriOS")!=-1&&(e="Chrome")):(a=navigator.userAgent.indexOf("Firefox"))!=-1?(e="Firefox",t=navigator.userAgent.substring(a+8)):(n=navigator.userAgent.lastIndexOf(" ")+1)<(a=navigator.userAgent.lastIndexOf("/"))&&(e=navigator.userAgent.substring(n,a),t=navigator.userAgent.substring(a+1),e.toLowerCase()==e.toUpperCase()&&(e=navigator.appName)),(i=t.indexOf(";"))!=-1&&(t=t.substring(0,i)),(i=t.indexOf(" "))!=-1&&(t=t.substring(0,i)),(i=t.indexOf(")"))!=-1&&(t=t.substring(0,i)),[e,t].join("-")}function Rs(){var e="unknown",t=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Chrome OS",r:/CrOS/},{s:"Linux",r:/(Linux|X11(?!.*CrOS))/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var n in t){var a=t[n];if(a.r.test(navigator.userAgent)){e=a.s;break}}var i="unknown";switch(/Windows/.test(e)&&(i=/Windows (.*)/.exec(e)[1],e="Windows"),e){case"Mac OS":case"Mac OS X":case"Android":i=/(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([\.\_\d]+)/.exec(navigator.userAgent)[1];break;case"iOS":i=/OS (\d+)_(\d+)_?(\d+)?/.exec(navigator.appVersion),i=i[1]+"."+i[2]+"."+(i[3]|0);break}return[e,i].join("-")}function js(){var e=[{name:"Netlify",check:()=>_.env.hasOwnProperty("NETLIFY_IMAGES_CDN_DOMAIN")},{name:"Vercel",check:()=>_.env.hasOwnProperty("VERCEL")},{name:"Heroku",check:()=>_.env.hasOwnProperty("PATH")&&_.env.PATH.indexOf(".heroku")!==-1},{name:"AWS Lambda",check:()=>_.env.hasOwnProperty("AWS_LAMBDA_FUNCTION_VERSION")},{name:"GCP Cloud Functions",check:()=>_.env.hasOwnProperty("_")&&_.env._.indexOf("google")!==-1},{name:"GCP Compute Instances",check:()=>_.env.hasOwnProperty("GOOGLE_CLOUD_PROJECT")},{name:"Azure Cloud Functions",check:()=>_.env.hasOwnProperty("WEBSITE_FUNCTIONS_AZUREMONITOR_CATEGORIES")},{name:"Azure Compute",check:()=>_.env.hasOwnProperty("ORYX_ENV_TYPE")&&_.env.hasOwnProperty("WEBSITE_INSTANCE_ID")&&_.env.ORYX_ENV_TYPE==="AppService"},{name:"Mongo Stitch",check:()=>typeof ne.StitchError=="function"},{name:"Render",check:()=>_.env.hasOwnProperty("RENDER_SERVICE_ID")},{name:"Begin",check:()=>_.env.hasOwnProperty("BEGIN_DATA_SCOPE_ID")}],t=e.find(n=>n.check());return t?t.name:"unknown"}function Fs(e,t){return e===void 0?t:e}function Bs(e,t){var n={};for(var a in e){if(!(a in t))throw new Error("No such option "+a);n[a]=e[a]}for(var i in t)i in n||(n[i]=t[i]);return n}function Ms(e){var t={};for(var n in e){var a=e[n];a!=null&&(t[n]=a)}return t}function Us(e){var t={};for(var n in e){var a=e[n];a!==void 0&&(t[n]=a)}return t}function rn(e,t){return typeof e=="object"&&e!==null&&Boolean(e[t])}function qs(e,t,n){return n=typeof n=="object"?an(n):n,[e,t?t.charAt(0)==="/"?"":"/"+t:"",n?n.charAt(0)==="?"?"":"?"+n:""].join("")}function an(e,t){t=t||"";var n=[],a,i;typeof t!="string"&&(t="?");for(i in e)if(rn(e,i)){if(a=e[i],!a&&(a==null||isNaN(a))&&(a=""),i=on(i),a=on(a),i===null||a===null)continue;n.push(i+"="+a)}return n.length?t+n.join("&"):""}function on(e){try{return encodeURIComponent(e)}catch(t){return null}}function Hs(e,t){var n={};for(var a in e)n[a]=e[a];for(var a in t)n[a]=t[a];return n}var h={mergeObjects:Hs,formatUrl:qs,querystringify:an,inherits:Ds,isNodeEnv:Ns,getEnvVariable:ks,defaults:Fs,applyDefaults:Bs,removeNullAndUndefinedValues:Ms,removeUndefinedValues:Us,checkInstanceHasProperty:rn,getBrowserDetails:Ps,getBrowserOsDetails:Rs,getNodeRuntimeEnv:js};function ve(e){this.raw=e}ve.prototype._isFaunaExpr=!0;ve.prototype.toJSON=function(){return this.raw};ve.prototype.toFQL=function(){return T(this.raw)};var Ws=["Do","Call","Union","Intersection","Difference","Equals","Add","BitAnd","BitOr","BitXor","Divide","Max","Min","Modulo","Multiply","Subtract","LT","LTE","GT","GTE","And","Or"],sn={containsstrregex:"ContainsStrRegex",endswith:"EndsWith",findstr:"FindStr",findstrregex:"FindStrRegex",gt:"GT",gte:"GTE",is_nonempty:"is_non_empty",lowercase:"LowerCase",lt:"LT",lte:"LTE",ltrim:"LTrim",rtrim:"RTrim",regexescape:"RegexEscape",replacestr:"ReplaceStr",replacestrregex:"ReplaceStrRegex",startswith:"StartsWith",substring:"SubString",titlecase:"TitleCase",uppercase:"UpperCase"};function un(e){return e instanceof ve||h.checkInstanceHasProperty(e,"_isFaunaExpr")}function He(e){return"{"+Object.keys(e).map(function(t){return t+": "+T(e[t])}).join(", ")+"}"}function gt(e,t){return e.map(function(n){return t(n)}).join(", ")}function Vs(e){return e in sn&&(e=sn[e]),e.split("_").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join("")}var T=function(e,t){if(un(e)){if("value"in e)return e.toString();e=e.raw}if(e===null)return"null";switch(typeof e){case"string":return JSON.stringify(e);case"symbol":case"number":case"boolean":return e.toString();case"undefined":return"undefined"}if(Array.isArray(e)){var n=gt(e,T);return Ws.indexOf(t)!=-1?n:"["+n+"]"}if("match"in e){var a=T(e.match),i=e.terms||[];return un(i)&&(i=i.raw),Array.isArray(i)&&i.length==0?"Match("+a+")":Array.isArray(i)?"Match("+a+", ["+gt(i,T)+"])":"Match("+a+", "+T(i)+")"}if("paginate"in e){var u=Object.keys(e);if(u.length===1)return"Paginate("+T(e.paginate)+")";var l=Object.assign({},e);return delete l.paginate,"Paginate("+T(e.paginate)+", "+He(l)+")"}if("let"in e&&"in"in e){var f="";return Array.isArray(e.let)?f="["+gt(e.let,He)+"]":f=He(e.let),"Let("+f+", "+T(e.in)+")"}if("object"in e)return He(e.object);if("merge"in e)return e.lambda?"Merge("+T(e.merge)+", "+T(e.with)+", "+T(e.lambda)+")":"Merge("+T(e.merge)+", "+T(e.with)+")";if("lambda"in e)return"Lambda("+T(e.lambda)+", "+T(e.expr)+")";if("filter"in e)return"Filter("+T(e.collection)+", "+T(e.filter)+")";if("call"in e)return"Call("+T(e.call)+", "+T(e.arguments)+")";if("map"in e)return"Map("+T(e.collection)+", "+T(e.map)+")";if("foreach"in e)return"Foreach("+T(e.collection)+", "+T(e.foreach)+")";var d=Object.keys(e),p=d[0];p=Vs(p);var w=d.filter(x=>e[x]!==null||d.length>1).map(x=>T(e[x],p)).join(", ");return p+"("+w+")"};ve.toString=T;var o=ve;function R(e,t,n){Error.call(this),this.name=e,this.message=t,this.description=n}h.inherits(R,Error);function cn(e){R.call(this,"InvalidValue",e)}h.inherits(cn,R);function ln(e,t,n,a){var i=`${a} function requires ${l(e,t)} argument(s) but ${n} were given`,u=f(a);R.call(this,"InvalidArity",`${i}
${u}`),this.min=e,this.max=t,this.actual=n;function l(d,p){return p===null?"at least "+d:d===null?"up to "+p:d===p?d:"from "+d+" to "+p}function f(d){var p="https://docs.fauna.com/fauna/current/api/fql/functions/";return`For more info, see the docs: ${p}${d.toLowerCase()}`}}h.inherits(ln,R);function O(e,t){var n=t.responseContent,a=n.errors,i=a.length===0?'(empty "errors")':a[0].code,u=a.length===0?'(empty "errors")':a[0].description;R.call(this,e,i,u),this.requestResult=t}h.inherits(O,R);O.prototype.errors=function(){return this.requestResult.responseContent.errors};O.raiseForStatusCode=function(e){var t=e.statusCode;if(t<200||t>=300)switch(t){case 400:throw new yt(e);case 401:throw new wt(e);case 403:throw new vt(e);case 404:throw new bt(e);case 405:throw new Tt(e);case 500:throw new Et(e);case 503:throw new xt(e);default:throw new O("UnknownError",e)}};function yt(e){O.call(this,"BadRequest",e)}h.inherits(yt,O);function wt(e){O.call(this,"Unauthorized",e)}h.inherits(wt,O);function vt(e){O.call(this,"PermissionDenied",e)}h.inherits(vt,O);function bt(e){O.call(this,"NotFound",e)}h.inherits(bt,O);function Tt(e){O.call(this,"MethodNotAllowed",e)}h.inherits(Tt,O);function Et(e){O.call(this,"InternalError",e)}h.inherits(Et,O);function xt(e){O.call(this,"UnavailableError",e)}h.inherits(xt,O);function We(e,t,n){R.call(this,e,t,n)}h.inherits(We,R);function fn(e){R.call(this,"StreamsNotSupported","streams not supported",e)}h.inherits(fn,We);function dn(e){var t=e.data||{};R.call(this,"StreamErrorEvent",t.code,t.description),this.event=e}h.inherits(dn,We);var V={FaunaError:R,FaunaHTTPError:O,InvalidValue:cn,InvalidArity:ln,BadRequest:yt,Unauthorized:wt,PermissionDenied:vt,NotFound:bt,MethodNotAllowed:Tt,InternalError:Et,UnavailableError:xt,StreamError:We,StreamsNotSupported:fn,StreamErrorEvent:dn},Gs=$s,Xs=Js,Ys=zs,$=[],j=[],Qs=typeof Uint8Array!="undefined"?Uint8Array:Array,_t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var be=0,Ks=_t.length;be<Ks;++be)$[be]=_t[be],j[_t.charCodeAt(be)]=be;j["-".charCodeAt(0)]=62;j["_".charCodeAt(0)]=63;function mn(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var a=n===t?0:4-n%4;return[n,a]}function $s(e){var t=mn(e),n=t[0],a=t[1];return(n+a)*3/4-a}function Zs(e,t,n){return(t+n)*3/4-n}function Js(e){var t,n=mn(e),a=n[0],i=n[1],u=new Qs(Zs(e,a,i)),l=0,f=i>0?a-4:a,d;for(d=0;d<f;d+=4)t=j[e.charCodeAt(d)]<<18|j[e.charCodeAt(d+1)]<<12|j[e.charCodeAt(d+2)]<<6|j[e.charCodeAt(d+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=t&255;return i===2&&(t=j[e.charCodeAt(d)]<<2|j[e.charCodeAt(d+1)]>>4,u[l++]=t&255),i===1&&(t=j[e.charCodeAt(d)]<<10|j[e.charCodeAt(d+1)]<<4|j[e.charCodeAt(d+2)]>>2,u[l++]=t>>8&255,u[l++]=t&255),u}function eu(e){return $[e>>18&63]+$[e>>12&63]+$[e>>6&63]+$[e&63]}function tu(e,t,n){for(var a,i=[],u=t;u<n;u+=3)a=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(e[u+2]&255),i.push(eu(a));return i.join("")}function zs(e){for(var t,n=e.length,a=n%3,i=[],u=16383,l=0,f=n-a;l<f;l+=u)i.push(tu(e,l,l+u>f?f:l+u));return a===1?(t=e[n-1],i.push($[t>>2]+$[t<<4&63]+"==")):a===2&&(t=(e[n-2]<<8)+e[n-1],i.push($[t>>10]+$[t>>4&63]+$[t<<2&63]+"=")),i.join("")}var St={byteLength:Gs,toByteArray:Xs,fromByteArray:Ys},nu={},ru=Object.freeze({__proto__:null,default:nu}),G=rs(ru),Ve=h.isNodeEnv()?G:null,hn=Ve&&Ve.inspect.custom,au=Ve?Ve.inspect:JSON.stringify;function Q(){}Q.prototype._isFaunaValue=!0;h.inherits(Q,o);function C(e,t,n){if(!e)throw new V.InvalidValue("id cannot be null or undefined");this.value={id:e},t&&(this.value.collection=t),n&&(this.value.database=n)}C.prototype._isFaunaRef=!0;h.inherits(C,Q);Object.defineProperty(C.prototype,"collection",{get:function(){return this.value.collection}});Object.defineProperty(C.prototype,"class",{get:z(function(){return this.value.collection},"class is deprecated, use collection instead")});Object.defineProperty(C.prototype,"database",{get:function(){return this.value.database}});Object.defineProperty(C.prototype,"id",{get:function(){return this.value.id}});C.prototype.toJSON=function(){return{"@ref":this.value}};Te(C,function(){var e={collections:"Collection",databases:"Database",indexes:"Index",functions:"Function",roles:"Role",access_providers:"AccessProvider"},t=function(a){return a.collection===void 0},n=function(a){if(t(a)){var i=a.database!==void 0?a.database.toString():"";return a.id==="access_providers"?"AccessProviders("+i+")":a.id.charAt(0).toUpperCase()+a.id.slice(1)+"("+i+")"}if(t(a.collection)){var u=e[a.collection.id];if(u!==void 0){var i=a.database!==void 0?", "+a.database.toString():"";return u+'("'+a.id+'"'+i+")"}}return"Ref("+n(a.collection)+', "'+a.id+'")'};return n(this)});C.prototype.valueOf=function(){return this.value};C.prototype.equals=function(e){return(e instanceof C||h.checkInstanceHasProperty(e,"_isFaunaRef"))&&this.id===e.id&&(this.collection===void 0&&e.collection===void 0||this.collection.equals(e.collection))&&(this.database===void 0&&e.database===void 0||this.database.equals(e.database))};var K={COLLECTIONS:new C("collections"),INDEXES:new C("indexes"),DATABASES:new C("databases"),FUNCTIONS:new C("functions"),ROLES:new C("roles"),KEYS:new C("keys"),ACCESS_PROVIDERS:new C("access_providers")};K.fromName=function(e){switch(e){case"collections":return K.COLLECTIONS;case"indexes":return K.INDEXES;case"databases":return K.DATABASES;case"functions":return K.FUNCTIONS;case"roles":return K.ROLES;case"keys":return K.KEYS;case"access_providers":return K.ACCESS_PROVIDERS}return new C(e)};function $e(e){this.value=e}h.inherits($e,Q);Te($e,function(){return o.toString(this.value)});$e.prototype.toJSON=function(){return{"@set":this.value}};function Ne(e){if(e instanceof Date)e=e.toISOString();else if(e.charAt(e.length-1)!=="Z")throw new V.InvalidValue("Only allowed timezone is 'Z', got: "+e);this.value=e}h.inherits(Ne,Q);Object.defineProperty(Ne.prototype,"date",{get:function(){return new Date(this.value)}});Te(Ne,function(){return'Time("'+this.value+'")'});Ne.prototype.toJSON=function(){return{"@ts":this.value}};function ke(e){e instanceof Date&&(e=e.toISOString().slice(0,10)),this.value=e}h.inherits(ke,Q);Object.defineProperty(ke.prototype,"date",{get:function(){return new Date(this.value)}});Te(ke,function(){return'Date("'+this.value+'")'});ke.prototype.toJSON=function(){return{"@date":this.value}};function Ge(e){if(e instanceof ArrayBuffer)this.value=new Uint8Array(e);else if(typeof e=="string")this.value=St.toByteArray(e);else if(e instanceof Uint8Array)this.value=e;else throw new V.InvalidValue("Bytes type expect argument to be either Uint8Array|ArrayBuffer|string, got: "+au(e))}h.inherits(Ge,Q);Te(Ge,function(){return'Bytes("'+St.fromByteArray(this.value)+'")'});Ge.prototype.toJSON=function(){return{"@bytes":St.fromByteArray(this.value)}};function Je(e){this.value=e}h.inherits(Je,Q);Te(Je,function(){return"Query("+o.toString(this.value)+")"});Je.prototype.toJSON=function(){return{"@query":this.value}};function Te(e,t){e.prototype.toString=t,e.prototype.inspect=t,hn&&(e.prototype[hn]=t)}var U={Value:Q,Ref:C,Native:K,SetRef:$e,FaunaTime:Ne,FaunaDate:ke,Bytes:Ge,Query:Je};var pn=Object.getOwnPropertySymbols,iu=Object.prototype.hasOwnProperty,ou=Object.prototype.propertyIsEnumerable;function su(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function uu(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var a=Object.getOwnPropertyNames(t).map(function(u){return t[u]});if(a.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(u){i[u]=u}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch(u){return!1}}var Xe=uu()?Object.assign:function(e,t){for(var n,a=su(e),i,u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var l in n)iu.call(n,l)&&(a[l]=n[l]);if(pn){i=pn(n);for(var f=0;f<i.length;f++)ou.call(n,i[f])&&(a[i[f]]=n[i[f]])}}return a};function gn(){switch(s.between(1,2,arguments,gn.name),arguments.length){case 1:return new o({"@ref":r(arguments[0])});case 2:return new o({ref:r(arguments[0]),id:r(arguments[1])})}}function yn(e){return s.exact(1,arguments,yn.name),new U.Bytes(e)}function wn(e){return s.exact(1,arguments,wn.name),new o({abort:r(e)})}function vn(e,t){return s.exact(2,arguments,vn.name),new o({at:r(e),expr:r(t)})}function bn(e,t){s.exact(2,arguments,bn.name);var n=[];if(Array.isArray(e)?n=e.map(function(i){return ze(i)}):n=Object.keys(e).map(function(i){var u={};return u[i]=r(e[i]),u}),typeof t=="function")if(Array.isArray(e)){var a=[];e.forEach(function(i){Object.keys(i).forEach(function(u){a.push(Ee(u))})}),t=t.apply(null,a)}else t=t.apply(null,Object.keys(e).map(function(i){return Ee(i)}));return new o({let:n,in:r(t)})}function Ee(e){return s.exact(1,arguments,Ee.name),new o({var:r(e)})}function Tn(e,t,n){return s.exact(3,arguments,Tn.name),new o({if:r(e),then:r(t),else:r(n)})}function En(){s.min(1,arguments,En.name);var e=Ye(arguments);return new o({do:r(e)})}var xn=function(e){return s.exact(1,arguments,xn.name),new o({object:ze(e)})};function At(){switch(s.between(1,2,arguments,At.name),arguments.length){case 1:var e=arguments[0];if(typeof e=="function")return cu(e);if(e instanceof o||h.checkInstanceHasProperty(e,"_isFaunaExpr"))return e;throw new V.InvalidValue("Lambda function takes either a Function or an Expr.");case 2:var t=arguments[0],n=arguments[1];return Ct(t,n)}}function cu(e){var t=es(e);switch(t.length){case 0:throw new V.InvalidValue("Provided Function must take at least 1 argument.");case 1:return Ct(t[0],e(Ee(t[0])));default:return Ct(t,e.apply(null,t.map(function(n){return Ee(n)})))}}function Ct(e,t){return new o({lambda:r(e),expr:r(t)})}function _n(e){s.min(1,arguments,_n.name);var t=Ye(arguments);return t.shift(),new o({call:r(e),arguments:r(S(t))})}function Sn(e){return s.exact(1,arguments,Sn.name),new o({query:r(e)})}function An(e,t){return s.exact(2,arguments,An.name),new o({map:r(t),collection:r(e)})}function Cn(e,t){return s.exact(2,arguments,Cn.name),new o({foreach:r(t),collection:r(e)})}function On(e,t){return s.exact(2,arguments,On.name),new o({filter:r(t),collection:r(e)})}function In(e,t){return s.exact(2,arguments,In.name),new o({take:r(e),collection:r(t)})}function Ln(e,t){return s.exact(2,arguments,Ln.name),new o({drop:r(e),collection:r(t)})}function Dn(e,t){return s.exact(2,arguments,Dn.name),new o({prepend:r(e),collection:r(t)})}function Nn(e,t){return s.exact(2,arguments,Nn.name),new o({append:r(e),collection:r(t)})}function kn(e){return s.exact(1,arguments,kn.name),new o({is_empty:r(e)})}function Pn(e){return s.exact(1,arguments,Pn.name),new o({is_nonempty:r(e)})}function Rn(e){return s.exact(1,arguments,Rn.name),new o({is_number:r(e)})}function jn(e){return s.exact(1,arguments,jn.name),new o({is_double:r(e)})}function Fn(e){return s.exact(1,arguments,Fn.name),new o({is_integer:r(e)})}function Bn(e){return s.exact(1,arguments,Bn.name),new o({is_boolean:r(e)})}function Mn(e){return s.exact(1,arguments,Mn.name),new o({is_null:r(e)})}function Un(e){return s.exact(1,arguments,Un.name),new o({is_bytes:r(e)})}function qn(e){return s.exact(1,arguments,qn.name),new o({is_timestamp:r(e)})}function Hn(e){return s.exact(1,arguments,Hn.name),new o({is_date:r(e)})}function Wn(e){return s.exact(1,arguments,Wn.name),new o({is_string:r(e)})}function Vn(e){return s.exact(1,arguments,Vn.name),new o({is_array:r(e)})}function $n(e){return s.exact(1,arguments,$n.name),new o({is_object:r(e)})}function Gn(e){return s.exact(1,arguments,Gn.name),new o({is_ref:r(e)})}function Jn(e){return s.exact(1,arguments,Jn.name),new o({is_set:r(e)})}function Xn(e){return s.exact(1,arguments,Xn.name),new o({is_doc:r(e)})}function zn(e){return s.exact(1,arguments,zn.name),new o({is_lambda:r(e)})}function Yn(e){return s.exact(1,arguments,Yn.name),new o({is_collection:r(e)})}function Qn(e){return s.exact(1,arguments,Qn.name),new o({is_database:r(e)})}function Kn(e){return s.exact(1,arguments,Kn.name),new o({is_index:r(e)})}function Zn(e){return s.exact(1,arguments,Zn.name),new o({is_function:r(e)})}function er(e){return s.exact(1,arguments,er.name),new o({is_key:r(e)})}function tr(e){return s.exact(1,arguments,tr.name),new o({is_token:r(e)})}function nr(e){return s.exact(1,arguments,nr.name),new o({is_credentials:r(e)})}function rr(e){return s.exact(1,arguments,rr.name),new o({is_role:r(e)})}function ar(e,t){return s.between(1,2,arguments,ar.name),t=h.defaults(t,null),new o(D({get:r(e)},{ts:r(t)}))}function ir(e){return s.exact(1,arguments,ir.name),new o({key_from_secret:r(e)})}function or(e,t,n){return s.exact(3,arguments,or.name),new o({reduce:r(e),initial:r(t),collection:r(n)})}function sr(e,t){return s.between(1,2,arguments,sr.name),t=h.defaults(t,{}),new o(Xe({paginate:r(e)},ze(t)))}function ur(e,t){return s.between(1,2,arguments,ur.name),t=h.defaults(t,null),new o(D({exists:r(e)},{ts:r(t)}))}function cr(e,t){return s.between(1,2,arguments,cr.name),new o({create:r(e),params:r(t)})}function lr(e,t){return s.exact(2,arguments,lr.name),new o({update:r(e),params:r(t)})}function fr(e,t){return s.exact(2,arguments,fr.name),new o({replace:r(e),params:r(t)})}function dr(e){return s.exact(1,arguments,dr.name),new o({delete:r(e)})}function mr(e,t,n,a){return s.exact(4,arguments,mr.name),new o({insert:r(e),ts:r(t),action:r(n),params:r(a)})}function hr(e,t,n){return s.exact(3,arguments,hr.name),new o({remove:r(e),ts:r(t),action:r(n)})}function pr(e){return s.exact(1,arguments,pr.name),new o({create_class:r(e)})}function gr(e){return s.exact(1,arguments,gr.name),new o({create_collection:r(e)})}function yr(e){return s.exact(1,arguments,yr.name),new o({create_database:r(e)})}function wr(e){return s.exact(1,arguments,wr.name),new o({create_index:r(e)})}function vr(e){return s.exact(1,arguments,vr.name),new o({create_key:r(e)})}function br(e){return s.exact(1,arguments,br.name),new o({create_function:r(e)})}function Tr(e){return s.exact(1,arguments,Tr.name),new o({create_role:r(e)})}function Er(e){return s.exact(1,arguments,Er.name),new o({create_access_provider:r(e)})}function xr(e){return s.exact(1,arguments,xr.name),new o({singleton:r(e)})}function _r(e){return s.exact(1,arguments,_r.name),new o({events:r(e)})}function Sr(e){s.min(1,arguments,Sr.name);var t=Ye(arguments);return t.shift(),new o({match:r(e),terms:r(S(t))})}function Ar(){return s.min(1,arguments,Ar.name),new o({union:r(S(arguments))})}function Cr(e,t,n){return s.between(2,3,arguments,Cr.name),new o(D({merge:r(e),with:r(t)},{lambda:r(n)}))}function Or(){return s.min(1,arguments,Or.name),new o({intersection:r(S(arguments))})}function Ir(){return s.min(1,arguments,Ir.name),new o({difference:r(S(arguments))})}function Lr(e){return s.exact(1,arguments,Lr.name),new o({distinct:r(e)})}function Dr(e,t){return s.exact(2,arguments,Dr.name),new o({join:r(e),with:r(t)})}function Nr(e,t,n){return s.exact(3,arguments,Nr.name),new o({range:r(e),from:r(t),to:r(n)})}function kr(e,t){return s.exact(2,arguments,kr.name),new o({login:r(e),params:r(t)})}function Pr(e){return s.exact(1,arguments,Pr.name),new o({logout:r(e)})}function Rr(e,t){return s.exact(2,arguments,Rr.name),new o({identify:r(e),password:r(t)})}function jr(){return s.exact(0,arguments,jr.name),new o({identity:null})}function Fr(){return s.exact(0,arguments,Fr.name),new o({current_identity:null})}function Br(){return s.exact(0,arguments,Br.name),new o({has_identity:null})}function Mr(){return s.exact(0,arguments,Mr.name),new o({has_current_identity:null})}function Ur(){return s.exact(0,arguments,Ur.name),new o({current_token:null})}function qr(){return s.exact(0,arguments,qr.name),new o({has_current_token:null})}function Hr(e,t){return s.min(1,arguments,Hr.name),t=h.defaults(t,null),new o(D({concat:r(e)},{separator:r(t)}))}function Wr(e,t){return s.min(1,arguments,Wr.name),new o(D({casefold:r(e)},{normalizer:r(t)}))}function Vr(e,t){return s.exact(2,arguments,Vr.name),new o({containsstr:r(e),search:r(t)})}function $r(e,t){return s.exact(2,arguments,$r.name),new o({containsstrregex:r(e),pattern:r(t)})}function Gr(e,t){return s.exact(2,arguments,Gr.name),new o({startswith:r(e),search:r(t)})}function Jr(e,t){return s.exact(2,arguments,Jr.name),new o({endswith:r(e),search:r(t)})}function Xr(e){return s.exact(1,arguments,Xr.name),new o({regexescape:r(e)})}function zr(e,t,n){return s.between(2,3,arguments,zr.name),n=h.defaults(n,null),new o(D({findstr:r(e),find:r(t)},{start:r(n)}))}function Yr(e,t,n,a){return s.between(2,4,arguments,Yr.name),n=h.defaults(n,null),new o(D({findstrregex:r(e),pattern:r(t)},{start:r(n),num_results:r(a)}))}function Qr(e){return s.exact(1,arguments,Qr.name),new o({length:r(e)})}function Kr(e){return s.exact(1,arguments,Kr.name),new o({lowercase:r(e)})}function Zr(e){return s.exact(1,arguments,Zr.name),new o({ltrim:r(e)})}function ea(e,t,n){return s.between(1,3,arguments,ea.name),t=h.defaults(t,null),n=h.defaults(n,null),new o(D({ngram:r(e)},{min:r(t),max:r(n)}))}function ta(e,t){return s.between(1,2,arguments,ta.name),t=h.defaults(t,null),new o(D({repeat:r(e)},{number:r(t)}))}function na(e,t,n){return s.exact(3,arguments,na.name),new o({replacestr:r(e),find:r(t),replace:r(n)})}function ra(e,t,n,a){return s.between(3,4,arguments,ra.name),a=h.defaults(a,null),new o(D({replacestrregex:r(e),pattern:r(t),replace:r(n)},{first:r(a)}))}function aa(e){return s.exact(1,arguments,aa.name),new o({rtrim:r(e)})}function ia(e){return s.exact(1,arguments,ia.name),new o({space:r(e)})}function oa(e,t,n){return s.between(1,3,arguments,oa.name),t=h.defaults(t,null),n=h.defaults(n,null),new o(D({substring:r(e)},{start:r(t),length:r(n)}))}function sa(e){return s.exact(1,arguments,sa.name),new o({titlecase:r(e)})}function ua(e){return s.exact(1,arguments,ua.name),new o({trim:r(e)})}function ca(e){return s.exact(1,arguments,ca.name),new o({uppercase:r(e)})}function la(e){s.min(1,arguments,la.name);var t=Ye(arguments);return t.shift(),new o({format:r(e),values:r(S(t))})}function fa(e){return s.exact(1,arguments,fa.name),new o({time:r(e)})}function da(e,t){return s.exact(2,arguments,da.name),new o({epoch:r(e),unit:r(t)})}function ma(e,t,n){return s.exact(3,arguments,ma.name),new o({time_add:r(e),offset:r(t),unit:r(n)})}function ha(e,t,n){return s.exact(3,arguments,ha.name),new o({time_subtract:r(e),offset:r(t),unit:r(n)})}function pa(e,t,n){return s.exact(3,arguments,pa.name),new o({time_diff:r(e),other:r(t),unit:r(n)})}function ga(e){return s.exact(1,arguments,ga.name),new o({date:r(e)})}function ya(){return s.exact(0,arguments,ya.name),new o({now:r(null)})}function wa(){return s.exact(0,arguments,wa.name),new o({next_id:null})}function va(){return s.exact(0,arguments,va.name),new o({new_id:null})}function ba(e,t){switch(s.between(1,2,arguments,ba.name),arguments.length){case 1:return new o({database:r(e)});case 2:return new o({database:r(e),scope:r(t)})}}function Ta(e,t){switch(s.between(1,2,arguments,Ta.name),arguments.length){case 1:return new o({index:r(e)});case 2:return new o({index:r(e),scope:r(t)})}}function Ea(e,t){switch(s.between(1,2,arguments,Ea.name),arguments.length){case 1:return new o({class:r(e)});case 2:return new o({class:r(e),scope:r(t)})}}function xa(e,t){switch(s.between(1,2,arguments,xa.name),arguments.length){case 1:return new o({collection:r(e)});case 2:return new o({collection:r(e),scope:r(t)})}}function _a(e,t){switch(s.between(1,2,arguments,_a.name),arguments.length){case 1:return new o({function:r(e)});case 2:return new o({function:r(e),scope:r(t)})}}function Sa(e,t){return s.between(1,2,arguments,Sa.name),t=h.defaults(t,null),new o(D({role:r(e)},{scope:r(t)}))}function Aa(e){return s.max(1,arguments,Aa.name),e=h.defaults(e,null),new o({access_providers:r(e)})}function Ca(e){return s.max(1,arguments,Ca.name),e=h.defaults(e,null),new o({classes:r(e)})}function Oa(e){return s.max(1,arguments,Oa.name),e=h.defaults(e,null),new o({collections:r(e)})}function Ia(e){return s.max(1,arguments,Ia.name),e=h.defaults(e,null),new o({databases:r(e)})}function La(e){return s.max(1,arguments,La.name),e=h.defaults(e,null),new o({indexes:r(e)})}function Da(e){return s.max(1,arguments,Da.name),e=h.defaults(e,null),new o({functions:r(e)})}function Na(e){return s.max(1,arguments,Na.name),e=h.defaults(e,null),new o({roles:r(e)})}function ka(e){return s.max(1,arguments,ka.name),e=h.defaults(e,null),new o({keys:r(e)})}function Pa(e){return s.max(1,arguments,Pa.name),e=h.defaults(e,null),new o({tokens:r(e)})}function Ra(e){return s.max(1,arguments,Ra.name),e=h.defaults(e,null),new o({credentials:r(e)})}function ja(){return s.min(1,arguments,ja.name),new o({equals:r(S(arguments))})}function Fa(e,t){return s.exact(2,arguments,Fa.name),new o({contains:r(e),in:r(t)})}function Ba(e,t){return s.exact(2,arguments,Ba.name),new o({contains_value:r(e),in:r(t)})}function Ma(e,t){return s.exact(2,arguments,Ma.name),new o({contains_field:r(e),in:r(t)})}function Ua(e,t){return s.exact(2,arguments,Ua.name),new o({contains_path:r(e),in:r(t)})}function qa(e,t,n){s.between(2,3,arguments,qa.name);var a={select:r(e),from:r(t)};return n!==void 0&&(a.default=r(n)),new o(a)}function Ha(e,t){return s.exact(2,arguments,Ha.name),new o({select_all:r(e),from:r(t)})}function Wa(e){return s.exact(1,arguments,Wa.name),new o({abs:r(e)})}function Va(){return s.min(1,arguments,Va.name),new o({add:r(S(arguments))})}function $a(){return s.min(1,arguments,$a.name),new o({bitand:r(S(arguments))})}function Ga(e){return s.exact(1,arguments,Ga.name),new o({bitnot:r(e)})}function Ja(){return s.min(1,arguments,Ja.name),new o({bitor:r(S(arguments))})}function Xa(){return s.min(1,arguments,Xa.name),new o({bitxor:r(S(arguments))})}function za(e){return s.exact(1,arguments,za.name),new o({ceil:r(e)})}function Ya(){return s.min(1,arguments,Ya.name),new o({divide:r(S(arguments))})}function Qa(e){return s.exact(1,arguments,Qa.name),new o({floor:r(e)})}function Ka(){return s.min(1,arguments,Ka.name),new o({max:r(S(arguments))})}function Za(){return s.min(1,arguments,Za.name),new o({min:r(S(arguments))})}function ei(){return s.min(1,arguments,ei.name),new o({modulo:r(S(arguments))})}function ti(){return s.min(1,arguments,ti.name),new o({multiply:r(S(arguments))})}function ni(e,t){return s.min(1,arguments,ni.name),t=h.defaults(t,null),new o(D({round:r(e)},{precision:r(t)}))}function ri(){return s.min(1,arguments,ri.name),new o({subtract:r(S(arguments))})}function ai(e){return s.exact(1,arguments,ai.name),new o({sign:r(e)})}function ii(e){return s.exact(1,arguments,ii.name),new o({sqrt:r(e)})}function oi(e,t){return s.min(1,arguments,oi.name),t=h.defaults(t,null),new o(D({trunc:r(e)},{precision:r(t)}))}function si(e){return s.exact(1,arguments,si.name),new o({count:r(e)})}function ui(e){return s.exact(1,arguments,ui.name),new o({sum:r(e)})}function ci(e){return s.exact(1,arguments,ci.name),new o({mean:r(e)})}function li(e){return s.exact(1,arguments,li.name),new o({any:r(e)})}function fi(e){return s.exact(1,arguments,fi.name),new o({all:r(e)})}function di(e){return s.exact(1,arguments,di.name),new o({acos:r(e)})}function mi(e){return s.exact(1,arguments,mi.name),new o({asin:r(e)})}function hi(e){return s.exact(1,arguments,hi.name),new o({atan:r(e)})}function pi(e){return s.exact(1,arguments,pi.name),new o({cos:r(e)})}function gi(e){return s.exact(1,arguments,gi.name),new o({cosh:r(e)})}function yi(e){return s.exact(1,arguments,yi.name),new o({degrees:r(e)})}function wi(e){return s.exact(1,arguments,wi.name),new o({exp:r(e)})}function vi(e,t){return s.min(1,arguments,vi.name),t=h.defaults(t,null),new o(D({hypot:r(e)},{b:r(t)}))}function bi(e){return s.exact(1,arguments,bi.name),new o({ln:r(e)})}function Ti(e){return s.exact(1,arguments,Ti.name),new o({log:r(e)})}function Ei(e,t){return s.min(1,arguments,Ei.name),t=h.defaults(t,null),new o(D({pow:r(e)},{exp:r(t)}))}function xi(e){return s.exact(1,arguments,xi.name),new o({radians:r(e)})}function _i(e){return s.exact(1,arguments,_i.name),new o({sin:r(e)})}function Si(e){return s.exact(1,arguments,Si.name),new o({sinh:r(e)})}function Ai(e){return s.exact(1,arguments,Ai.name),new o({tan:r(e)})}function Ci(e){return s.exact(1,arguments,Ci.name),new o({tanh:r(e)})}function Oi(){return s.min(1,arguments,Oi.name),new o({lt:r(S(arguments))})}function Ii(){return s.min(1,arguments,Ii.name),new o({lte:r(S(arguments))})}function Li(){return s.min(1,arguments,Li.name),new o({gt:r(S(arguments))})}function Di(){return s.min(1,arguments,Di.name),new o({gte:r(S(arguments))})}function Ni(){return s.min(1,arguments,Ni.name),new o({and:r(S(arguments))})}function ki(){return s.min(1,arguments,ki.name),new o({or:r(S(arguments))})}function Pi(e){return s.exact(1,arguments,Pi.name),new o({not:r(e)})}function Ri(e){return s.exact(1,arguments,Ri.name),new o({to_string:r(e)})}function ji(e){return s.exact(1,arguments,ji.name),new o({to_number:r(e)})}function Fi(e){return s.exact(1,arguments,Fi.name),new o({to_object:r(e)})}function Bi(e){return s.exact(1,arguments,Bi.name),new o({to_array:r(e)})}function Mi(e){return s.exact(1,arguments,Mi.name),new o({to_double:r(e)})}function Ui(e){return s.exact(1,arguments,Ui.name),new o({to_integer:r(e)})}function qi(e){return s.exact(1,arguments,qi.name),new o({to_time:r(e)})}function Hi(e){return s.exact(1,arguments,Hi.name),new o({to_seconds:r(e)})}function Wi(e){return s.exact(1,arguments,Wi.name),new o({to_millis:r(e)})}function Vi(e){return s.exact(1,arguments,Vi.name),new o({to_micros:r(e)})}function $i(e){return s.exact(1,arguments,$i.name),new o({day_of_week:r(e)})}function Gi(e){return s.exact(1,arguments,Gi.name),new o({day_of_year:r(e)})}function Ji(e){return s.exact(1,arguments,Ji.name),new o({day_of_month:r(e)})}function Xi(e){return s.exact(1,arguments,Xi.name),new o({hour:r(e)})}function zi(e){return s.exact(1,arguments,zi.name),new o({minute:r(e)})}function Yi(e){return s.exact(1,arguments,Yi.name),new o({second:r(e)})}function Qi(e){return s.exact(1,arguments,Qi.name),new o({month:r(e)})}function Ki(e){return s.exact(1,arguments,Ki.name),new o({year:r(e)})}function Zi(e){return s.exact(1,arguments,Zi.name),new o({to_date:r(e)})}function eo(e,t){return s.exact(2,arguments,eo.name),new o({move_database:r(e),to:r(t)})}function to(e){return s.exact(1,arguments,to.name),new o({documents:r(e)})}function no(e){return s.exact(1,arguments,no.name),new o({reverse:r(e)})}function ro(e){return s.exact(1,arguments,ro.name),new o({access_provider:r(e)})}function s(e,t,n,a){if(e!==null&&n.length<e||t!==null&&n.length>t)throw new V.InvalidArity(e,t,n.length,a)}s.exact=function(e,t,n){s(e,e,t,n)};s.max=function(e,t,n){s(null,e,t,n)};s.min=function(e,t,n){s(e,null,t,n)};s.between=function(e,t,n,a){s(e,t,n,a)};function D(e,t){for(var n in t){var a=t[n];a!=null&&(e[n]=a)}return e}function S(e){var t=Array.isArray(e)?e:Array.prototype.slice.call(e);return e.length===1?e[0]:t}function Ye(e){var t=[];return t.push.apply(t,e),t}function r(e){return s.exact(1,arguments,r.name),e===null?null:e instanceof o||h.checkInstanceHasProperty(e,"_isFaunaExpr")?e:typeof e=="symbol"?e.toString().replace(/Symbol\((.*)\)/,function(t,n){return n}):typeof e=="function"?At(e):Array.isArray(e)?new o(e.map(function(t){return r(t)})):e instanceof Uint8Array||e instanceof ArrayBuffer?new U.Bytes(e):typeof e=="object"?new o({object:ze(e)}):e}function ze(e){if(e!==null){var t={};return Object.keys(e).forEach(function(n){t[n]=r(e[n])}),t}else return null}var ie={Ref:gn,Bytes:yn,Abort:wn,At:vn,Let:bn,Var:Ee,If:Tn,Do:En,Object:xn,Lambda:At,Call:_n,Query:Sn,Map:An,Foreach:Cn,Filter:On,Take:In,Drop:Ln,Prepend:Dn,Append:Nn,IsEmpty:kn,IsNonEmpty:Pn,IsNumber:Rn,IsDouble:jn,IsInteger:Fn,IsBoolean:Bn,IsNull:Mn,IsBytes:Un,IsTimestamp:qn,IsDate:Hn,IsString:Wn,IsArray:Vn,IsObject:$n,IsRef:Gn,IsSet:Jn,IsDoc:Xn,IsLambda:zn,IsCollection:Yn,IsDatabase:Qn,IsIndex:Kn,IsFunction:Zn,IsKey:er,IsToken:tr,IsCredentials:nr,IsRole:rr,Get:ar,KeyFromSecret:ir,Reduce:or,Paginate:sr,Exists:ur,Create:cr,Update:lr,Replace:fr,Delete:dr,Insert:mr,Remove:hr,CreateClass:z(pr,"CreateClass() is deprecated, use CreateCollection() instead"),CreateCollection:gr,CreateDatabase:yr,CreateIndex:wr,CreateKey:vr,CreateFunction:br,CreateRole:Tr,CreateAccessProvider:Er,Singleton:xr,Events:_r,Match:Sr,Union:Ar,Merge:Cr,Intersection:Or,Difference:Ir,Distinct:Lr,Join:Dr,Range:Nr,Login:kr,Logout:Pr,Identify:Rr,Identity:z(jr,"Identity() is deprecated, use CurrentIdentity() instead"),CurrentIdentity:Fr,HasIdentity:z(Br,"HasIdentity() is deprecated, use HasCurrentIdentity() instead"),HasCurrentIdentity:Mr,CurrentToken:Ur,HasCurrentToken:qr,Concat:Hr,Casefold:Wr,ContainsStr:Vr,ContainsStrRegex:$r,StartsWith:Gr,EndsWith:Jr,FindStr:zr,FindStrRegex:Yr,Length:Qr,LowerCase:Kr,LTrim:Zr,NGram:ea,Repeat:ta,ReplaceStr:na,ReplaceStrRegex:ra,RegexEscape:Xr,RTrim:aa,Space:ia,SubString:oa,TitleCase:sa,Trim:ua,UpperCase:ca,Format:la,Time:fa,TimeAdd:ma,TimeSubtract:ha,TimeDiff:pa,Epoch:da,Date:ga,Now:ya,NextId:z(wa,"NextId() is deprecated, use NewId() instead"),NewId:va,Database:ba,Index:Ta,Class:z(Ea,"Class() is deprecated, use Collection() instead"),Collection:xa,Function:_a,Role:Sa,AccessProviders:Aa,Classes:z(Ca,"Classes() is deprecated, use Collections() instead"),Collections:Oa,Databases:Ia,Indexes:La,Functions:Da,Roles:Na,Keys:ka,Tokens:Pa,Credentials:Ra,Equals:ja,Contains:z(Fa,"Contains() is deprecated, use ContainsPath() instead"),ContainsPath:Ua,ContainsField:Ma,ContainsValue:Ba,Select:qa,SelectAll:z(Ha,"SelectAll() is deprecated. Avoid use."),Abs:Wa,Add:Va,BitAnd:$a,BitNot:Ga,BitOr:Ja,BitXor:Xa,Ceil:za,Divide:Ya,Floor:Qa,Max:Ka,Min:Za,Modulo:ei,Multiply:ti,Round:ni,Subtract:ri,Sign:ai,Sqrt:ii,Trunc:oi,Count:si,Sum:ui,Mean:ci,Any:li,All:fi,Acos:di,Asin:mi,Atan:hi,Cos:pi,Cosh:gi,Degrees:yi,Exp:wi,Hypot:vi,Ln:bi,Log:Ti,Pow:Ei,Radians:xi,Sin:_i,Sinh:Si,Tan:Ai,Tanh:Ci,LT:Oi,LTE:Ii,GT:Li,GTE:Di,And:Ni,Or:ki,Not:Pi,ToString:Ri,ToNumber:ji,ToObject:Fi,ToArray:Bi,ToDouble:Mi,ToInteger:Ui,ToTime:qi,ToSeconds:Hi,ToMicros:Vi,ToMillis:Wi,DayOfMonth:Ji,DayOfWeek:$i,DayOfYear:Gi,Second:Yi,Minute:zi,Hour:Xi,Month:Qi,Year:Ki,ToDate:Zi,MoveDatabase:eo,Documents:to,Reverse:no,AccessProvider:ro,wrap:r},lu="faunadb@4.2.0",fu="faunadb@4.2.0",du=!1,mu="sha512-UHDShinCxBafQ5QZo5VFIDhHqr136L4F1SRlF5yQ/18JNqEix5Rxwsl9KLmjGYH1Dum0QmuvNKY6agKt/4Y8wA==",hu="/faunadb",pu={},gu={type:"version",registry:!0,raw:"faunadb@4.2.0",name:"faunadb",escapedName:"faunadb",rawSpec:"4.2.0",saveSpec:null,fetchSpec:"4.2.0"},yu=["#USER","/"],wu="https://registry.npmjs.org/faunadb/-/faunadb-4.2.0.tgz",vu="51b2ef553d2f082d6eb282e00891cd94759fa2e3",bu="faunadb@4.2.0",Tu="D:\\WebDev\\GitHub\\todos-js-snowpack-tailwind",Eu="4",xu={http2:!1,http:!1,https:!1,os:!1,util:!1},_u={url:"https://github.com/fauna/faunadb-js/issues"},Su=!1,Au={"abort-controller":"^3.0.0","base64-js":"^1.2.0","btoa-lite":"^1.0.0","cross-fetch":"^3.0.6",dotenv:"^8.2.0","fn-annotate":"^1.1.3","object-assign":"^4.1.0","util-deprecate":"^1.0.2"},Cu=!1,Ou="FaunaDB Javascript driver for Node.JS and Browsers",Iu={browserify:"^16.2.2",eslint:"^5.3.0","eslint-config-prettier":"^6.5.0","eslint-plugin-prettier":"^3.1.1",husky:">=1","ink-docstrap":"^1.2.1",jest:"^24.9.0",jsdoc:"^3.6.3","lint-staged":">=8",prettier:"1.18.2","semantic-release":"^17.1.2",terser:"^4.3.9",webpack:"^5.23.0","webpack-cli":"^4.5.0"},Lu=["index.d.ts","src/","dist/"],Du="https://fauna.com",Nu={hooks:{"pre-commit":"lint-staged"}},ku=["database","fauna","official","driver"],Pu="MPL-2.0",Ru="index.js",ju="faunadb",Fu={branches:["master"]},Bu={type:"git",url:"git+https://github.com/fauna/faunadb-js.git"},Mu={browserify:"browserify index.js --standalone faunadb -o dist/faunadb.js","browserify-min":"browserify index.js --standalone faunadb | terser -c -m --keep-fnames --keep-classnames -o dist/faunadb-min.js",doc:"jsdoc -c ./jsdoc.json",prettify:'prettier --write "{src,test}/**/*.{js,ts}"',"semantic-release":"semantic-release",test:"jest --env=node --verbose=false --forceExit ./test",wp:"webpack"},Uu="index.d.ts",qu="4.2.0",Ot={_from:lu,_id:fu,_inBundle:du,_integrity:mu,_location:hu,_phantomChildren:pu,_requested:gu,_requiredBy:yu,_resolved:wu,_shasum:vu,_spec:bu,_where:Tu,apiVersion:Eu,browser:xu,bugs:_u,bundleDependencies:Su,dependencies:Au,deprecated:Cu,description:Ou,devDependencies:Iu,files:Lu,homepage:Du,husky:Nu,keywords:ku,license:Pu,"lint-staged":{"*.{js,css,json,md}":["prettier --write","git add"],"*.js":["eslint --fix","git add"]},main:Ru,name:ju,release:Fu,repository:Bu,scripts:Mu,types:Uu,version:qu};function F(e,t,n,a){n===void 0&&(n={}),a===void 0&&(a={}),this.reverse=!1,this.params={},this.before=void 0,this.after=void 0,Xe(this.params,n);var i=this.params.cursor||this.params;"before"in i?(this.before=i.before,delete i.before):"after"in i&&(this.after=i.after,delete i.after),this.options={},Xe(this.options,a),this.client=e,this.set=t,this._faunaFunctions=[]}F.prototype.map=function(e){var t=this._clone();return t._faunaFunctions.push(function(n){return ie.Map(n,e)}),t};F.prototype.filter=function(e){var t=this._clone();return t._faunaFunctions.push(function(n){return ie.Filter(n,e)}),t};F.prototype.each=function(e){return this._retrieveNextPage(this.after,!1).then(this._consumePages(e,!1))};F.prototype.eachReverse=function(e){return this._retrieveNextPage(this.before,!0).then(this._consumePages(e,!0))};F.prototype.previousPage=function(){var e=this;return this._retrieveNextPage(this.before,!0).then(this._adjustCursors.bind(e))};F.prototype.nextPage=function(){var e=this;return this._retrieveNextPage(this.after,!1).then(this._adjustCursors.bind(e))};F.prototype._adjustCursors=function(e){return e.after!==void 0&&(this.after=e.after),e.before!==void 0&&(this.before=e.before),e.data};F.prototype._consumePages=function(e,t){var n=this;return function(a){var i=[];a.data.forEach(function(l){l.document&&(l.instance=l.document),l.value&&l.value.document&&(l.value.instance=l.value.document),i.push(l)}),e(i);var u;return t?u=a.before:u=a.after,u!==void 0?n._retrieveNextPage(u,t).then(n._consumePages(e,t)):Promise.resolve()}};F.prototype._retrieveNextPage=function(e,t){var n={};Xe(n,this.params);var a=n.cursor||n;e!==void 0?t?a.before=e:a.after=e:t&&(a.before=null);var i=ie.Paginate(this.set,n);return this._faunaFunctions.length>0&&this._faunaFunctions.forEach(function(u){i=u(i)}),this.client.query(i,this.options)};F.prototype._clone=function(){return Object.create(F.prototype,{client:{value:this.client},set:{value:this.set},_faunaFunctions:{value:this._faunaFunctions},before:{value:this.before},after:{value:this.after}})};var ao=F;function io(e,t,n,a,i,u,l,f,d,p,w){this.method=e,this.path=t,this.query=n,this.requestRaw=a,this.requestContent=i,this.responseRaw=u,this.responseContent=l,this.statusCode=f,this.responseHeaders=d,this.startTime=p,this.endTime=w}Object.defineProperty(io.prototype,"timeTaken",{get:function(){return this.endTime-this.startTime}});var It=io;function oo(e){Error.call(this),this.message=e||"Request aborted due to timeout",this.isTimeoutError=!0}h.inherits(oo,Error);function so(e){Error.call(this),this.message=e||"Request aborted",this.isAbortError=!0}h.inherits(so,Error);var xe={TimeoutError:oo,AbortError:so},uo="stream::";function Qe(e){this.type="http2",this._sessionMap={},this._http2SessionIdleTime=e.http2SessionIdleTime}Qe.prototype._resolveSessionFor=function(e,t){var n=t?uo+e:e;if(this._sessionMap[n])return this._sessionMap[n];var a=this,i=null,u=0,l=function(){a._cleanupSessionFor(e,t)},f=function(){i&&(clearTimeout(i),i=null)},d=function(){f();var w=function(){i=null,u===0&&l()};i=setTimeout(w,a._http2SessionIdleTime)},p={session:G.connect(e).once("error",l).once("goaway",l),onRequestStart:function(){++u,f()},onRequestEnd:function(){--u,u===0&&d()}};return this._sessionMap[n]=p,p};Qe.prototype._cleanupSessionFor=function(e,t){var n=t?uo+e:e;this._sessionMap[n]&&(this._sessionMap[n].session.close(),delete this._sessionMap[n])};Qe.prototype.execute=function(e){var t=this,n=e.streamConsumer!=null;return new Promise(function(a,i){var u=!1,l=!1,f=function(k){u=!0,a(k)},d=function(k){if(u&&n)return e.streamConsumer.onError(k);u=!0,i(k)},p=function(){ce.onRequestEnd(),e.signal&&e.signal.removeEventListener("abort",x)},w=function(k){p(),d(k)},x=function(){l=!0,p(),X.close(G.constants.NGHTTP2_CANCEL),d(new xe.AbortError)},P=function(){l=!0,p(),X.close(G.constants.NGHTTP2_CANCEL),d(new xe.TimeoutError)},ue=function(k){var he=k[G.constants.HTTP2_HEADER_STATUS],lt=he>=200&&he<400,pe=lt&&n,Le="",ft=function(H){if(pe)return e.streamConsumer.onData(H);Le+=H},dt=function(){if(l||p(),!pe)return f({body:Le,headers:k,status:he});l||e.streamConsumer.onError(new TypeError("network error"))};pe&&f({body:"[stream]",headers:k,status:he}),X.on("data",ft).on("end",dt)};try{var Ie=(e.path[0]==="/"?e.path:"/"+e.path)+h.querystringify(e.query,"?"),A=Object.assign({},e.headers,{[G.constants.HTTP2_HEADER_PATH]:Ie,[G.constants.HTTP2_HEADER_METHOD]:e.method}),ce=t._resolveSessionFor(e.origin,n),X=ce.session.request(A).setEncoding("utf8").on("error",w).on("response",ue);ce.onRequestStart(),!e.signal&&e.timeout&&X.setTimeout(e.timeout,P),e.signal&&e.signal.addEventListener("abort",x),e.body!=null&&X.write(e.body),X.end()}catch(k){t._cleanupSessionFor(e.origin,n),d(k)}})};var Hu=Qe,co=new WeakMap,Lt=new WeakMap;function E(e){let t=co.get(e);return console.assert(t!=null,"'this' is expected an Event object, but got",e),t}function lo(e){if(e.passiveListener!=null){typeof console!="undefined"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",e.passiveListener);return}!e.event.cancelable||(e.canceled=!0,typeof e.event.preventDefault=="function"&&e.event.preventDefault())}function _e(e,t){co.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let n=Object.keys(t);for(let a=0;a<n.length;++a){let i=n[a];i in this||Object.defineProperty(this,i,fo(i))}}_e.prototype={get type(){return E(this).event.type},get target(){return E(this).eventTarget},get currentTarget(){return E(this).currentTarget},composedPath(){let e=E(this).currentTarget;return e==null?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return E(this).eventPhase},stopPropagation(){let e=E(this);e.stopped=!0,typeof e.event.stopPropagation=="function"&&e.event.stopPropagation()},stopImmediatePropagation(){let e=E(this);e.stopped=!0,e.immediateStopped=!0,typeof e.event.stopImmediatePropagation=="function"&&e.event.stopImmediatePropagation()},get bubbles(){return Boolean(E(this).event.bubbles)},get cancelable(){return Boolean(E(this).event.cancelable)},preventDefault(){lo(E(this))},get defaultPrevented(){return E(this).canceled},get composed(){return Boolean(E(this).event.composed)},get timeStamp(){return E(this).timeStamp},get srcElement(){return E(this).eventTarget},get cancelBubble(){return E(this).stopped},set cancelBubble(e){if(!e)return;let t=E(this);t.stopped=!0,typeof t.event.cancelBubble=="boolean"&&(t.event.cancelBubble=!0)},get returnValue(){return!E(this).canceled},set returnValue(e){e||lo(E(this))},initEvent(){}};Object.defineProperty(_e.prototype,"constructor",{value:_e,configurable:!0,writable:!0});typeof window!="undefined"&&typeof window.Event!="undefined"&&(Object.setPrototypeOf(_e.prototype,window.Event.prototype),Lt.set(window.Event.prototype,_e));function fo(e){return{get(){return E(this).event[e]},set(t){E(this).event[e]=t},configurable:!0,enumerable:!0}}function Wu(e){return{value(){let t=E(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}function Vu(e,t){let n=Object.keys(t);if(n.length===0)return e;function a(i,u){e.call(this,i,u)}a.prototype=Object.create(e.prototype,{constructor:{value:a,configurable:!0,writable:!0}});for(let i=0;i<n.length;++i){let u=n[i];if(!(u in e.prototype)){let f=typeof Object.getOwnPropertyDescriptor(t,u).value=="function";Object.defineProperty(a.prototype,u,f?Wu(u):fo(u))}}return a}function mo(e){if(e==null||e===Object.prototype)return _e;let t=Lt.get(e);return t==null&&(t=Vu(mo(Object.getPrototypeOf(e)),e),Lt.set(e,t)),t}function $u(e,t){let n=mo(Object.getPrototypeOf(t));return new n(e,t)}function Gu(e){return E(e).immediateStopped}function Ju(e,t){E(e).eventPhase=t}function Xu(e,t){E(e).currentTarget=t}function ho(e,t){E(e).passiveListener=t}var po=new WeakMap,go=1,yo=2,Ke=3;function Ze(e){return e!==null&&typeof e=="object"}function Pe(e){let t=po.get(e);if(t==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}function zu(e){return{get(){let n=Pe(this).get(e);for(;n!=null;){if(n.listenerType===Ke)return n.listener;n=n.next}return null},set(t){typeof t!="function"&&!Ze(t)&&(t=null);let n=Pe(this),a=null,i=n.get(e);for(;i!=null;)i.listenerType===Ke?a!==null?a.next=i.next:i.next!==null?n.set(e,i.next):n.delete(e):a=i,i=i.next;if(t!==null){let u={listener:t,listenerType:Ke,passive:!1,once:!1,next:null};a===null?n.set(e,u):a.next=u}},configurable:!0,enumerable:!0}}function wo(e,t){Object.defineProperty(e,`on${t}`,zu(t))}function vo(e){function t(){Z.call(this)}t.prototype=Object.create(Z.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let n=0;n<e.length;++n)wo(t.prototype,e[n]);return t}function Z(){if(this instanceof Z){po.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return vo(arguments[0]);if(arguments.length>0){let e=new Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return vo(e)}throw new TypeError("Cannot call a class as a function")}Z.prototype={addEventListener(e,t,n){if(t==null)return;if(typeof t!="function"&&!Ze(t))throw new TypeError("'listener' should be a function or an object.");let a=Pe(this),i=Ze(n),l=Boolean(i?n.capture:n)?go:yo,f={listener:t,listenerType:l,passive:i&&Boolean(n.passive),once:i&&Boolean(n.once),next:null},d=a.get(e);if(d===void 0){a.set(e,f);return}let p=null;for(;d!=null;){if(d.listener===t&&d.listenerType===l)return;p=d,d=d.next}p.next=f},removeEventListener(e,t,n){if(t==null)return;let a=Pe(this),u=(Ze(n)?Boolean(n.capture):Boolean(n))?go:yo,l=null,f=a.get(e);for(;f!=null;){if(f.listener===t&&f.listenerType===u){l!==null?l.next=f.next:f.next!==null?a.set(e,f.next):a.delete(e);return}l=f,f=f.next}},dispatchEvent(e){if(e==null||typeof e.type!="string")throw new TypeError('"event.type" should be a string.');let t=Pe(this),n=e.type,a=t.get(n);if(a==null)return!0;let i=$u(this,e),u=null;for(;a!=null;){if(a.once?u!==null?u.next=a.next:a.next!==null?t.set(n,a.next):t.delete(n):u=a,ho(i,a.passive?a.listener:null),typeof a.listener=="function")try{a.listener.call(this,i)}catch(l){typeof console!="undefined"&&typeof console.error=="function"&&console.error(l)}else a.listenerType!==Ke&&typeof a.listener.handleEvent=="function"&&a.listener.handleEvent(i);if(Gu(i))break;a=a.next}return ho(i,null),Ju(i,0),Xu(i,null),!i.defaultPrevented}};Object.defineProperty(Z.prototype,"constructor",{value:Z,configurable:!0,writable:!0});typeof window!="undefined"&&typeof window.EventTarget!="undefined"&&Object.setPrototypeOf(Z.prototype,window.EventTarget.prototype);var Se=class extends Z{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let t=et.get(this);if(typeof t!="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return t}};wo(Se.prototype,"abort");function Yu(){let e=Object.create(Se.prototype);return Z.call(e),et.set(e,!1),e}function Qu(e){et.get(e)===!1&&(et.set(e,!0),e.dispatchEvent({type:"abort"}))}var et=new WeakMap;Object.defineProperties(Se.prototype,{aborted:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Se.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var tt=class{constructor(){bo.set(this,Yu())}get signal(){return To(this)}abort(){Qu(To(this))}},bo=new WeakMap;function To(e){let t=bo.get(e);if(t==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${e===null?"null":typeof e}`);return t}Object.defineProperties(tt.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(tt.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});var Re=typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:void 0;Re&&(typeof Re.AbortController=="undefined"&&(Re.AbortController=tt),typeof Re.AbortSignal=="undefined"&&(Re.AbortSignal=Se));var Ku=ns(function(e,t){var n=typeof self!="undefined"?self:ne,a=function(){function u(){this.fetch=!1,this.DOMException=n.DOMException}return u.prototype=n,new u}();(function(u){var l=function(f){var d={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch(c){return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function p(c){return c&&DataView.prototype.isPrototypeOf(c)}if(d.arrayBuffer)var w=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],x=ArrayBuffer.isView||function(c){return c&&w.indexOf(Object.prototype.toString.call(c))>-1};function P(c){if(typeof c!="string"&&(c=String(c)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(c))throw new TypeError("Invalid character in header field name");return c.toLowerCase()}function ue(c){return typeof c!="string"&&(c=String(c)),c}function Ie(c){var m={next:function(){var v=c.shift();return{done:v===void 0,value:v}}};return d.iterable&&(m[Symbol.iterator]=function(){return m}),m}function A(c){this.map={},c instanceof A?c.forEach(function(m,v){this.append(v,m)},this):Array.isArray(c)?c.forEach(function(m){this.append(m[0],m[1])},this):c&&Object.getOwnPropertyNames(c).forEach(function(m){this.append(m,c[m])},this)}A.prototype.append=function(c,m){c=P(c),m=ue(m);var v=this.map[c];this.map[c]=v?v+", "+m:m},A.prototype.delete=function(c){delete this.map[P(c)]},A.prototype.get=function(c){return c=P(c),this.has(c)?this.map[c]:null},A.prototype.has=function(c){return this.map.hasOwnProperty(P(c))},A.prototype.set=function(c,m){this.map[P(c)]=ue(m)},A.prototype.forEach=function(c,m){for(var v in this.map)this.map.hasOwnProperty(v)&&c.call(m,this.map[v],v,this)},A.prototype.keys=function(){var c=[];return this.forEach(function(m,v){c.push(v)}),Ie(c)},A.prototype.values=function(){var c=[];return this.forEach(function(m){c.push(m)}),Ie(c)},A.prototype.entries=function(){var c=[];return this.forEach(function(m,v){c.push([v,m])}),Ie(c)},d.iterable&&(A.prototype[Symbol.iterator]=A.prototype.entries);function ce(c){if(c.bodyUsed)return Promise.reject(new TypeError("Already read"));c.bodyUsed=!0}function X(c){return new Promise(function(m,v){c.onload=function(){m(c.result)},c.onerror=function(){v(c.error)}})}function k(c){var m=new FileReader,v=X(m);return m.readAsArrayBuffer(c),v}function he(c){var m=new FileReader,v=X(m);return m.readAsText(c),v}function lt(c){for(var m=new Uint8Array(c),v=new Array(m.length),L=0;L<m.length;L++)v[L]=String.fromCharCode(m[L]);return v.join("")}function pe(c){if(c.slice)return c.slice(0);var m=new Uint8Array(c.byteLength);return m.set(new Uint8Array(c)),m.buffer}function Le(){return this.bodyUsed=!1,this._initBody=function(c){this._bodyInit=c,c?typeof c=="string"?this._bodyText=c:d.blob&&Blob.prototype.isPrototypeOf(c)?this._bodyBlob=c:d.formData&&FormData.prototype.isPrototypeOf(c)?this._bodyFormData=c:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)?this._bodyText=c.toString():d.arrayBuffer&&d.blob&&p(c)?(this._bodyArrayBuffer=pe(c.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(c)||x(c))?this._bodyArrayBuffer=pe(c):this._bodyText=c=Object.prototype.toString.call(c):this._bodyText="",this.headers.get("content-type")||(typeof c=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var c=ce(this);if(c)return c;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?ce(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(k)}),this.text=function(){var c=ce(this);if(c)return c;if(this._bodyBlob)return he(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(lt(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(Yo)}),this.json=function(){return this.text().then(JSON.parse)},this}var ft=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function dt(c){var m=c.toUpperCase();return ft.indexOf(m)>-1?m:c}function H(c,m){m=m||{};var v=m.body;if(c instanceof H){if(c.bodyUsed)throw new TypeError("Already read");this.url=c.url,this.credentials=c.credentials,m.headers||(this.headers=new A(c.headers)),this.method=c.method,this.mode=c.mode,this.signal=c.signal,!v&&c._bodyInit!=null&&(v=c._bodyInit,c.bodyUsed=!0)}else this.url=String(c);if(this.credentials=m.credentials||this.credentials||"same-origin",(m.headers||!this.headers)&&(this.headers=new A(m.headers)),this.method=dt(m.method||this.method||"GET"),this.mode=m.mode||this.mode||null,this.signal=m.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&v)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(v)}H.prototype.clone=function(){return new H(this,{body:this._bodyInit})};function Yo(c){var m=new FormData;return c.trim().split("&").forEach(function(v){if(v){var L=v.split("="),I=L.shift().replace(/\+/g," "),b=L.join("=").replace(/\+/g," ");m.append(decodeURIComponent(I),decodeURIComponent(b))}}),m}function Qo(c){var m=new A,v=c.replace(/\r?\n[\t ]+/g," ");return v.split(/\r?\n/).forEach(function(L){var I=L.split(":"),b=I.shift().trim();if(b){var Ue=I.join(":").trim();m.append(b,Ue)}}),m}Le.call(H.prototype);function W(c,m){m||(m={}),this.type="default",this.status=m.status===void 0?200:m.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in m?m.statusText:"OK",this.headers=new A(m.headers),this.url=m.url||"",this._initBody(c)}Le.call(W.prototype),W.prototype.clone=function(){return new W(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new A(this.headers),url:this.url})},W.error=function(){var c=new W(null,{status:0,statusText:""});return c.type="error",c};var Ko=[301,302,303,307,308];W.redirect=function(c,m){if(Ko.indexOf(m)===-1)throw new RangeError("Invalid status code");return new W(null,{status:m,headers:{location:c}})},f.DOMException=u.DOMException;try{new f.DOMException}catch(c){f.DOMException=function(m,v){this.message=m,this.name=v;var L=Error(m);this.stack=L.stack},f.DOMException.prototype=Object.create(Error.prototype),f.DOMException.prototype.constructor=f.DOMException}function mt(c,m){return new Promise(function(v,L){var I=new H(c,m);if(I.signal&&I.signal.aborted)return L(new f.DOMException("Aborted","AbortError"));var b=new XMLHttpRequest;function Ue(){b.abort()}b.onload=function(){var De={status:b.status,statusText:b.statusText,headers:Qo(b.getAllResponseHeaders()||"")};De.url="responseURL"in b?b.responseURL:De.headers.get("X-Request-URL");var ht="response"in b?b.response:b.responseText;v(new W(ht,De))},b.onerror=function(){L(new TypeError("Network request failed"))},b.ontimeout=function(){L(new TypeError("Network request failed"))},b.onabort=function(){L(new f.DOMException("Aborted","AbortError"))},b.open(I.method,I.url,!0),I.credentials==="include"?b.withCredentials=!0:I.credentials==="omit"&&(b.withCredentials=!1),"responseType"in b&&d.blob&&(b.responseType="blob"),I.headers.forEach(function(De,ht){b.setRequestHeader(ht,De)}),I.signal&&(I.signal.addEventListener("abort",Ue),b.onreadystatechange=function(){b.readyState===4&&I.signal.removeEventListener("abort",Ue)}),b.send(typeof I._bodyInit=="undefined"?null:I._bodyInit)})}return mt.polyfill=!0,u.fetch||(u.fetch=mt,u.Headers=A,u.Request=H,u.Response=W),f.Headers=A,f.Request=H,f.Response=W,f.fetch=mt,Object.defineProperty(f,"__esModule",{value:!0}),f}({})})(a),a.fetch.ponyfill=!0,delete a.fetch.polyfill;var i=a;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t});function Eo(e){e=e||{},this.type="fetch",this._fetch=Zu(e.fetch),h.isNodeEnv()&&e.keepAlive&&(this._keepAliveEnabledAgent=new(e.isHttps,G).Agent({keepAlive:!0}))}Eo.prototype.execute=function(e){var t=e.signal,n=!e.signal&&!!e.timeout,a,i=function(){a&&clearTimeout(a)},u=function(d){i();var p=tc(d.headers),w=d.ok&&e.streamConsumer!=null;return w?(ec(d,e.streamConsumer),{body:"[stream]",headers:p,status:d.status}):d.text().then(function(x){return{body:x,headers:p,status:d.status}})},l=function(d){return i(),Promise.reject(xo(d,n))};if(n){var f=new AbortController;t=f.signal,a=setTimeout(f.abort.bind(f),e.timeout)}return this._fetch(h.formatUrl(e.origin,e.path,e.query),{method:e.method,headers:e.headers,body:e.body,agent:this._keepAliveEnabledAgent,signal:t}).then(u).catch(l)};function ec(e,t){var n=function(u){t.onError(xo(u))};if(h.isNodeEnv()){e.body.on("error",n).on("data",t.onData).on("end",function(){t.onError(new TypeError("network error"))});return}try{let u=function(){return a.read().then(function(l){if(!l.done){var f=i.decode(l.value,{stream:!0});return t.onData(f),u()}t.onError(new TypeError("network error"))})};var a=e.body.getReader(),i=new TextDecoder("utf-8");u().catch(n)}catch(u){throw new V.StreamsNotSupported("Please, consider providing a Fetch API-compatible function with streamable response bodies. "+u)}}function xo(e,t){var n=e&&e.name==="AbortError";return n?t?new xe.TimeoutError:new xe.AbortError:e}function Zu(e){return typeof e=="function"?e:typeof ne.fetch=="function"?ne.fetch.bind(ne):Ku}function tc(e){var t={};for(var n of e.entries()){var a=n[0],i=n[1];t[a]=i}return t}var nc=Eo,{getBrowserOsDetails:rc}=h,Ae=h;function nt(e){var t=e.scheme==="https";e.port||(e.port=t?443:80);var n=!e.fetch&&Ae.isNodeEnv()&&ic();this._adapter=n?new Hu({http2SessionIdleTime:e.http2SessionIdleTime}):new nc({isHttps:t,fetch:e.fetch,keepAlive:e.keepAlive}),this._baseUrl=e.scheme+"://"+e.domain+":"+e.port,this._secret=e.secret,this._headers=Object.assign({},e.headers,ac()),this._queryTimeout=e.queryTimeout,this._lastSeen=null,this._timeout=Math.floor(e.timeout*1e3)}nt.prototype.getLastTxnTime=function(){return this._lastSeen};nt.prototype.syncLastTxnTime=function(e){(this._lastSeen==null||this._lastSeen<e)&&(this._lastSeen=e)};nt.prototype.execute=function(e){e=e||{};var t=e.streamConsumer&&(typeof e.streamConsumer.onData!="function"||typeof e.streamConsumer.onError!="function");if(t)return Promise.reject(new TypeError('Invalid "streamConsumer" provided'));var n=e.secret||this._secret,a=e.queryTimeout||this._queryTimeout,i=this._headers;return i.Authorization=n&&oc(n),i["X-Last-Seen-Txn"]=this._lastSeen,i["X-Query-Timeout"]=a,this._adapter.execute({origin:this._baseUrl,path:e.path||"/",query:e.query,method:e.method||"GET",headers:Ae.removeNullAndUndefinedValues(i),body:e.body,signal:e.signal,timeout:this._timeout,streamConsumer:e.streamConsumer})};function oc(e){return"Bearer "+e}function ac(){var e={driver:["javascript",Ot.version].join("-")},t;try{t=ne instanceof ServiceWorkerGlobalScope}catch(i){t=!1}try{if(Ae.isNodeEnv()){e.runtime=["nodejs",_.version].join("-"),e.env=Ae.getNodeRuntimeEnv();var n=G;e.os=[n.platform(),n.release()].join("-")}else t?e.runtime="Service Worker":(e.runtime=Ae.getBrowserDetails(),e.env="browser",e.os=rc())}catch(i){}var a={"X-FaunaDB-API-Version":Ot.apiVersion};return Ae.isNodeEnv()&&(a["X-Driver-Env"]=Object.keys(e).map(i=>[i,e[i].toLowerCase()].join("=")).join("; ")),a}function ic(){try{return!0}catch(e){return!1}}var _o={HttpClient:nt,TimeoutError:xe.TimeoutError,AbortError:xe.AbortError};function sc(e,t){return t=typeof t!="undefined"?t:!1,t?JSON.stringify(e,null,"  "):JSON.stringify(e)}function Nt(e){return JSON.parse(e,Dt)}function uc(e){var t=[];try{t.push(Nt(e)),e=""}catch(i){for(;;){var n=e.indexOf(`
`)+1;if(n<=0)break;var a=e.slice(0,n).trim();a.length>0&&t.push(Nt(a)),e=e.slice(n)}}return{values:t,buffer:e}}function Dt(e,t){if(typeof t!="object"||t===null)return t;if("@ref"in t){var n=t["@ref"];if(!("collection"in n)&&!("database"in n))return U.Native.fromName(n.id);var a=Dt("collection",n.collection),i=Dt("database",n.database);return new U.Ref(n.id,a,i)}else return"@obj"in t?t["@obj"]:"@set"in t?new U.SetRef(t["@set"]):"@ts"in t?new U.FaunaTime(t["@ts"]):"@date"in t?new U.FaunaDate(t["@date"]):"@bytes"in t?new U.Bytes(t["@bytes"]):"@query"in t?new U.Query(t["@query"]):t}var rt={toJSON:sc,parseJSON:Nt,parseJSONStreaming:uc},So=["start","error","version","history_rewrite"],cc=So.concat(["snapshot"]);function je(e,t,n,a){n=h.applyDefaults(n,{fields:null}),this._client=e,this._onEvent=a,this._query=ie.wrap(t),this._urlParams=n.fields?{fields:n.fields.join(",")}:null,this._abort=new AbortController,this._state="idle"}je.prototype.snapshot=function(){var e=this;e._client.query(ie.Get(e._query)).then(function(t){e._onEvent({type:"snapshot",event:t})}).catch(function(t){e._onEvent({type:"error",event:t})})};je.prototype.subscribe=function(){var e=this;if(e._state==="idle")e._state="open";else throw new Error("Subscription#start should not be called several times, consider instantiating a new stream instead.");var t=JSON.stringify(e._query),n=Date.now(),a="";function i(f){var d=Date.now(),p;try{p=rt.parseJSON(f.body)}catch(x){p=f.body}var w=new It("POST","stream",e._urlParams,t,e._query,f.body,p,f.status,f.headers,n,d);e._client._handleRequestResult(f,w)}function u(f){var d=rt.parseJSONStreaming(a+f);a=d.buffer,d.values.forEach(function(p){p.txn!==void 0&&e._client.syncLastTxnTime(p.txn),p.event==="error"?l(new V.StreamErrorEvent(p)):e._onEvent(p)})}function l(f){f instanceof _o.AbortError||e._onEvent({type:"error",event:f})}e._client._http.execute({method:"POST",path:"stream",body:t,query:e._urlParams,signal:this._abort.signal,streamConsumer:{onError:l,onData:u}}).then(i).catch(l)};je.prototype.close=function(){this._state!=="closed"&&(this._state="closed",this._abort.abort())};function at(e){this._allowedEvents=e,this._listeners={}}at.prototype.on=function(e,t){if(this._allowedEvents.indexOf(e)===-1)throw new Error("Unknown event type: "+e);this._listeners[e]===void 0&&(this._listeners[e]=[]),this._listeners[e].push(t)};at.prototype.dispatch=function(e){var t=this._listeners[e.type];if(!!t)for(var n=0;n<t.length;n++)t[n].call(null,e.event,e)};function Fe(e,t){this._client=e,this._dispatcher=t}Fe.prototype.on=function(e,t){return this._dispatcher.on(e,t),this};Fe.prototype.start=function(){return this._client.subscribe(),this};Fe.prototype.close=function(){this._client.close()};function lc(e){var t=function(n,a){var i=new at(So),u=new je(e,n,a,function(l){i.dispatch(l)});return new Fe(u,i)};return t.document=function(n,a){var i=[],u=!0,l=new at(cc),f=new je(e,n,a,d);function d(w){switch(w.type){case"start":l.dispatch(w),f.snapshot();break;case"snapshot":p(w);break;case"error":l.dispatch(w);break;default:u?i.push(w):l.dispatch(w)}}function p(w){l.dispatch(w);for(var x=0;x<i.length;x++){var P=i[x];P.txn>w.event.ts&&l.dispatch(P)}u=!1,i=null}return new Fe(f,l)},t}var fc={StreamAPI:lc},dc=ie;function ee(e){var t=parseInt(h.getEnvVariable("FAUNADB_HTTP2_SESSION_IDLE_TIME"),10),n=isNaN(t)?500:t;e=h.applyDefaults(e,{domain:"db.fauna.com",scheme:"https",port:null,secret:null,timeout:60,observer:null,keepAlive:!0,headers:{},fetch:void 0,queryTimeout:null,http2SessionIdleTime:n}),this._observer=e.observer,this._http=new _o.HttpClient(e),this.stream=fc.StreamAPI(this)}ee.apiVersion=Ot.apiVersion;ee.prototype.query=function(e,t){return this._execute("POST","",dc.wrap(e),null,t)};ee.prototype.paginate=function(e,t,n){return t=h.defaults(t,{}),n=h.defaults(n,{}),new ao(this,e,t,n)};ee.prototype.ping=function(e,t){return this._execute("GET","ping",null,{scope:e,timeout:t})};ee.prototype.getLastTxnTime=function(){return this._http.getLastTxnTime()};ee.prototype.syncLastTxnTime=function(e){this._http.syncLastTxnTime(e)};ee.prototype._execute=function(e,t,n,a,i){a=h.defaults(a,null),(t instanceof U.Ref||h.checkInstanceHasProperty(t,"_isFaunaRef"))&&(t=t.value),a!==null&&(a=h.removeUndefinedValues(a));var u=Date.now(),l=this,f=["GET","HEAD"].indexOf(e)>=0?void 0:JSON.stringify(n);return this._http.execute(Object.assign({},i,{path:t,query:a,method:e,body:f})).then(function(d){var p=Date.now(),w=rt.parseJSON(d.body),x=new It(e,t,a,f,n,d.body,w,d.status,d.headers,u,p);return l._handleRequestResult(d,x,i),w.resource})};ee.prototype._handleRequestResult=function(e,t,n){var a="x-txn-time";e.headers[a]!=null&&this.syncLastTxnTime(parseInt(e.headers[a],10));var i=[this._observer,n&&n.observer];i.forEach(u=>{typeof u=="function"&&u(t,this)}),V.FaunaHTTPError.raiseForStatusCode(t)};var mc=ee;function hc(e){return function(t,n){return e(Ao(t),n)}}function Ao(e){var t=e.query,n=e.method,a=e.path,i=e.requestContent,u=e.responseHeaders,l=e.responseContent,f=e.statusCode,d=e.timeTaken,p="";function w(x){p=p+x}return w("Fauna "+n+" /"+a+pc(t)+`
`),i!=null&&w("  Request JSON: "+kt(i)+`
`),w("  Response headers: "+kt(u)+`
`),w("  Response JSON: "+kt(l)+`
`),w("  Response ("+f+"): Network latency "+d+`ms
`),p}function gc(e){var t="  ";return e.split(`
`).join(`
`+t)}function kt(e){return gc(rt.toJSON(e,!0))}function pc(e){if(e==null)return"";var t=Object.keys(e);if(t.length===0)return"";var n=t.map(function(a){return a+"="+e[a]});return"?"+n.join("&")}var yc={logger:hc,showRequestResult:Ao},wc=h.mergeObjects({Client:mc,Expr:o,PageHelper:ao,RequestResult:It,clientLogger:yc,errors:V,values:U,query:ie},ie),te=wc;var{Call:vc,Collection:Be,Create:bc,Delete:Tc,Function:Ec,Index:xc,Login:_c,Logout:Sc,Match:Ac,Ref:it,Update:Pt}=te.query,Co=new te.Client({secret:"fnAEF5RwZEACArW9Ef8q5oDJ1oAFM8YD7rALxLxN"}),Oo=async(e,t,n,a,i=!1)=>{let{data:u}=await Co.query(bc(Be("users"),{credentials:{password:a},data:{email:e,firstName:t,lastName:n,passUpdateTs:0,selectedListId:"",todoLists:[],tosAgreement:i}}));return delete u.passUpdateTs,delete u.tosAgreement,u},ot=async(e,t)=>{let n=await Co.query(_c(Ac(xc("users_by_email"),e),{password:t}));return{userRef:n.instance.id,secret:n.secret}},Rt=async e=>await new te.Client({secret:e}).query(Sc(!0)),Io=async(e,t,n,{userRef:a,secret:i})=>{let{data:u}=await new te.Client({secret:i}).query(Pt(it(Be("users"),a),{data:{email:e,firstName:t,lastName:n}}));return{email:u.email,firstName:u.firstName,lastName:u.lastName}},Lo=async(e,{userRef:t,secret:n})=>{let a=await new te.Client({secret:n}).query(Pt(it(Be("users"),t),{credentials:{password:e},data:{passUpdateTs:Date.now()*1e3}}));return"data"in a},jt=async({userRef:e,secret:t})=>{let{data:n}=await new te.Client({secret:t}).query(vc(Ec("getUserDoc"),e));return delete n.tosAgreement,delete n.passUpdateTs,n},Do=async({userRef:e,secret:t})=>{let{data:n}=await new te.Client({secret:t}).query(Tc(it(Be("users"),e)));return n},No=async(e,t,{userRef:n,secret:a})=>{if(typeof e!="object"&&!(e instanceof Array))throw Error("Invalid type of data");let{data:i}=await new te.Client({secret:a}).query(Pt(it(Be("users"),n),{data:{todoLists:e,selectedListId:t}}));return{todoLists:i.todoLists,selectedListId:i.selectedListId}};var Ft="todos.session.tokens",y=null,ko=null,Bt=!1,g=e=>document.querySelector(e),J=e=>document.querySelectorAll(e),de=g("#mobile-menu"),Mt=g("#mobile-menu-open"),st=g("#sidebar"),Po=g("#sidebar-overlay"),Ut=g("#enable-notifications"),Ro=g("#dropdown-tools"),qt=J("[data-dashboard-button]"),Ht=J("[data-account-button]"),Wt=g("[data-todos]"),Vt=g("[data-new-todo-input]"),jo=g("[data-todo-display-tasks]"),B=g("[data-todo-title]"),$t=g("[data-save-list-name]"),ut=g("[data-tasks]"),Fo=g("[data-new-task-input]");g("#home-link").addEventListener("click",e=>{e.preventDefault(),oe(),Ce()?(q("#dashboard-component"),Oe("dashboard")):q("#home-component")});J("[data-signup-button]").forEach(e=>e.addEventListener("click",t=>{t.preventDefault(),g("#signup-form").querySelector("[data-error-msg]").innerText="",oe(),q("#signup-component"),de.classList.contains("hidden")||me()}));J("[data-login-button]").forEach(e=>e.addEventListener("click",t=>{t.preventDefault(),g("#login-form").querySelector("[data-error-msg]").innerText="",oe(),q("#login-component"),de.classList.contains("hidden")||me()}));J("[data-logout-button]").forEach(e=>e.addEventListener("click",async t=>{if(t.preventDefault(),de.classList.contains("hidden")||me(),Ce()){M("Logging you out...");try{await Rt(N().secret)&&Gt()}catch(n){console.error("fLogout >>>",n.message)}M()}}));qt.forEach(e=>e.addEventListener("click",t=>{t.preventDefault(),oe(),q("#dashboard-component"),Oe("dashboard"),de.classList.contains("hidden")||me()}));Ht.forEach(e=>e.addEventListener("click",t=>{t.preventDefault(),g("#account-form").querySelector("[data-error-msg]").innerText="",g("[data-acc-ref-id]").innerText=N().userRef,g("#account-form #email-address-account").value=y.email,g("#account-form #first-name-account").value=y.firstName,g("#account-form #last-name-account").value=y.lastName,oe(),q("#account-component"),Oe("account"),de.classList.contains("hidden")||me()}));Mt.addEventListener("click",me);g("#mobile-menu-close").addEventListener("click",me);g("#sidebar-open").addEventListener("click",Me);Po.addEventListener("click",Me);g("#add-todo-sidebar").addEventListener("click",e=>{e.preventDefault(),st.classList.contains("hidden")&&Me(),Vt.focus()});Ut.addEventListener("click",Cc);g("#dropdown-toggle").addEventListener("click",ct);J("form").forEach(e=>e.addEventListener("submit",Oc));g("#delete-account").addEventListener("click",Ic);function Bo(e){return typeof e=="object"&&"userRef"in e&&"secret"in e?(localStorage.setItem(Ft,JSON.stringify(e)),!0):!1}function Mo(){y=null,localStorage.removeItem(Ft)}function N(){return JSON.parse(localStorage.getItem(Ft))||null}function Ce(){return N()!==null&&typeof N()=="object"&&"userRef"in N()&&"secret"in N()&&y!==null&&typeof y=="object"&&"email"in y&&"firstName"in y&&"lastName"in y&&"selectedListId"in y&&"todoLists"in y}function M(e){e&&(g("[data-info-msg]").innerText=e),g("#show-loader").classList.toggle("hidden")}function Jt(e){g("[data-info-msg]").innerText=e}function me(e){de.classList.toggle("hidden"),de.classList.contains("hidden")?Mt.setAttribute("aria-expanded","false"):Mt.setAttribute("aria-expanded","true")}function Me(e){st.classList.toggle("hidden"),Po.classList.toggle("hidden")}function ct(e){Ro.classList.toggle("hidden")}async function Oc(e){e.preventDefault();let t=e.target.id;if(t==="signup-form"||t==="login-form"||t==="account-form"){let n=e.target.querySelector("[data-error-msg]"),a=e.target.querySelector("[data-success-msg]"),i={},u=e.target.elements;for(let l=0;l<u.length;l++){let f=u[l];f.type!=="submit"&&(i[f.name]=f.type=="checkbox"?f.checked:f.value.trim())}if(!Lc(i,t)){n.innerText="Missing or invalid field(s) supplied";return}if(t==="signup-form"){M("Signing you up...");try{y={...await Oo(i.email,i.firstName,i.lastName,i.password,i.tosAgreement)},Jt("Loading your dashboard...");let f=await ot(i.email,i.password);if(!Bo(f))throw Error("Cannot get user credentials");Xt(),e.target.reset()}catch(l){console.error("fSignup/fLogin error >>>",l.message),n.innerText=`Sign Up error: ${l.message.replace("instance","email")}`}M()}if(t==="login-form"){M("Logging you in...");try{let l=await ot(i.email,i.password);await Rt(l.secret);let f=await ot(i.email,i.password);if(Bo(f))Jt("Loading your dashboard..."),y={...await jt({...f})},Xt(),e.target.reset();else throw Error("Cannot get user credentials")}catch(l){console.error("fLogin/fGetUserData >>>",l.message),n.innerText=`Log In error: ${l.message}`}M()}if(t==="account-form"&&Ce()){if(N().userRef==="296681595934343680"){n.innerText="Demo account cannot be edited",setTimeout(()=>{n.innerText=""},3e3);return}M("Updating your details...");try{let l=await Io(i.email,i.firstName,i.lastName,{...N()});y={...y,...l},Uo(),i.password&&(Jt("Updating your password..."),await Lo(i.password,{...N()}),g("#account-form #password-account").value=""),a.innerText="Update successful",setTimeout(()=>{a.innerText=""},3e3)}catch(l){console.error("fUpdateAccount/fUpdatePassword >>>",l.message),n.innerText=`Update error: ${l.message}`}M()}}if(t==="new-todo-form"&&Ce()){let n=zt(Vt.value.trim());if(n===null||n===""||y.todoLists.some(i=>i.name==n))return;let a=Dc(n);Vt.value=null,y.todoLists.push(a),y.selectedListId=a.id,se(),st.classList.contains("hidden")||Me()}if(t==="new-task-form"&&Ce()){let n=zt(Fo.value.trim());if(n===null||n==="")return;let a=Nc(n);Fo.value=null,y.todoLists.find(u=>u.id===y.selectedListId).tasks.push(a),se()}}function Lc(e,t){e=typeof e=="object"&&e!==null?e:!1;let{email:n,firstName:a,lastName:i,password:u,tosAgreement:l}=e;return e&&t==="signup-form"?typeof a=="string"&&a.length>0&&typeof i=="string"&&i.length>0&&typeof n=="string"&&Yt(n)&&typeof u=="string"&&u.length>=4&&typeof l=="boolean"&&l!==!1:e&&t==="login-form"?typeof n=="string"&&Yt(n)&&typeof u=="string"&&u.length>=4:e&&t==="account-form"?typeof a=="string"&&a.length>0&&typeof i=="string"&&i.length>0&&typeof n=="string"&&Yt(n)&&typeof u=="string"&&(u===""||u.length>=4):!1}function Yt(e){e=typeof e=="string"&&e.length>=6?e:!1;let t=/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,4})(\]?)$/;return e?t.test(e):!1}function Oe(e){qt.forEach(t=>t.classList.remove("bg-indigo-200")),Ht.forEach(t=>t.classList.remove("bg-indigo-200")),!(e==null||e==null)&&(e==="dashboard"&&qt.forEach(t=>t.classList.add("bg-indigo-200")),e==="account"&&Ht.forEach(t=>t.classList.add("bg-indigo-200")))}function q(e){g(e).style=""}function oe(){g("#home-component").style.display="none",g("#signup-component").style.display="none",g("#login-component").style.display="none",g("#dashboard-component").style.display="none",g("#account-component").style.display="none",g("#acc-deleted-component").style.display="none"}function kc(){J("[data-logged-out]").forEach(e=>e.style.display="none"),J("[data-logged-in]").forEach(e=>e.style="")}function qo(){J("[data-logged-out]").forEach(e=>e.style=""),J("[data-logged-in]").forEach(e=>e.style.display="none")}function Uo(){g("[data-user-name]").innerText=`${y.firstName.charAt(0).toUpperCase()}'s Todo Lists`}function Xt(){kc(),oe(),q("#dashboard-component"),Oe("dashboard"),Uo(),Qt(),Ho(),Wo()}function Gt(){qo(),oe(),q("#home-component"),Oe(void 0),Mo(),Vo()}async function Ic(e){if(e.preventDefault(),N().userRef==="296681595934343680"){g("#account-form > [data-error-msg]").innerText="Demo account cannot be deleted",setTimeout(()=>{g("#account-form > [data-error-msg]").innerText=""},3e3);return}M("Deleting your account...");try{let t=await Do({...N()});qo(),Oe(void 0),oe(),Mo(),q("#acc-deleted-component"),g("#acc-deleted-component").querySelector("[data-acc-delteted-json]").value=JSON.stringify(t)}catch(t){console.error("fDeleteAccount >>>",t.message)}M()}Wt.addEventListener("click",e=>{e.preventDefault(),e.target.tagName.toLowerCase()==="a"&&(y.selectedListId=e.target.dataset.todoId,se(),st.classList.contains("hidden")||Me(),Ro.classList.contains("hidden")||ct())});ut.addEventListener("click",e=>{if(e.target.name==="task-checkbox"){let t=y.todoLists.find(a=>a.id===y.selectedListId),n=t.tasks.find(a=>a.id===e.target.id);n.completed=e.target.checked,Go(),$o(t)}e.target.dataset.toggleAlarmForm&&(e.preventDefault(),g(`[data-alarm-form="${e.target.dataset.toggleAlarmForm}"]`).classList.toggle("hidden"))});ut.addEventListener("submit",e=>{e.preventDefault();let t=e.target.dataset.taskAlarmFormId,n=e.target.alarmDate.value,a=e.target.alarmTime.value;if(!t||!n||!a)return;let i=y.todoLists.find(({id:u})=>u===y.selectedListId).tasks.find(({id:u})=>u===t);i.alarmDate=n,i.alarmTime=a,i.notified=!1,i.completed=!1,i.overdue=!1,g(`[data-alarm-form="${t}"]`).classList.add("hidden"),se()});B.addEventListener("click",e=>{$t.classList.remove("hidden"),B.style.backgroundColor="white",B.style.padding="0 5px"});B.addEventListener("input",e=>{e.preventDefault();let t=i=>i.replace(/\s/g," ").trim(),n=B.dataset.todoId,a=t(B.innerText);a.length>=1&&!y.todoLists.some(i=>i.name==a)&&Pc(n,a)});$t.addEventListener("click",e=>{B.style.backgroundColor="transparent",B.style.padding="0",B.blur(),$t.classList.add("hidden"),se()});g("[data-clear-complete-tasks]").addEventListener("click",e=>{e.preventDefault();let t=y.todoLists.find(n=>n.id===y.selectedListId);t.tasks=t.tasks.filter(n=>!n.completed),se(),ct()});g("[data-delete-todo-list]").addEventListener("click",e=>{e.preventDefault(),y.todoLists=y.todoLists.filter(t=>t.id!==y.selectedListId),y.selectedListId="",se(),ct()});function Dc(e){return{id:Date.now().toString(),name:e,tasks:[]}}function Nc(e){return{id:Date.now().toString(),name:e,completed:!1,alarmDate:"",alarmTime:"",notified:!1,overdue:!1}}function Ho(){Jo(Wt),Rc();let e=y.todoLists.find(t=>t.id===y.selectedListId);y.selectedListId===""||!y.todoLists.length?(g("[data-todo-display-empty]").classList.remove("hidden"),jo.style.display="none"):(g("[data-todo-display-empty]").classList.add("hidden"),jo.style.display="",B.innerText=e.name!==void 0?e.name:"",B.setAttribute("contenteditable","true"),B.dataset.todoId=e.id,$o(e),Jo(ut),jc(e))}function Rc(){y.todoLists.forEach(e=>{let t=`
            <svg class="h-6 w-6 pointer-events-none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" />
                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd" />
            </svg>
            <span class="ml-3 pointer-events-none">${e.name}</span>
        `,n=["flex","items-center","mb-2","p-2","text-base","text-indigo-700","bg-gray-200","rounded"],a=["flex","items-center","mb-2","p-2","text-base","text-gray-600","hover:text-gray-700","hover:bg-gray-200","rounded"],i=document.createElement("a");i.href="#",i.dataset.todoId=e.id,i.innerHTML=t,i.dataset.todoId===y.selectedListId?i.classList.add(...n):i.classList.add(...a),Wt.appendChild(i)})}function Pc(e,t){let n=y.todoLists.find(a=>a.id==e);n.name=zt(t)}function $o(e){let t=e.tasks.filter(a=>!a.completed).length,n=t===1?"task":"tasks";g("[data-todo-count]").innerText=`${t} ${n} remaining`}function jc(e){e.tasks.forEach(t=>{let{id:n,name:a,alarmDate:i,alarmTime:u,completed:l,notified:f,overdue:d}=t,p=document.importNode(g("#task-template").content,!0);p.querySelector("[data-toggle-alarm-form]").dataset.toggleAlarmForm=n,p.querySelector("[data-alarm-form]").dataset.alarmForm=n,p.querySelector("form").dataset.taskAlarmFormId=n,p.querySelector("input[name=alarmDate]").value=i,p.querySelector("input[name=alarmTime]").value=u;let w=p.querySelector("input[name=task-checkbox]");w.id=n,w.checked=l;let x=p.querySelector("label");x.htmlFor=n,x.append(a);let P=p.querySelector("[data-due-text]");P.innerText=!d&&i&&u?`Task due on ${new Date(`${i} ${u}`).toLocaleString()}`:d?"Task overdue, marked as complete.":"",d&&P.classList.add("text-pink-400");let ue=p.querySelector("[data-notified-text]");ue.innerText=d&&f?"Notified!":d&&!f?"Not notified!":"",f||ue.classList.add("text-indigo-500"),ut.appendChild(p)})}function Jo(e){for(;e.firstChild;)e.removeChild(e.firstChild)}async function Go(){try{let e=await No(y.todoLists,y.selectedListId,{...N()});y={...y,...e},Bt===!1&&Xo()&&Wo()}catch(e){let n=function(){t>1?g("[data-db-error]").innerText=`Database connection error. To prevent data loss you'll be logged out in ${t-1}s.`:(g("#show-db-error").style.display="none",g("[data-db-error]").innerText="",Gt()),t--,t>0&&setTimeout(n,1e3)};console.error("fUpdateTodos >>>",e.message),q("#show-db-error");let t=6;n()}}function se(){Go(),Ho()}function Cc(){"Notification"in window?Fc()?Notification.requestPermission().then(()=>Qt()):Notification.requestPermission(()=>Qt()):console.log("This browser does not support notifications.")}function Fc(){try{Notification.requestPermission().then()}catch(e){return!1}return!0}function Qt(){zo()?Ut.style.display="none":Ut.style=""}function zo(){return!(Notification.permission==="denied"||Notification.permission==="default")}function zt(e){return e.toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function Xo(){return y.todoLists.length&&y.todoLists.reduce((e,t)=>e+t.tasks.length,0)}function Bc(){if(Ce()&&Xo()){let e=0,t=n=>{let{alarmDate:a,alarmTime:i,name:u,notified:l,overdue:f}=n;if(a&&i){let d=Date.parse(`${a} ${i}`),p=Date.now(),w="img/notifications-icon-128x128.png",x=`Hey ${y.firstName}! Your task "${u}" is now overdue and has been marked as complete.`;!f&&p>d&&(!l&&zo()&&(new Notification("ToDo's JS",{body:x,icon:w}),n.notified=!0),n.completed=!0,n.overdue=!0,e++)}return n};y.todoLists=y.todoLists.map(n=>(n.tasks.length&&n.tasks.map(t),n)),e&&se()}else Vo()}function Wo(){ko=setInterval(Bc,5e3),Bt=!0}function Vo(){clearInterval(ko),Bt=!1}async function Mc(){if(N()!==null&&"userRef"in N()&&"secret"in N()){M("Loading your dashboard...");try{y={...await jt({...N()})},Xt()}catch(e){console.error("fGetUserData >>> ",e.message),Gt()}M()}else q("#home-component")}window.onload=()=>{Mc()};
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
//# sourceMappingURL=app.js.map
